2025-04-29 13:59:27,990 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-29 14:01:22,678 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-29 14:01:24,617 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-29 14:01:24,673 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-29 14:01:24,734 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-29 14:01:26,408 - INFO - Bridge creado: lxdbr1
2025-04-29 14:01:27,306 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-29 14:01:30,755 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-29 14:01:41,170 - INFO - Contenedor s1 creado con éxito.
2025-04-29 18:43:55,368 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-29 18:43:59,865 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-29 18:49:16,371 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-29 18:49:18,119 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-29 18:49:18,958 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-29 18:49:19,028 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 00:28:09,937 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 00:28:11,741 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 00:28:42,813 - INFO - Eliminando toda la infraestructura
2025-04-30 00:28:42,889 - INFO - Imagen local eliminada con éxito.
2025-04-30 00:28:51,803 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 00:28:53,616 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 00:28:55,256 - INFO - Bridge creado: lxdbr0
2025-04-30 00:28:56,189 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 00:28:59,707 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 00:29:01,311 - INFO - Bridge creado: lxdbr1
2025-04-30 00:29:38,216 - INFO - Eliminando toda la infraestructura
2025-04-30 00:29:38,298 - INFO - Imagen local eliminada con éxito.
2025-04-30 00:37:05,153 - INFO - Eliminando toda la infraestructura
2025-04-30 00:37:05,173 - INFO - Imagen local eliminada con éxito.
2025-04-30 00:40:57,443 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 00:40:59,250 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 00:41:16,308 - INFO - Eliminando toda la infraestructura
2025-04-30 00:41:16,383 - INFO - Imagen local eliminada con éxito.
2025-04-30 00:41:29,249 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 00:41:31,054 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 00:41:31,082 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 00:41:31,145 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 00:41:32,752 - INFO - Bridge creado: lxdbr1
2025-04-30 01:07:38,861 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 01:07:40,668 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 01:07:41,559 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 01:07:45,073 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 01:07:46,687 - INFO - Bridge creado: lxdbr1
2025-04-30 19:47:38,713 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 19:47:41,751 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 19:47:41,779 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 19:47:41,833 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 19:47:43,446 - INFO - Bridge creado: lxdbr1
2025-04-30 19:47:44,362 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 19:47:47,689 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 19:47:57,457 - INFO - Contenedor s1 creado con éxito.
2025-04-30 19:47:57,498 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 19:47:57,536 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 19:48:07,211 - INFO - Contenedor s2 creado con éxito.
2025-04-30 19:48:07,243 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-04-30 19:48:07,273 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-04-30 19:48:17,180 - INFO - Contenedor lb creado con éxito.
2025-04-30 19:48:17,212 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 19:48:17,246 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 19:48:17,282 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 19:48:17,313 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 19:48:27,273 - INFO - Contenedor cl creado con éxito.
2025-04-30 19:48:27,306 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 19:48:27,338 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 19:48:27,340 - INFO - Número de servidores 2 guardados correctamente
2025-04-30 19:48:27,340 - INFO - Infraestructura creada correctamente.
2025-04-30 19:48:36,758 - INFO - Contenedor iniciado: s1
2025-04-30 19:48:37,069 - INFO - Contenedor iniciado: s2
2025-04-30 19:48:37,965 - INFO - Contenedor iniciado: cl
2025-04-30 19:48:38,556 - INFO - Contenedor iniciado: lb
2025-04-30 19:48:38,556 - INFO - Todos los contenedores han sido iniciados
2025-04-30 19:48:38,557 - INFO - Consola del contenedor {c} abierta correctamente
2025-04-30 19:48:38,561 - INFO - Consola del contenedor {c} abierta correctamente
2025-04-30 19:48:38,566 - INFO - Consola del contenedor {c} abierta correctamente
2025-04-30 19:48:38,573 - INFO - Consola del contenedor {c} abierta correctamente
2025-04-30 19:49:06,844 - INFO - Listando contenedores
2025-04-30 19:58:46,146 - INFO - Buscando servidor libre para crear...
2025-04-30 19:59:49,550 - INFO - Buscando servidor libre para crear...
2025-04-30 19:59:49,590 - INFO - Creando nuevo servidor disponible: s3
2025-04-30 19:59:59,251 - INFO - Contenedor s3 creado con éxito.
2025-04-30 19:59:59,289 - INFO - Conectando s3 al bridge lxdbr0 por eth0
2025-04-30 19:59:59,322 - INFO - Contenedor s3 conectado a eth0 con ip 134.3.0.13 
2025-04-30 20:01:28,481 - INFO - Listando contenedores
2025-04-30 20:01:41,512 - INFO - Buscando servidor libre para crear...
2025-04-30 20:01:41,556 - INFO - Creando nuevo servidor disponible: s3
2025-04-30 20:01:51,499 - INFO - Contenedor s3 creado con éxito.
2025-04-30 20:01:51,617 - INFO - Conectando s3 al bridge lxdbr0 por eth0
2025-04-30 20:01:51,671 - INFO - Contenedor s3 conectado a eth0 con ip 134.3.0.13 
2025-04-30 20:01:51,672 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-04-30 20:02:05,656 - INFO - Solicitado arrancar servidor: 3
2025-04-30 20:02:05,656 - ERROR - Nombre de servidor inválido: 3
2025-04-30 20:02:13,191 - INFO - Solicitado arrancar servidor: s3
2025-04-30 20:02:13,506 - INFO - Contenedor iniciado: s3
2025-04-30 20:02:13,506 - INFO - Servidor s3 corriendo correctamente.
2025-04-30 20:02:25,780 - INFO - Solicitado parar servidor: s3
2025-04-30 20:02:27,605 - INFO - Contenedor parado: s3
2025-04-30 20:02:27,605 - INFO - Servidor s3 detenido correctamente.
2025-04-30 20:02:40,531 - INFO - Buscando último servidor para eliminar...
2025-04-30 20:02:40,577 - INFO - Eliminando servidor: s3
2025-04-30 20:02:41,395 - INFO - Contenedor eliminado: s3
2025-04-30 20:02:41,395 - INFO - Servidor s3 eliminado correctamente.
2025-04-30 20:02:57,387 - INFO - Eliminando toda la infraestructura
2025-04-30 20:02:57,458 - INFO - Imagen local eliminada con éxito.
2025-04-30 20:02:59,218 - INFO - Contenedor eliminado: s1
2025-04-30 20:03:00,994 - INFO - Contenedor eliminado: s2
2025-04-30 20:03:02,795 - INFO - Contenedor eliminado: cl
2025-04-30 20:03:04,877 - INFO - Contenedor eliminado: lb
2025-04-30 20:03:05,187 - INFO - Bridge eliminado: lxdbr0
2025-04-30 20:03:05,498 - INFO - Bridge eliminado: lxdbr1
2025-04-30 20:03:05,498 - INFO - Eliminación completada.
2025-04-30 20:04:49,667 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 20:04:51,340 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 20:05:37,014 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 20:05:38,672 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 20:05:40,305 - INFO - Bridge creado: lxdbr0
2025-04-30 20:05:41,183 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 20:05:44,578 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 20:05:46,188 - INFO - Bridge creado: lxdbr1
2025-04-30 20:05:47,035 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 20:05:50,368 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 20:05:59,866 - INFO - Contenedor s1 creado con éxito.
2025-04-30 20:05:59,899 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 20:05:59,928 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 20:06:09,568 - INFO - Contenedor lb creado con éxito.
2025-04-30 20:06:09,627 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 20:06:09,681 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 20:06:09,723 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 20:06:09,770 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 20:06:10,154 - INFO - Contenedor iniciado: lb
2025-04-30 20:06:35,635 - INFO - Eliminando toda la infraestructura
2025-04-30 20:06:35,705 - INFO - Imagen local eliminada con éxito.
2025-04-30 20:06:36,570 - INFO - Contenedor eliminado: s1
2025-04-30 20:07:20,895 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 20:07:22,555 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 20:07:24,164 - INFO - Bridge creado: lxdbr0
2025-04-30 20:07:25,051 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 20:07:28,423 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 20:07:31,054 - INFO - Bridge creado: lxdbr1
2025-04-30 20:07:31,922 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 20:07:35,251 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 20:07:44,756 - INFO - Contenedor s1 creado con éxito.
2025-04-30 20:07:44,796 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 20:07:44,826 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 20:07:55,775 - INFO - Contenedor lb creado con éxito.
2025-04-30 20:07:55,809 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 20:07:55,840 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 20:07:55,876 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 20:07:55,907 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 20:07:56,262 - INFO - Contenedor iniciado: lb
2025-04-30 20:09:01,661 - INFO - Contenedor parado: lb
2025-04-30 20:09:11,374 - INFO - Contenedor cl creado con éxito.
2025-04-30 20:09:11,459 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 20:09:11,503 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 20:09:11,505 - INFO - Número de servidores 1 guardados correctamente
2025-04-30 20:09:11,505 - INFO - Infraestructura creada correctamente.
2025-04-30 20:09:25,070 - INFO - Listando contenedores
2025-04-30 20:09:30,399 - INFO - Contenedor iniciado: s1
2025-04-30 20:09:30,638 - INFO - Contenedor iniciado: cl
2025-04-30 20:09:31,050 - INFO - Contenedor iniciado: lb
2025-04-30 20:09:31,050 - INFO - Todos los contenedores han sido iniciados
2025-04-30 20:09:31,051 - INFO - Consola del contenedor s1 abierta correctamente
2025-04-30 20:09:31,056 - INFO - Consola del contenedor cl abierta correctamente
2025-04-30 20:09:31,061 - INFO - Consola del contenedor lb abierta correctamente
2025-04-30 20:09:37,428 - INFO - Listando contenedores
2025-04-30 20:13:42,713 - INFO - Eliminando toda la infraestructura
2025-04-30 20:13:42,784 - INFO - Imagen local eliminada con éxito.
2025-04-30 20:13:44,490 - INFO - Contenedor eliminado: s1
2025-04-30 20:13:46,259 - INFO - Contenedor eliminado: cl
2025-04-30 20:13:48,201 - INFO - Contenedor eliminado: lb
2025-04-30 20:13:48,559 - INFO - Bridge eliminado: lxdbr0
2025-04-30 20:13:48,922 - INFO - Bridge eliminado: lxdbr1
2025-04-30 20:13:48,923 - INFO - Eliminación completada.
2025-04-30 20:13:55,447 - INFO - Listando contenedores
2025-04-30 20:13:58,749 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 20:14:00,423 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 20:14:02,042 - INFO - Bridge creado: lxdbr0
2025-04-30 20:14:02,910 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 20:14:06,268 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 20:14:07,898 - INFO - Bridge creado: lxdbr1
2025-04-30 20:14:08,800 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 20:14:12,150 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 20:14:21,740 - INFO - Contenedor s1 creado con éxito.
2025-04-30 20:14:21,772 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 20:14:21,799 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 20:14:31,719 - INFO - Contenedor lb creado con éxito.
2025-04-30 20:14:31,751 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 20:14:31,783 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 20:14:31,820 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 20:14:31,850 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 20:14:32,252 - INFO - Contenedor iniciado: lb
2025-04-30 20:16:44,778 - INFO - Contenedor parado: lb
2025-04-30 20:16:54,309 - INFO - Contenedor cl creado con éxito.
2025-04-30 20:16:54,353 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 20:16:54,385 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 20:16:54,670 - INFO - Contenedor iniciado: cl
2025-04-30 20:17:13,777 - INFO - Contenedor parado: cl
2025-04-30 20:17:13,779 - INFO - Número de servidores 1 guardados correctamente
2025-04-30 20:17:13,779 - INFO - Infraestructura creada correctamente.
2025-04-30 20:17:25,297 - INFO - Contenedor iniciado: s1
2025-04-30 20:17:25,578 - INFO - Contenedor iniciado: cl
2025-04-30 20:17:25,990 - INFO - Contenedor iniciado: lb
2025-04-30 20:17:25,990 - INFO - Todos los contenedores han sido iniciados
2025-04-30 20:17:25,991 - INFO - Consola del contenedor s1 abierta correctamente
2025-04-30 20:17:26,004 - INFO - Consola del contenedor cl abierta correctamente
2025-04-30 20:17:26,016 - INFO - Consola del contenedor lb abierta correctamente
2025-04-30 20:17:31,896 - INFO - Listando contenedores
2025-04-30 20:55:53,509 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 20:55:59,290 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 20:55:59,339 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 20:56:00,254 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 20:56:01,923 - INFO - Bridge creado: lxdbr1
2025-04-30 20:56:02,758 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 20:56:06,237 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 20:56:15,890 - INFO - Contenedor s1 creado con éxito.
2025-04-30 20:56:16,403 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 20:56:17,017 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 20:56:27,115 - INFO - Contenedor lb creado con éxito.
2025-04-30 20:56:27,315 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 20:56:27,437 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 20:56:27,711 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 20:56:27,777 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 20:56:28,190 - INFO - Contenedor iniciado: lb
2025-04-30 20:57:57,848 - INFO - Contenedor parado: lb
2025-04-30 20:58:08,086 - INFO - Contenedor cl creado con éxito.
2025-04-30 20:58:08,425 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 20:58:08,570 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 20:58:09,860 - INFO - Contenedor iniciado: cl
2025-04-30 20:59:39,041 - INFO - Contenedor parado: cl
2025-04-30 20:59:39,043 - INFO - Número de servidores 1 guardados correctamente
2025-04-30 20:59:39,044 - INFO - Infraestructura creada correctamente.
2025-04-30 21:02:01,042 - INFO - Contenedor iniciado: s1
2025-04-30 21:02:01,502 - INFO - Contenedor iniciado: cl
2025-04-30 21:02:01,958 - INFO - Contenedor iniciado: lb
2025-04-30 21:02:01,958 - INFO - Todos los contenedores han sido iniciados
2025-04-30 21:02:01,961 - INFO - Consola del contenedor s1 abierta correctamente
2025-04-30 21:02:01,964 - INFO - Consola del contenedor cl abierta correctamente
2025-04-30 21:02:01,972 - INFO - Consola del contenedor lb abierta correctamente
2025-04-30 21:02:42,865 - INFO - Listando contenedores
2025-04-30 22:09:53,468 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-04-30 22:09:56,235 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 22:09:57,835 - INFO - Bridge creado: lxdbr0
2025-04-30 22:09:58,718 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 22:10:02,234 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 22:10:03,841 - INFO - Bridge creado: lxdbr1
2025-04-30 22:10:04,737 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 22:10:08,392 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 22:10:18,096 - INFO - Contenedor s1 creado con éxito.
2025-04-30 22:10:18,128 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 22:10:18,160 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 22:10:27,871 - INFO - Contenedor lb creado con éxito.
2025-04-30 22:10:28,175 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 22:10:28,452 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 22:10:29,172 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 22:10:29,271 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 22:10:29,893 - INFO - Contenedor iniciado: lb
2025-04-30 22:10:51,427 - INFO - Contenedor parado: lb
2025-04-30 22:11:01,125 - INFO - Contenedor cl creado con éxito.
2025-04-30 22:11:01,174 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 22:11:01,207 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 22:11:01,535 - INFO - Contenedor iniciado: cl
2025-04-30 22:11:19,720 - INFO - Contenedor parado: cl
2025-04-30 22:11:19,721 - INFO - Número de servidores 1 guardados correctamente
2025-04-30 22:11:19,721 - INFO - Infraestructura creada correctamente.
2025-04-30 22:11:29,406 - INFO - Contenedor iniciado: s1
2025-04-30 22:11:29,671 - INFO - Contenedor iniciado: cl
2025-04-30 22:11:30,071 - INFO - Contenedor iniciado: lb
2025-04-30 22:11:30,071 - INFO - Todos los contenedores han sido iniciados
2025-04-30 22:11:30,072 - INFO - Consola del contenedor s1 abierta correctamente
2025-04-30 22:11:30,073 - INFO - Consola del contenedor cl abierta correctamente
2025-04-30 22:11:30,074 - INFO - Consola del contenedor lb abierta correctamente
2025-04-30 22:13:01,202 - INFO - Buscando servidor libre para crear...
2025-04-30 22:13:01,232 - INFO - Creando nuevo servidor disponible: s2
2025-04-30 22:13:11,076 - INFO - Contenedor s2 creado con éxito.
2025-04-30 22:13:11,111 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-04-30 22:13:11,140 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-04-30 22:13:11,140 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-04-30 22:13:27,886 - INFO - Solicitado arrancar servidor: s2
2025-04-30 22:13:28,245 - INFO - Contenedor iniciado: s2
2025-04-30 22:13:28,245 - INFO - Servidor s2 corriendo correctamente.
2025-04-30 22:13:35,710 - INFO - Listando contenedores
2025-04-30 22:16:13,082 - INFO - Eliminando toda la infraestructura
2025-04-30 22:16:13,152 - INFO - Imagen local eliminada con éxito.
2025-04-30 22:16:15,050 - INFO - Contenedor eliminado: s1
2025-04-30 22:16:16,836 - INFO - Contenedor eliminado: cl
2025-04-30 22:16:18,830 - INFO - Contenedor eliminado: lb
2025-04-30 22:16:18,844 - INFO - Bridge eliminado: lxdbr0
2025-04-30 22:16:19,204 - INFO - Bridge eliminado: lxdbr1
2025-04-30 22:16:19,205 - INFO - Eliminación completada.
2025-04-30 22:27:14,169 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 22:27:15,829 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 22:29:37,087 - INFO - Eliminando toda la infraestructura
2025-04-30 22:29:37,157 - INFO - Imagen local eliminada con éxito.
2025-04-30 22:29:51,742 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-04-30 22:29:53,409 - INFO - Imagen ubuntu2004 importada con éxito.
2025-04-30 22:29:55,032 - INFO - Bridge creado: lxdbr0
2025-04-30 22:29:55,928 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-04-30 22:29:59,467 - INFO - Bridge configurado correctamente: lxdbr0
2025-04-30 22:30:01,086 - INFO - Bridge creado: lxdbr1
2025-04-30 22:30:01,918 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-04-30 22:30:05,468 - INFO - Bridge configurado correctamente: lxdbr1
2025-04-30 22:30:14,918 - INFO - Contenedor s1 creado con éxito.
2025-04-30 22:30:14,951 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-04-30 22:30:14,984 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-04-30 22:30:24,553 - INFO - Contenedor s2 creado con éxito.
2025-04-30 22:30:24,588 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-04-30 22:30:24,641 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-04-30 22:30:34,541 - INFO - Contenedor lb creado con éxito.
2025-04-30 22:30:34,574 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-04-30 22:30:34,600 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-04-30 22:30:34,632 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-04-30 22:30:34,660 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-04-30 22:30:35,075 - INFO - Contenedor iniciado: lb
2025-04-30 22:31:52,683 - INFO - Contenedor parado: lb
2025-04-30 22:32:02,156 - INFO - Contenedor cl creado con éxito.
2025-04-30 22:32:02,251 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-04-30 22:32:02,283 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-04-30 22:32:02,617 - INFO - Contenedor iniciado: cl
2025-04-30 22:32:16,716 - INFO - Contenedor parado: cl
2025-04-30 22:32:16,718 - INFO - Número de servidores 2 guardados correctamente
2025-04-30 22:32:16,718 - INFO - Infraestructura creada correctamente.
2025-04-30 22:32:31,865 - INFO - Contenedor iniciado: s1
2025-04-30 22:32:32,120 - INFO - Contenedor iniciado: s2
2025-04-30 22:32:32,399 - INFO - Contenedor iniciado: cl
2025-04-30 22:32:32,820 - INFO - Contenedor iniciado: lb
2025-04-30 22:32:32,820 - INFO - Todos los contenedores han sido iniciados
2025-04-30 22:32:32,821 - INFO - Consola del contenedor s1 abierta correctamente
2025-04-30 22:32:32,825 - INFO - Consola del contenedor s2 abierta correctamente
2025-04-30 22:32:32,833 - INFO - Consola del contenedor cl abierta correctamente
2025-04-30 22:32:32,859 - INFO - Consola del contenedor lb abierta correctamente
2025-04-30 22:32:38,703 - INFO - Listando contenedores
2025-05-01 11:29:31,156 - INFO - Iniciando creación de infraestructura con 4 servidores
2025-05-01 11:29:36,852 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 11:29:37,764 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 11:29:41,373 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 11:29:43,041 - INFO - Bridge creado: lxdbr1
2025-05-01 11:29:43,957 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 11:29:47,538 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 11:29:57,188 - INFO - Contenedor s1 creado con éxito.
2025-05-01 11:29:57,225 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 11:29:57,255 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 11:30:07,300 - INFO - Contenedor s2 creado con éxito.
2025-05-01 11:30:07,342 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-01 11:30:07,375 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-01 11:30:17,421 - INFO - Contenedor s3 creado con éxito.
2025-05-01 11:30:17,512 - INFO - Conectando s3 al bridge lxdbr0 por eth0
2025-05-01 11:30:17,559 - INFO - Contenedor s3 conectado a eth0 con ip 134.3.0.13 
2025-05-01 11:30:27,838 - INFO - Contenedor s4 creado con éxito.
2025-05-01 11:30:27,879 - INFO - Conectando s4 al bridge lxdbr0 por eth0
2025-05-01 11:30:27,928 - INFO - Contenedor s4 conectado a eth0 con ip 134.3.0.14 
2025-05-01 11:30:38,335 - INFO - Contenedor lb creado con éxito.
2025-05-01 11:30:38,425 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 11:30:38,494 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 11:30:38,574 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 11:30:38,627 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 11:30:39,043 - INFO - Contenedor iniciado: lb
2025-05-01 11:31:04,605 - INFO - Contenedor parado: lb
2025-05-01 11:31:14,311 - INFO - Contenedor cl creado con éxito.
2025-05-01 11:31:14,351 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 11:31:14,384 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 11:31:14,824 - INFO - Contenedor iniciado: cl
2025-05-01 11:31:31,962 - INFO - Contenedor parado: cl
2025-05-01 11:31:31,963 - INFO - Número de servidores 4 guardados correctamente
2025-05-01 11:31:31,963 - INFO - Infraestructura creada correctamente.
2025-05-01 11:31:42,670 - INFO - Contenedor iniciado: s1
2025-05-01 11:31:42,922 - INFO - Contenedor iniciado: s2
2025-05-01 11:31:43,229 - INFO - Contenedor iniciado: s3
2025-05-01 11:31:43,547 - INFO - Contenedor iniciado: s4
2025-05-01 11:31:44,227 - INFO - Contenedor iniciado: cl
2025-05-01 11:31:44,968 - INFO - Contenedor iniciado: lb
2025-05-01 11:31:44,968 - INFO - Todos los contenedores han sido iniciados
2025-05-01 11:31:44,972 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 11:31:44,990 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-01 11:31:44,994 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-01 11:31:44,997 - INFO - Consola del contenedor s4 abierta correctamente
2025-05-01 11:31:45,000 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 11:31:45,004 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 11:31:51,338 - INFO - Listando contenedores
2025-05-01 11:48:05,870 - INFO - Eliminando toda la infraestructura
2025-05-01 11:48:05,966 - INFO - Imagen local eliminada con éxito.
2025-05-01 11:48:07,762 - INFO - Contenedor eliminado: s1
2025-05-01 11:48:09,457 - INFO - Contenedor eliminado: s2
2025-05-01 11:48:11,174 - INFO - Contenedor eliminado: s3
2025-05-01 11:48:13,069 - INFO - Contenedor eliminado: s4
2025-05-01 11:48:15,071 - INFO - Contenedor eliminado: cl
2025-05-01 11:48:17,014 - INFO - Contenedor eliminado: lb
2025-05-01 11:48:17,027 - INFO - Bridge eliminado: lxdbr0
2025-05-01 11:48:17,426 - INFO - Bridge eliminado: lxdbr1
2025-05-01 11:48:17,426 - INFO - Eliminación completada.
2025-05-01 11:49:38,865 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 11:49:40,529 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 11:49:40,562 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 11:49:40,621 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 11:49:42,270 - INFO - Bridge creado: lxdbr1
2025-05-01 11:49:43,209 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 11:49:46,752 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 11:49:56,508 - INFO - Contenedor s1 creado con éxito.
2025-05-01 11:49:56,544 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 11:49:56,573 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 11:50:06,565 - INFO - Contenedor lb creado con éxito.
2025-05-01 11:50:06,641 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 11:50:06,678 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 11:50:06,719 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 11:50:06,759 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 11:50:07,270 - INFO - Contenedor iniciado: lb
2025-05-01 11:50:30,623 - INFO - Contenedor parado: lb
2025-05-01 11:50:40,303 - INFO - Contenedor cl creado con éxito.
2025-05-01 11:51:51,452 - INFO - Eliminando toda la infraestructura
2025-05-01 11:51:51,542 - INFO - Imagen local eliminada con éxito.
2025-05-01 11:51:52,339 - INFO - Contenedor eliminado: s1
2025-05-01 11:52:49,524 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 11:52:51,189 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 11:52:51,226 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 11:52:51,294 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 11:52:52,910 - INFO - Bridge creado: lxdbr1
2025-05-01 11:52:53,838 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 11:52:57,478 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 11:53:07,162 - INFO - Contenedor s1 creado con éxito.
2025-05-01 11:53:07,199 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 11:53:07,227 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 11:53:17,353 - INFO - Contenedor lb creado con éxito.
2025-05-01 11:53:17,387 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 11:53:17,415 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 11:53:17,452 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 11:53:17,496 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 11:53:18,078 - INFO - Contenedor iniciado: lb
2025-05-01 11:53:41,343 - INFO - Contenedor parado: lb
2025-05-01 11:53:51,050 - INFO - Contenedor cl creado con éxito.
2025-05-01 11:53:51,086 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 11:53:51,123 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 11:53:51,566 - INFO - Contenedor iniciado: cl
2025-05-01 11:54:36,639 - INFO - Contenedor parado: cl
2025-05-01 11:54:36,640 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 11:54:36,641 - INFO - Infraestructura creada correctamente.
2025-05-01 11:54:59,314 - INFO - Contenedor iniciado: s1
2025-05-01 11:54:59,771 - INFO - Contenedor iniciado: cl
2025-05-01 11:55:00,107 - INFO - Contenedor iniciado: lb
2025-05-01 11:55:00,107 - INFO - Todos los contenedores han sido iniciados
2025-05-01 11:55:00,108 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 11:55:00,109 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 11:55:00,111 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 11:55:05,749 - INFO - Listando contenedores
2025-05-01 12:16:32,841 - INFO - Eliminando toda la infraestructura
2025-05-01 12:16:32,928 - INFO - Imagen local eliminada con éxito.
2025-05-01 12:16:34,705 - INFO - Contenedor eliminado: s1
2025-05-01 12:16:36,675 - INFO - Contenedor eliminado: cl
2025-05-01 12:16:38,875 - INFO - Contenedor eliminado: lb
2025-05-01 12:16:39,193 - INFO - Bridge eliminado: lxdbr1
2025-05-01 12:16:39,193 - INFO - Eliminación completada.
2025-05-01 12:17:13,539 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 12:17:15,286 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 12:17:15,343 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 12:17:15,402 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 12:17:17,015 - INFO - Bridge creado: lxdbr1
2025-05-01 12:17:17,897 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 12:17:21,461 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 12:17:31,153 - INFO - Contenedor s1 creado con éxito.
2025-05-01 12:17:31,191 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 12:17:31,222 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 12:17:31,224 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 12:17:31,224 - INFO - Número de servidores guardados correctamente
2025-05-01 12:17:41,393 - INFO - Contenedor lb creado con éxito.
2025-05-01 12:17:41,428 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 12:17:41,458 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 12:17:41,497 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 12:17:41,534 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 12:17:42,034 - INFO - Contenedor iniciado: lb
2025-05-01 12:18:05,603 - INFO - Contenedor parado: lb
2025-05-01 12:18:15,320 - INFO - Contenedor cl creado con éxito.
2025-05-01 12:18:15,355 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 12:18:15,384 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 12:18:15,777 - INFO - Contenedor iniciado: cl
2025-05-01 12:18:35,659 - INFO - Contenedor parado: cl
2025-05-01 12:18:35,659 - INFO - Infraestructura creada correctamente.
2025-05-01 12:18:41,490 - INFO - Contenedor iniciado: s1
2025-05-01 12:18:41,976 - INFO - Contenedor iniciado: cl
2025-05-01 12:18:42,432 - INFO - Contenedor iniciado: lb
2025-05-01 12:18:42,432 - INFO - Todos los contenedores han sido iniciados
2025-05-01 12:18:42,433 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 12:18:42,439 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 12:18:42,442 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 12:18:48,397 - INFO - Listando contenedores
2025-05-01 12:18:56,981 - INFO - Contenedor parado: s1
2025-05-01 12:19:52,662 - INFO - Contenedor parado: cl
2025-05-01 12:19:57,199 - INFO - Contenedor parado: lb
2025-05-01 12:19:57,199 - INFO - Todos los contenedores han sido parados
2025-05-01 12:20:14,204 - INFO - Listando contenedores
2025-05-01 12:20:26,822 - INFO - Contenedor iniciado: s1
2025-05-01 12:20:27,291 - INFO - Contenedor iniciado: cl
2025-05-01 12:20:27,789 - INFO - Contenedor iniciado: lb
2025-05-01 12:20:27,789 - INFO - Todos los contenedores han sido iniciados
2025-05-01 12:20:27,797 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 12:20:27,798 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 12:20:27,809 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 12:27:50,287 - INFO - Solicitado parar servidor: s1
2025-05-01 12:27:54,575 - INFO - Contenedor parado: s1
2025-05-01 12:27:54,575 - INFO - Servidor s1 detenido correctamente.
2025-05-01 12:29:47,924 - INFO - Solicitado arrancar servidor: s1
2025-05-01 12:29:48,271 - INFO - Contenedor iniciado: s1
2025-05-01 12:29:48,271 - INFO - Servidor s1 corriendo correctamente.
2025-05-01 12:29:53,687 - INFO - Listando contenedores
2025-05-01 12:33:04,245 - INFO - Listando contenedores
2025-05-01 12:37:20,329 - INFO - Solicitado parar servidor: s1
2025-05-01 12:37:24,657 - INFO - Contenedor parado: s1
2025-05-01 12:37:24,657 - INFO - Servidor s1 detenido correctamente.
2025-05-01 12:37:32,900 - INFO - Solicitado arrancar servidor: s1
2025-05-01 12:37:33,224 - INFO - Contenedor iniciado: s1
2025-05-01 12:37:33,224 - INFO - Servidor s1 corriendo correctamente.
2025-05-01 12:37:33,226 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 12:44:07,003 - INFO - Eliminando toda la infraestructura
2025-05-01 12:44:07,168 - INFO - Imagen local eliminada con éxito.
2025-05-01 12:44:08,876 - INFO - Contenedor eliminado: s1
2025-05-01 12:44:10,920 - INFO - Contenedor eliminado: cl
2025-05-01 12:44:12,886 - INFO - Contenedor eliminado: lb
2025-05-01 12:44:13,247 - INFO - Bridge eliminado: lxdbr1
2025-05-01 12:44:13,247 - INFO - Eliminación completada.
2025-05-01 13:02:07,733 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:02:09,414 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:02:09,442 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 13:02:09,505 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 13:02:11,123 - INFO - Bridge creado: lxdbr1
2025-05-01 13:02:12,013 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 13:02:15,582 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 13:02:25,216 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:02:25,256 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:02:25,288 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:02:25,289 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 13:02:25,289 - INFO - Número de servidores guardados correctamente
2025-05-01 13:02:35,180 - INFO - Contenedor lb creado con éxito.
2025-05-01 13:02:35,229 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 13:02:35,266 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 13:02:35,311 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 13:02:35,351 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 13:02:35,750 - INFO - Contenedor iniciado: lb
2025-05-01 13:02:39,570 - INFO - Contenedor parado: lb
2025-05-01 13:02:49,380 - INFO - Contenedor cl creado con éxito.
2025-05-01 13:02:49,419 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 13:02:49,457 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 13:02:49,882 - INFO - Contenedor iniciado: cl
2025-05-01 13:02:53,357 - INFO - Contenedor parado: cl
2025-05-01 13:02:53,357 - INFO - Infraestructura creada correctamente.
2025-05-01 13:03:01,014 - INFO - Contenedor iniciado: s1
2025-05-01 13:03:01,402 - INFO - Contenedor iniciado: cl
2025-05-01 13:03:01,798 - INFO - Contenedor iniciado: lb
2025-05-01 13:03:01,798 - INFO - Todos los contenedores han sido iniciados
2025-05-01 13:03:01,799 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 13:03:01,802 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 13:03:01,808 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 13:03:06,472 - INFO - Listando contenedores
2025-05-01 13:08:49,417 - INFO - Eliminando toda la infraestructura
2025-05-01 13:08:49,495 - INFO - Imagen local eliminada con éxito.
2025-05-01 13:08:51,217 - INFO - Contenedor eliminado: s1
2025-05-01 13:08:53,132 - INFO - Contenedor eliminado: cl
2025-05-01 13:08:55,155 - INFO - Contenedor eliminado: lb
2025-05-01 13:08:55,536 - INFO - Bridge eliminado: lxdbr1
2025-05-01 13:08:55,536 - INFO - Eliminación completada.
2025-05-01 13:09:47,571 - INFO - Listando contenedores
2025-05-01 13:09:50,760 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:09:52,446 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:09:52,474 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 13:09:52,542 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 13:09:54,156 - INFO - Bridge creado: lxdbr1
2025-05-01 13:09:55,014 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 13:09:58,605 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 13:10:08,341 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:10:08,377 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:10:08,405 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:10:08,407 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 13:10:08,407 - INFO - Número de servidores guardados correctamente
2025-05-01 13:10:18,377 - INFO - Contenedor lb creado con éxito.
2025-05-01 13:10:18,427 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 13:10:18,473 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 13:10:18,562 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 13:10:18,605 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 13:10:19,714 - INFO - Contenedor iniciado: lb
2025-05-01 13:15:58,387 - INFO - Eliminando toda la infraestructura
2025-05-01 13:15:58,471 - INFO - Imagen local eliminada con éxito.
2025-05-01 13:15:59,277 - INFO - Contenedor eliminado: s1
2025-05-01 13:16:32,679 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:16:34,346 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:16:34,379 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 13:16:34,442 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 13:16:36,054 - INFO - Bridge creado: lxdbr1
2025-05-01 13:16:36,964 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 13:16:40,502 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 13:16:50,282 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:16:50,317 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:16:50,346 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:16:50,348 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 13:16:50,348 - INFO - Número de servidores guardados correctamente
2025-05-01 13:17:00,738 - INFO - Contenedor lb creado con éxito.
2025-05-01 13:17:00,778 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 13:17:00,809 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 13:17:00,883 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 13:17:00,913 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 13:17:01,370 - INFO - Contenedor iniciado: lb
2025-05-01 13:17:05,070 - INFO - Contenedor parado: lb
2025-05-01 13:17:15,333 - INFO - Contenedor cl creado con éxito.
2025-05-01 13:17:15,372 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 13:17:15,403 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 13:17:15,736 - INFO - Contenedor iniciado: cl
2025-05-01 13:23:57,741 - INFO - Eliminando toda la infraestructura
2025-05-01 13:23:57,822 - INFO - Imagen local eliminada con éxito.
2025-05-01 13:23:58,637 - INFO - Contenedor eliminado: s1
2025-05-01 13:24:00,565 - INFO - Contenedor eliminado: cl
2025-05-01 13:24:01,364 - INFO - Contenedor eliminado: lb
2025-05-01 13:24:01,705 - INFO - Bridge eliminado: lxdbr1
2025-05-01 13:24:01,705 - INFO - Eliminación completada.
2025-05-01 13:24:05,509 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:24:07,194 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:24:07,221 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 13:24:07,281 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 13:24:08,895 - INFO - Bridge creado: lxdbr1
2025-05-01 13:24:09,830 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 13:24:13,357 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 13:24:23,123 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:24:23,170 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:24:23,206 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:24:23,208 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 13:24:23,208 - INFO - Número de servidores guardados correctamente
2025-05-01 13:24:33,743 - INFO - Contenedor lb creado con éxito.
2025-05-01 13:24:33,783 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 13:24:33,811 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 13:24:33,849 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 13:24:33,884 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 13:24:34,328 - INFO - Contenedor iniciado: lb
2025-05-01 13:24:37,986 - INFO - Contenedor parado: lb
2025-05-01 13:24:48,218 - INFO - Contenedor cl creado con éxito.
2025-05-01 13:24:48,251 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 13:24:48,284 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 13:24:48,684 - INFO - Contenedor iniciado: cl
2025-05-01 13:24:52,331 - INFO - Contenedor parado: cl
2025-05-01 13:24:52,331 - INFO - Infraestructura creada correctamente.
2025-05-01 13:24:58,002 - INFO - Contenedor iniciado: s1
2025-05-01 13:24:58,343 - INFO - Contenedor iniciado: cl
2025-05-01 13:24:58,733 - INFO - Contenedor iniciado: lb
2025-05-01 13:24:58,733 - INFO - Todos los contenedores han sido iniciados
2025-05-01 13:24:58,734 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 13:24:58,738 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 13:24:58,744 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 13:25:09,088 - INFO - Listando contenedores
2025-05-01 13:25:22,993 - INFO - Buscando servidor libre para crear...
2025-05-01 13:25:23,035 - INFO - Creando nuevo servidor disponible: s2
2025-05-01 13:25:34,894 - INFO - Contenedor s2 creado con éxito.
2025-05-01 13:25:34,967 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-01 13:25:35,150 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-01 13:25:35,151 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-01 13:25:47,407 - INFO - Listando contenedores
2025-05-01 13:25:56,642 - INFO - Solicitado arrancar servidor: s2
2025-05-01 13:25:57,717 - INFO - Contenedor iniciado: s2
2025-05-01 13:25:57,717 - INFO - Servidor s2 corriendo correctamente.
2025-05-01 13:25:57,719 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-01 13:26:25,450 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:26:25,508 - INFO - Eliminando servidor: s2
2025-05-01 13:26:27,352 - INFO - Contenedor eliminado: s2
2025-05-01 13:26:27,352 - INFO - Servidor s2 eliminado correctamente.
2025-05-01 13:26:51,906 - INFO - Listando contenedores
2025-05-01 13:27:00,094 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:27:00,154 - INFO - Eliminando servidor: s1
2025-05-01 13:27:01,914 - INFO - Contenedor eliminado: s1
2025-05-01 13:27:01,914 - INFO - Servidor s1 eliminado correctamente.
2025-05-01 13:27:05,697 - INFO - Listando contenedores
2025-05-01 13:27:12,231 - INFO - Buscando servidor libre para crear...
2025-05-01 13:27:12,252 - INFO - Creando nuevo servidor disponible: s1
2025-05-01 13:27:22,165 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:27:22,205 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:27:22,235 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:27:22,235 - INFO - Servidor s1 creado correctamente con IP 134.3.0.11 
2025-05-01 13:27:44,456 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:27:44,520 - INFO - Eliminando servidor: s1
2025-05-01 13:27:45,346 - INFO - Contenedor eliminado: s1
2025-05-01 13:27:45,346 - INFO - Servidor s1 eliminado correctamente.
2025-05-01 13:27:46,688 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:27:46,751 - WARNING - No hay servidores creados. No se puede eliminar ninguno.
2025-05-01 13:27:50,182 - INFO - Buscando servidor libre para crear...
2025-05-01 13:27:50,195 - INFO - Creando nuevo servidor disponible: s1
2025-05-01 13:27:59,965 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:28:00,040 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:28:00,081 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:28:00,081 - INFO - Servidor s1 creado correctamente con IP 134.3.0.11 
2025-05-01 13:28:01,326 - INFO - Buscando servidor libre para crear...
2025-05-01 13:28:01,351 - INFO - Creando nuevo servidor disponible: s2
2025-05-01 13:28:11,112 - INFO - Contenedor s2 creado con éxito.
2025-05-01 13:28:11,151 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-01 13:28:11,186 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-01 13:28:11,187 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-01 13:28:12,800 - INFO - Buscando servidor libre para crear...
2025-05-01 13:28:12,842 - INFO - Creando nuevo servidor disponible: s3
2025-05-01 13:28:22,796 - INFO - Contenedor s3 creado con éxito.
2025-05-01 13:28:22,840 - INFO - Conectando s3 al bridge lxdbr0 por eth0
2025-05-01 13:28:22,871 - INFO - Contenedor s3 conectado a eth0 con ip 134.3.0.13 
2025-05-01 13:28:22,871 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-01 13:28:28,615 - INFO - Buscando servidor libre para crear...
2025-05-01 13:28:28,682 - INFO - Creando nuevo servidor disponible: s4
2025-05-01 13:28:38,589 - INFO - Contenedor s4 creado con éxito.
2025-05-01 13:28:38,628 - INFO - Conectando s4 al bridge lxdbr0 por eth0
2025-05-01 13:28:38,659 - INFO - Contenedor s4 conectado a eth0 con ip 134.3.0.14 
2025-05-01 13:28:38,659 - INFO - Servidor s4 creado correctamente con IP 134.3.0.14 
2025-05-01 13:28:40,886 - INFO - Buscando servidor libre para crear...
2025-05-01 13:28:40,963 - INFO - Creando nuevo servidor disponible: s5
2025-05-01 13:28:51,933 - INFO - Contenedor s5 creado con éxito.
2025-05-01 13:28:51,981 - INFO - Conectando s5 al bridge lxdbr0 por eth0
2025-05-01 13:28:52,018 - INFO - Contenedor s5 conectado a eth0 con ip 134.3.0.15 
2025-05-01 13:28:52,018 - INFO - Servidor s5 creado correctamente con IP 134.3.0.15 
2025-05-01 13:28:52,951 - INFO - Buscando servidor libre para crear...
2025-05-01 13:28:53,024 - WARNING - Ya existen 5  servidores. No se puede crear más.
2025-05-01 13:32:16,282 - INFO - Buscando servidor libre para crear...
2025-05-01 13:32:16,355 - WARNING - Ya existen 5  servidores. No se puede crear más.
2025-05-01 13:32:30,484 - INFO - Listando contenedores
2025-05-01 13:32:34,647 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:34,666 - INFO - Eliminando servidor: s5
2025-05-01 13:32:35,469 - INFO - Contenedor eliminado: s5
2025-05-01 13:32:35,469 - INFO - Servidor s5 eliminado correctamente.
2025-05-01 13:32:36,401 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:36,426 - INFO - Eliminando servidor: s4
2025-05-01 13:32:37,218 - INFO - Contenedor eliminado: s4
2025-05-01 13:32:37,218 - INFO - Servidor s4 eliminado correctamente.
2025-05-01 13:32:38,140 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:38,180 - INFO - Eliminando servidor: s3
2025-05-01 13:32:38,932 - INFO - Contenedor eliminado: s3
2025-05-01 13:32:38,932 - INFO - Servidor s3 eliminado correctamente.
2025-05-01 13:32:39,840 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:39,893 - INFO - Eliminando servidor: s2
2025-05-01 13:32:40,694 - INFO - Contenedor eliminado: s2
2025-05-01 13:32:40,694 - INFO - Servidor s2 eliminado correctamente.
2025-05-01 13:32:41,504 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:41,570 - INFO - Eliminando servidor: s1
2025-05-01 13:32:42,417 - INFO - Contenedor eliminado: s1
2025-05-01 13:32:42,417 - INFO - Servidor s1 eliminado correctamente.
2025-05-01 13:32:44,483 - INFO - Buscando último servidor para eliminar...
2025-05-01 13:32:44,538 - WARNING - No hay servidores creados. No se puede eliminar ninguno.
2025-05-01 13:36:26,975 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:36:32,055 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:48:57,558 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-01 13:48:59,226 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-01 13:49:00,842 - INFO - Bridge creado: lxdbr0
2025-05-01 13:49:01,730 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-01 13:49:05,087 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-01 13:49:06,703 - INFO - Bridge creado: lxdbr1
2025-05-01 13:49:07,561 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-01 13:49:10,986 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-01 13:49:20,647 - INFO - Contenedor s1 creado con éxito.
2025-05-01 13:49:20,681 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-01 13:49:20,709 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-01 13:49:20,710 - INFO - Número de servidores 1 guardados correctamente
2025-05-01 13:49:20,711 - INFO - Número de servidores guardados correctamente
2025-05-01 13:49:30,619 - INFO - Contenedor lb creado con éxito.
2025-05-01 13:49:30,651 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-01 13:49:30,682 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-01 13:49:30,721 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-01 13:49:30,751 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-01 13:49:31,104 - INFO - Contenedor iniciado: lb
2025-05-01 13:49:35,017 - INFO - Contenedor parado: lb
2025-05-01 13:49:45,055 - INFO - Contenedor cl creado con éxito.
2025-05-01 13:49:45,095 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-01 13:49:45,129 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-01 13:49:45,508 - INFO - Contenedor iniciado: cl
2025-05-01 13:49:48,431 - INFO - Contenedor parado: cl
2025-05-01 13:49:48,431 - INFO - Infraestructura creada correctamente.
2025-05-01 13:49:55,669 - INFO - Contenedor iniciado: s1
2025-05-01 13:49:55,924 - INFO - Contenedor iniciado: cl
2025-05-01 13:49:56,310 - INFO - Contenedor iniciado: lb
2025-05-01 13:49:56,310 - INFO - Todos los contenedores han sido iniciados
2025-05-01 13:49:56,316 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-01 13:49:56,319 - INFO - Consola del contenedor cl abierta correctamente
2025-05-01 13:49:56,338 - INFO - Consola del contenedor lb abierta correctamente
2025-05-01 13:50:00,724 - INFO - Listando contenedores
2025-05-04 11:21:02,028 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-04 11:21:07,805 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-04 11:21:08,669 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-04 11:21:12,110 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-04 11:21:13,763 - INFO - Bridge creado: lxdbr1
2025-05-04 11:21:14,597 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-04 11:21:18,126 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-04 11:21:27,890 - INFO - Contenedor s1 creado con éxito.
2025-05-04 11:21:27,942 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-04 11:21:27,975 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-04 11:21:37,818 - INFO - Contenedor s2 creado con éxito.
2025-05-04 11:21:37,866 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-04 11:21:37,894 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-04 11:21:37,896 - INFO - Número de servidores 2 guardados correctamente
2025-05-04 11:21:37,896 - INFO - Número de servidores guardados correctamente
2025-05-04 11:21:48,422 - INFO - Contenedor lb creado con éxito.
2025-05-04 11:21:48,471 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-04 11:21:48,518 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-04 11:21:48,597 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-04 11:21:48,626 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-04 11:21:49,042 - INFO - Contenedor iniciado: lb
2025-05-04 11:21:52,615 - INFO - Contenedor parado: lb
2025-05-04 11:22:02,527 - INFO - Contenedor cl creado con éxito.
2025-05-04 11:22:02,570 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-04 11:22:02,604 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-04 11:22:03,261 - INFO - Contenedor iniciado: cl
2025-05-04 11:22:06,817 - INFO - Contenedor parado: cl
2025-05-04 11:22:06,817 - INFO - Infraestructura creada correctamente.
2025-05-04 11:22:14,236 - INFO - Listando contenedores
2025-05-04 11:22:18,055 - INFO - Contenedor iniciado: s1
2025-05-04 11:22:18,326 - INFO - Contenedor iniciado: s2
2025-05-04 11:22:18,752 - INFO - Contenedor iniciado: cl
2025-05-04 11:22:19,197 - INFO - Contenedor iniciado: lb
2025-05-04 11:22:19,197 - INFO - Todos los contenedores han sido iniciados
2025-05-04 11:22:19,206 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 11:22:19,207 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 11:22:19,212 - INFO - Consola del contenedor cl abierta correctamente
2025-05-04 11:22:19,214 - INFO - Consola del contenedor lb abierta correctamente
2025-05-04 11:22:23,342 - INFO - Listando contenedores
2025-05-04 11:24:24,162 - INFO - Contenedor parado: s1
2025-05-04 11:24:28,452 - INFO - Contenedor parado: s2
2025-05-04 11:24:32,867 - INFO - Contenedor parado: cl
2025-05-04 11:24:37,337 - INFO - Contenedor parado: lb
2025-05-04 11:24:37,337 - INFO - Todos los contenedores han sido parados
2025-05-04 11:24:37,378 - INFO - Consolas cerradas correctamente
2025-05-04 11:24:44,913 - INFO - Listando contenedores
2025-05-04 11:24:54,688 - INFO - Contenedor iniciado: s1
2025-05-04 11:24:54,954 - INFO - Contenedor iniciado: s2
2025-05-04 11:24:55,399 - INFO - Contenedor iniciado: cl
2025-05-04 11:24:55,881 - INFO - Contenedor iniciado: lb
2025-05-04 11:24:55,881 - INFO - Todos los contenedores han sido iniciados
2025-05-04 11:24:55,882 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 11:24:55,882 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 11:24:55,885 - INFO - Consola del contenedor cl abierta correctamente
2025-05-04 11:24:55,888 - INFO - Consola del contenedor lb abierta correctamente
2025-05-04 12:09:40,258 - INFO - Listando contenedores
2025-05-04 12:09:49,808 - INFO - Buscando servidor libre para crear...
2025-05-04 12:09:49,859 - INFO - Creando nuevo servidor disponible: s3
2025-05-04 12:09:59,718 - INFO - Contenedor s3 creado con éxito.
2025-05-04 12:09:59,836 - INFO - Conectando s3 al bridge lxdbr0 por eth0
2025-05-04 12:09:59,864 - INFO - Contenedor s3 conectado a eth0 con ip 134.3.0.13 
2025-05-04 12:09:59,864 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-04 12:10:03,079 - INFO - Listando contenedores
2025-05-04 12:10:13,029 - INFO - Solicitado arrancar servidor: s3
2025-05-04 12:10:13,436 - INFO - Contenedor iniciado: s3
2025-05-04 12:10:13,436 - INFO - Servidor s3 corriendo correctamente.
2025-05-04 12:10:13,438 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-04 12:10:16,700 - INFO - Listando contenedores
2025-05-04 12:10:30,920 - INFO - Eliminando toda la infraestructura
2025-05-04 12:10:31,004 - INFO - Imagen local eliminada con éxito.
2025-05-04 12:10:33,058 - INFO - Contenedor eliminado: s1
2025-05-04 12:10:35,084 - INFO - Contenedor eliminado: s2
2025-05-04 12:10:37,065 - INFO - Contenedor eliminado: cl
2025-05-04 12:10:38,990 - INFO - Contenedor eliminado: lb
2025-05-04 12:10:39,333 - INFO - Bridge eliminado: lxdbr1
2025-05-04 12:10:39,333 - INFO - Eliminación completada.
2025-05-04 12:13:21,476 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-04 12:13:23,559 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-04 12:13:23,597 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-04 12:13:23,660 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-04 12:13:25,268 - INFO - Bridge creado: lxdbr1
2025-05-04 12:13:26,146 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-04 12:13:29,661 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-04 12:13:39,419 - INFO - Contenedor s1 creado con éxito.
2025-05-04 12:13:39,469 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-04 12:13:39,504 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-04 12:13:39,505 - INFO - Número de servidores 1 guardados correctamente
2025-05-04 12:13:39,505 - INFO - Número de servidores guardados correctamente
2025-05-04 12:13:49,503 - INFO - Contenedor lb creado con éxito.
2025-05-04 12:13:49,556 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-04 12:13:49,589 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-04 12:13:49,644 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-04 12:13:49,680 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-04 12:13:50,206 - INFO - Contenedor iniciado: lb
2025-05-04 12:13:52,356 - INFO - Configuración de red aplicada en el contenedor lb.
2025-05-04 12:13:53,837 - INFO - Contenedor parado: lb
2025-05-04 12:14:03,759 - INFO - Contenedor cl creado con éxito.
2025-05-04 12:14:03,806 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-04 12:14:03,839 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-04 12:14:04,392 - INFO - Contenedor iniciado: cl
2025-05-04 12:14:06,440 - INFO - Configuración de red aplicada en el contenedor cl.
2025-05-04 12:14:07,863 - INFO - Contenedor parado: cl
2025-05-04 12:14:07,863 - INFO - Infraestructura creada correctamente.
2025-05-04 12:17:00,214 - INFO - Contenedor iniciado: s1
2025-05-04 12:17:00,621 - INFO - Contenedor iniciado: cl
2025-05-04 12:17:01,056 - INFO - Contenedor iniciado: lb
2025-05-04 12:17:01,056 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-04 12:17:01,057 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 12:17:01,058 - INFO - Consola del contenedor cl abierta correctamente
2025-05-04 12:17:01,062 - INFO - Consola del contenedor lb abierta correctamente
2025-05-04 12:17:04,944 - INFO - Listando contenedores
2025-05-04 12:17:11,718 - INFO - Buscando servidor libre para crear...
2025-05-04 12:17:11,753 - INFO - Creando nuevo servidor disponible: s2
2025-05-04 12:17:24,806 - INFO - Contenedor s2 creado con éxito.
2025-05-04 12:17:24,919 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-04 12:17:24,960 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-04 12:17:24,960 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-04 12:20:29,437 - INFO - Solicitado arrancar servidor: s2
2025-05-04 12:20:29,764 - INFO - Contenedor iniciado: s2
2025-05-04 12:20:29,765 - INFO - Servidor s2 corriendo correctamente.
2025-05-04 12:20:29,767 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 12:20:33,474 - INFO - Listando contenedores
2025-05-04 12:20:41,009 - INFO - Eliminando toda la infraestructura
2025-05-04 12:20:41,100 - INFO - Imagen local eliminada con éxito.
2025-05-04 12:20:43,238 - INFO - Contenedor eliminado: s1
2025-05-04 12:20:45,301 - INFO - Contenedor eliminado: cl
2025-05-04 12:20:47,374 - INFO - Contenedor eliminado: lb
2025-05-04 12:20:47,669 - INFO - Bridge eliminado: lxdbr1
2025-05-04 12:20:47,669 - INFO - Eliminación completada.
2025-05-04 12:22:12,059 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-04 12:22:13,781 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-04 12:22:13,810 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-04 12:22:13,877 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-04 12:22:15,551 - INFO - Bridge creado: lxdbr1
2025-05-04 12:22:16,464 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-04 12:22:19,981 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-04 12:22:29,752 - INFO - Contenedor s1 creado con éxito.
2025-05-04 12:22:29,811 - INFO - Conectando s1 al bridge lxdbr0 por eth0
2025-05-04 12:22:29,837 - INFO - Contenedor s1 conectado a eth0 con ip 134.3.0.11 
2025-05-04 12:22:29,839 - INFO - Número de servidores 1 guardados correctamente
2025-05-04 12:22:29,839 - INFO - Número de servidores guardados correctamente
2025-05-04 12:22:39,768 - INFO - Contenedor lb creado con éxito.
2025-05-04 12:22:39,822 - INFO - Conectando lb al bridge lxdbr0 por eth0
2025-05-04 12:22:39,855 - INFO - Contenedor lb conectado a eth0 con ip 134.3.0.10 
2025-05-04 12:22:39,908 - INFO - Conectando lb al bridge lxdbr1 por eth1
2025-05-04 12:22:39,948 - INFO - Contenedor lb conectado a eth1 con ip 134.3.1.10 
2025-05-04 12:22:40,517 - INFO - Contenedor iniciado: lb
2025-05-04 12:22:42,579 - INFO - Configuración de red aplicada en el contenedor lb.
2025-05-04 12:22:44,020 - INFO - Contenedor parado: lb
2025-05-04 12:22:53,896 - INFO - Contenedor cl creado con éxito.
2025-05-04 12:22:53,943 - INFO - Conectando cl al bridge lxdbr1 por eth1
2025-05-04 12:22:53,973 - INFO - Contenedor cl conectado a eth1 con ip 134.3.1.11 
2025-05-04 12:22:54,477 - INFO - Contenedor iniciado: cl
2025-05-04 12:22:56,693 - INFO - Configuración de red aplicada en el contenedor cl.
2025-05-04 12:22:59,353 - INFO - Contenedor parado: cl
2025-05-04 12:22:59,353 - INFO - Infraestructura creada correctamente.
2025-05-04 12:23:03,294 - INFO - Buscando servidor libre para crear...
2025-05-04 12:23:03,319 - INFO - Creando nuevo servidor disponible: s2
2025-05-04 12:23:13,249 - INFO - Contenedor s2 creado con éxito.
2025-05-04 12:23:13,358 - INFO - Conectando s2 al bridge lxdbr0 por eth0
2025-05-04 12:23:13,573 - INFO - Contenedor s2 conectado a eth0 con ip 134.3.0.12 
2025-05-04 12:23:13,573 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-04 12:23:13,576 - INFO - Número de servidores 2 guardados correctamente
2025-05-04 12:23:19,528 - INFO - Contenedor iniciado: s1
2025-05-04 12:23:19,800 - INFO - Contenedor iniciado: s2
2025-05-04 12:23:20,208 - INFO - Contenedor iniciado: cl
2025-05-04 12:23:20,655 - INFO - Contenedor iniciado: lb
2025-05-04 12:23:20,655 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-04 12:23:20,656 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 12:23:20,657 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 12:23:20,658 - INFO - Consola del contenedor cl abierta correctamente
2025-05-04 12:23:20,664 - INFO - Consola del contenedor lb abierta correctamente
2025-05-04 12:23:30,182 - INFO - Listando contenedores
2025-05-04 12:23:49,682 - INFO - Contenedor parado: s1
2025-05-04 12:23:51,949 - INFO - Contenedor parado: s2
2025-05-04 12:23:54,921 - INFO - Contenedor parado: cl
2025-05-04 12:23:56,724 - INFO - Contenedor parado: lb
2025-05-04 12:23:56,724 - INFO - Todos los contenedores han sido parados
2025-05-04 12:23:56,768 - INFO - Consolas cerradas correctamente
2025-05-04 12:24:01,884 - INFO - Solicitado arrancar servidor: s1
2025-05-04 12:24:02,228 - INFO - Contenedor iniciado: s1
2025-05-04 12:24:02,228 - INFO - Servidor s1 corriendo correctamente.
2025-05-04 12:24:02,230 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 12:24:05,399 - INFO - Solicitado arrancar servidor: s2
2025-05-04 12:24:05,659 - INFO - Contenedor iniciado: s2
2025-05-04 12:24:05,659 - INFO - Servidor s2 corriendo correctamente.
2025-05-04 12:24:05,660 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 12:24:14,088 - INFO - Solicitado parar servidor: s1
2025-05-04 12:24:15,784 - INFO - Contenedor parado: s1
2025-05-04 12:24:15,784 - INFO - Servidor s1 detenido correctamente.
2025-05-04 12:24:23,762 - INFO - Listando contenedores
2025-05-04 12:24:36,989 - INFO - Buscando último servidor para eliminar...
2025-05-04 12:24:37,042 - INFO - Eliminando servidor: s2
2025-05-04 12:24:38,801 - INFO - Contenedor eliminado: s2
2025-05-04 12:24:38,801 - INFO - Servidor s2 eliminado correctamente.
2025-05-04 12:24:38,803 - INFO - Número de servidores 1 guardados correctamente
2025-05-04 12:24:45,517 - INFO - Eliminando toda la infraestructura
2025-05-04 12:24:45,593 - INFO - Imagen local eliminada con éxito.
2025-05-04 12:24:46,531 - INFO - Contenedor eliminado: s1
2025-05-04 12:24:47,341 - INFO - Contenedor eliminado: cl
2025-05-04 12:24:48,167 - INFO - Contenedor eliminado: lb
2025-05-04 12:24:48,578 - INFO - Bridge eliminado: lxdbr1
2025-05-04 12:24:48,578 - INFO - Eliminación completada.
2025-05-04 20:07:46,052 - INFO - Orden recibida: create
2025-05-04 20:07:46,052 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-04 20:07:46,052 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-04 20:07:46,053 - DEBUG - Parámetro recibido n_servers=2
2025-05-04 20:07:46,053 - DEBUG - Creando imagen base...
2025-05-04 20:07:46,053 - DEBUG - Verificando si la imagen ya está importada...
2025-05-04 20:07:46,071 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-04 20:07:47,827 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-04 20:07:47,827 - DEBUG - Configurando y creando bridges...
2025-05-04 20:07:47,866 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-04 20:07:47,932 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-04 20:07:47,932 - DEBUG - Creando bridge lxdbr1
2025-05-04 20:07:49,565 - INFO - Bridge creado: lxdbr1
2025-05-04 20:07:50,496 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-04 20:07:54,156 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-04 20:07:54,157 - DEBUG - Creando contenedores de servidores...
2025-05-04 20:07:54,157 - DEBUG - Intentando crear el contenedor s1
2025-05-04 20:08:03,954 - INFO - Contenedor s1 creado con éxito.
2025-05-04 20:08:03,954 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-04 20:08:04,004 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-04 20:08:04,004 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-04 20:08:04,033 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-04 20:08:04,033 - DEBUG - Intentando crear el contenedor s2
2025-05-04 20:08:14,446 - INFO - Contenedor s2 creado con éxito.
2025-05-04 20:08:14,446 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-04 20:08:14,493 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-04 20:08:14,493 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-04 20:08:14,573 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-04 20:08:14,573 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-04 20:08:14,576 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-04 20:08:14,576 - INFO - Número de servidores guardados correctamente
2025-05-04 20:08:14,576 - DEBUG - Creando balanceador...
2025-05-04 20:08:14,576 - DEBUG - Intentando crear el contenedor lb
2025-05-04 20:08:24,504 - INFO - Contenedor lb creado con éxito.
2025-05-04 20:08:24,504 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-04 20:08:24,561 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-04 20:08:24,561 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-04 20:08:24,605 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-04 20:08:24,605 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-04 20:08:24,660 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-04 20:08:24,660 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-04 20:08:24,690 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-04 20:08:24,690 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-04 20:08:25,134 - INFO - Contenedor iniciado: lb
2025-05-04 20:08:25,134 - DEBUG - Iniciando cambio de netplan en lb
2025-05-04 20:08:25,134 - DEBUG - Desactivando cloud-init en lb
2025-05-04 20:08:25,195 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-04 20:08:25,257 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-04 20:08:25,257 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-04 20:08:25,305 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-04 20:08:27,238 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-04 20:08:27,238 - DEBUG - Verificando estado antes de detener lb
2025-05-04 20:08:28,689 - INFO - Contenedor parado: lb
2025-05-04 20:08:28,689 - INFO - Balanceador configurado correctamente
2025-05-04 20:08:28,689 - DEBUG - Creando cliente...
2025-05-04 20:08:28,689 - DEBUG - Intentando crear el contenedor cl
2025-05-04 20:08:39,497 - INFO - Contenedor cl creado con éxito.
2025-05-04 20:08:39,498 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-04 20:08:39,650 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-04 20:08:39,651 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-04 20:08:39,774 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-04 20:08:39,774 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-04 20:08:40,170 - INFO - Contenedor iniciado: cl
2025-05-04 20:08:40,170 - DEBUG - Iniciando cambio de netplan en cl
2025-05-04 20:08:40,170 - DEBUG - Desactivando cloud-init en cl
2025-05-04 20:08:40,220 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-04 20:08:40,301 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-04 20:08:40,301 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-04 20:08:40,353 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-04 20:08:44,756 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-04 20:08:44,756 - DEBUG - Verificando estado antes de detener cl
2025-05-04 20:08:47,338 - INFO - Contenedor parado: cl
2025-05-04 20:08:47,338 - INFO - Cliente configurado correctamente
2025-05-04 20:08:47,338 - INFO - Infraestructura creada correctamente.
2025-05-04 20:10:01,426 - INFO - Orden recibida: list
2025-05-04 20:10:01,426 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-04 20:10:01,427 - INFO - Número de servidores 2 cargados correctamente.
2025-05-04 20:10:01,427 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-04 20:10:01,427 - INFO - Listando contenedores
2025-05-04 20:10:01,452 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-04 20:10:07,965 - INFO - Orden recibida: start
2025-05-04 20:10:07,965 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-04 20:10:07,966 - INFO - Número de servidores 2 cargados correctamente.
2025-05-04 20:10:07,966 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-04 20:10:07,966 - INFO - Iniciando todos los contenedores
2025-05-04 20:10:07,966 - DEBUG - Arrancando servidor: s1
2025-05-04 20:10:07,966 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-04 20:10:08,297 - INFO - Contenedor iniciado: s1
2025-05-04 20:10:08,298 - DEBUG - Arrancando servidor: s2
2025-05-04 20:10:08,298 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-04 20:10:08,597 - INFO - Contenedor iniciado: s2
2025-05-04 20:10:08,598 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-04 20:10:08,949 - INFO - Contenedor iniciado: cl
2025-05-04 20:10:08,949 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-04 20:10:09,401 - INFO - Contenedor iniciado: lb
2025-05-04 20:10:09,401 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-04 20:10:09,403 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-04 20:10:09,405 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-04 20:10:09,407 - INFO - Consola del contenedor cl abierta correctamente
2025-05-04 20:10:09,410 - INFO - Consola del contenedor lb abierta correctamente
2025-05-04 20:10:13,663 - INFO - Orden recibida: list
2025-05-04 20:10:13,663 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-04 20:10:13,663 - INFO - Número de servidores 2 cargados correctamente.
2025-05-04 20:10:13,663 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-04 20:10:13,663 - INFO - Listando contenedores
2025-05-04 20:10:13,687 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-04 20:10:55,121 - INFO - Orden recibida: delete
2025-05-04 20:10:55,121 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-04 20:10:55,121 - INFO - Número de servidores 2 cargados correctamente.
2025-05-04 20:10:55,121 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-04 20:10:55,121 - INFO - Eliminando toda la infraestructura
2025-05-04 20:10:55,121 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-04 20:10:55,195 - INFO - Imagen local eliminada con éxito.
2025-05-04 20:10:55,195 - DEBUG - Eliminando contenedor s1
2025-05-04 20:10:57,294 - INFO - Contenedor eliminado: s1
2025-05-04 20:10:57,295 - DEBUG - Eliminando contenedor s2
2025-05-04 20:10:59,159 - INFO - Contenedor eliminado: s2
2025-05-04 20:10:59,159 - DEBUG - Eliminando contenedor cl
2025-05-04 20:11:01,172 - INFO - Contenedor eliminado: cl
2025-05-04 20:11:01,172 - DEBUG - Eliminando contenedor lb
2025-05-04 20:11:03,199 - INFO - Contenedor eliminado: lb
2025-05-04 20:11:03,199 - DEBUG - Contenedores eliminados correctamente
2025-05-04 20:11:03,199 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-04 20:11:03,591 - INFO - Bridge eliminado: lxdbr1
2025-05-04 20:11:03,591 - INFO - Eliminación completada.
2025-05-06 10:48:18,932 - INFO - Orden recibida: create
2025-05-06 10:48:18,932 - INFO - Número de servidores especificado: 1
2025-05-06 10:48:18,932 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-06 10:48:18,932 - DEBUG - Parámetro recibido n_servers=1
2025-05-06 10:48:18,933 - DEBUG - Creando imagen base...
2025-05-06 10:48:18,933 - DEBUG - Verificando si la imagen ya está importada...
2025-05-06 10:48:18,953 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-06 10:48:24,471 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-06 10:48:24,471 - DEBUG - Configurando y creando bridges...
2025-05-06 10:48:25,348 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-06 10:48:28,817 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-06 10:48:28,817 - DEBUG - Creando bridge lxdbr1
2025-05-06 10:48:30,427 - INFO - Bridge creado: lxdbr1
2025-05-06 10:48:31,321 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-06 10:48:34,839 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-06 10:48:34,839 - DEBUG - Creando contenedores de servidores...
2025-05-06 10:48:34,839 - DEBUG - Intentando crear el contenedor s1
2025-05-06 10:48:41,877 - INFO - Contenedor s1 creado con éxito.
2025-05-06 10:48:41,878 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-06 10:48:41,918 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-06 10:48:41,918 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-06 10:48:41,940 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-06 10:48:41,940 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-06 10:48:41,941 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-06 10:48:41,941 - INFO - Número de servidores guardados correctamente
2025-05-06 10:48:41,941 - DEBUG - Creando balanceador...
2025-05-06 10:48:41,941 - DEBUG - Intentando crear el contenedor lb
2025-05-06 10:48:48,985 - INFO - Contenedor lb creado con éxito.
2025-05-06 10:48:48,985 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-06 10:48:49,023 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-06 10:48:49,023 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-06 10:48:49,044 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-06 10:48:49,044 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-06 10:48:49,085 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-06 10:48:49,085 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-06 10:48:49,111 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-06 10:48:49,111 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 10:48:49,577 - INFO - Contenedor iniciado: lb
2025-05-06 10:48:49,577 - DEBUG - Iniciando cambio de netplan en lb
2025-05-06 10:48:49,577 - DEBUG - Desactivando cloud-init en lb
2025-05-06 10:48:49,657 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-06 10:48:49,702 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-06 10:48:49,702 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-06 10:48:49,723 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-06 10:48:51,223 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-06 10:48:51,223 - DEBUG - Verificando estado antes de detener lb
2025-05-06 10:48:52,579 - INFO - Contenedor parado: lb
2025-05-06 10:48:52,579 - INFO - Balanceador configurado correctamente
2025-05-06 10:48:52,579 - DEBUG - Creando cliente...
2025-05-06 10:48:52,579 - DEBUG - Intentando crear el contenedor cl
2025-05-06 10:48:59,785 - INFO - Contenedor cl creado con éxito.
2025-05-06 10:48:59,785 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-06 10:48:59,822 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-06 10:48:59,822 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-06 10:48:59,846 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-06 10:48:59,846 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 10:49:00,308 - INFO - Contenedor iniciado: cl
2025-05-06 10:49:00,309 - DEBUG - Iniciando cambio de netplan en cl
2025-05-06 10:49:00,309 - DEBUG - Desactivando cloud-init en cl
2025-05-06 10:49:00,359 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-06 10:49:00,387 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-06 10:49:00,387 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-06 10:49:00,408 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-06 10:49:01,970 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-06 10:49:01,970 - DEBUG - Verificando estado antes de detener cl
2025-05-06 10:49:03,360 - INFO - Contenedor parado: cl
2025-05-06 10:49:03,360 - INFO - Cliente configurado correctamente
2025-05-06 10:49:03,360 - INFO - Infraestructura creada correctamente.
2025-05-06 10:49:08,964 - INFO - Orden recibida: list
2025-05-06 10:49:08,964 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 10:49:08,965 - INFO - Número de servidores 1 cargados correctamente.
2025-05-06 10:49:08,966 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-06 10:49:08,966 - INFO - Listando contenedores
2025-05-06 10:49:08,989 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-06 10:49:12,561 - INFO - Orden recibida: start
2025-05-06 10:49:12,561 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 10:49:12,562 - INFO - Número de servidores 1 cargados correctamente.
2025-05-06 10:49:12,562 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-06 10:49:12,562 - INFO - Iniciando todos los contenedores
2025-05-06 10:49:12,562 - DEBUG - Arrancando servidor: s1
2025-05-06 10:49:12,562 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-06 10:49:12,869 - INFO - Contenedor iniciado: s1
2025-05-06 10:49:12,870 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 10:49:13,220 - INFO - Contenedor iniciado: cl
2025-05-06 10:49:13,220 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 10:49:13,594 - INFO - Contenedor iniciado: lb
2025-05-06 10:49:13,594 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-06 10:49:13,597 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-06 10:49:13,598 - INFO - Consola del contenedor cl abierta correctamente
2025-05-06 10:49:13,599 - INFO - Consola del contenedor lb abierta correctamente
2025-05-06 10:49:17,689 - INFO - Orden recibida: list
2025-05-06 10:49:17,689 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 10:49:17,689 - INFO - Número de servidores 1 cargados correctamente.
2025-05-06 10:49:17,689 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-06 10:49:17,689 - INFO - Listando contenedores
2025-05-06 10:49:17,707 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-06 10:52:41,666 - INFO - Orden recibida: create_server
2025-05-06 10:52:41,666 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 10:52:41,667 - INFO - Número de servidores 1 cargados correctamente.
2025-05-06 10:52:41,667 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-06 10:52:41,667 - INFO - Buscando servidor libre para crear...
2025-05-06 10:52:41,667 - DEBUG - Verificando si existe el contenedor s1
2025-05-06 10:52:41,692 - DEBUG - Verificando si existe el contenedor s2
2025-05-06 10:52:41,710 - INFO - Creando nuevo servidor disponible: s2
2025-05-06 10:52:41,710 - DEBUG - Intentando crear el contenedor s2
2025-05-06 10:52:48,749 - INFO - Contenedor s2 creado con éxito.
2025-05-06 10:52:48,749 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-06 10:52:48,788 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-06 10:52:48,788 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-06 10:52:48,809 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-06 10:52:48,809 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-06 10:52:48,809 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-06 10:52:48,810 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-06 10:52:48,810 - INFO - Nuevo número de servidores: 2
2025-05-06 10:53:06,003 - INFO - Orden recibida: delete
2025-05-06 10:53:06,003 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 10:53:06,004 - INFO - Número de servidores 2 cargados correctamente.
2025-05-06 10:53:06,004 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-06 10:53:06,004 - INFO - Eliminando toda la infraestructura
2025-05-06 10:53:06,004 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-06 10:53:06,060 - INFO - Imagen local eliminada con éxito.
2025-05-06 10:53:06,060 - DEBUG - Eliminando contenedor s1
2025-05-06 10:53:07,761 - INFO - Contenedor eliminado: s1
2025-05-06 10:53:07,761 - DEBUG - Eliminando contenedor s2
2025-05-06 10:53:08,425 - INFO - Contenedor eliminado: s2
2025-05-06 10:53:08,425 - DEBUG - Eliminando contenedor cl
2025-05-06 10:53:10,227 - INFO - Contenedor eliminado: cl
2025-05-06 10:53:10,227 - DEBUG - Eliminando contenedor lb
2025-05-06 10:53:11,998 - INFO - Contenedor eliminado: lb
2025-05-06 10:53:11,998 - DEBUG - Contenedores eliminados correctamente
2025-05-06 10:53:11,998 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-06 10:53:12,355 - INFO - Bridge eliminado: lxdbr1
2025-05-06 10:53:12,356 - INFO - Eliminación completada.
2025-05-06 10:53:15,778 - INFO - Orden recibida: create
2025-05-06 10:53:15,778 - INFO - Número de servidores especificado: 1
2025-05-06 10:53:15,778 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-06 10:53:15,778 - DEBUG - Parámetro recibido n_servers=1
2025-05-06 10:53:15,778 - DEBUG - Creando imagen base...
2025-05-06 10:53:15,778 - DEBUG - Verificando si la imagen ya está importada...
2025-05-06 10:53:15,788 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-06 10:53:17,211 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-06 10:53:17,212 - DEBUG - Configurando y creando bridges...
2025-05-06 10:53:17,234 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-06 10:53:17,281 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-06 10:53:17,281 - DEBUG - Creando bridge lxdbr1
2025-05-06 10:53:18,879 - INFO - Bridge creado: lxdbr1
2025-05-06 10:53:19,776 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-06 10:53:23,213 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-06 10:53:23,213 - DEBUG - Creando contenedores de servidores...
2025-05-06 10:53:23,213 - DEBUG - Intentando crear el contenedor s1
2025-05-06 10:53:30,366 - INFO - Contenedor s1 creado con éxito.
2025-05-06 10:53:30,367 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-06 10:53:30,402 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-06 10:53:30,402 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-06 10:53:30,423 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-06 10:53:30,423 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-06 10:53:30,424 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-06 10:53:30,424 - INFO - Número de servidores guardados correctamente
2025-05-06 10:53:30,424 - DEBUG - Creando balanceador...
2025-05-06 10:53:30,424 - DEBUG - Intentando crear el contenedor lb
2025-05-06 10:53:37,581 - INFO - Contenedor lb creado con éxito.
2025-05-06 10:53:37,581 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-06 10:53:37,619 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-06 10:53:37,620 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-06 10:53:37,641 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-06 10:53:37,641 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-06 10:53:37,678 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-06 10:53:37,678 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-06 10:53:37,702 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-06 10:53:37,702 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 10:53:38,065 - INFO - Contenedor iniciado: lb
2025-05-06 10:53:38,065 - DEBUG - Iniciando cambio de netplan en lb
2025-05-06 10:53:38,065 - DEBUG - Desactivando cloud-init en lb
2025-05-06 10:53:38,120 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-06 10:53:38,151 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-06 10:53:38,151 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-06 10:53:38,196 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-06 10:53:39,815 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-06 10:53:39,815 - DEBUG - Verificando estado antes de detener lb
2025-05-06 10:53:41,131 - INFO - Contenedor parado: lb
2025-05-06 10:53:41,131 - INFO - Balanceador configurado correctamente
2025-05-06 10:53:41,131 - DEBUG - Creando cliente...
2025-05-06 10:53:41,131 - DEBUG - Intentando crear el contenedor cl
2025-05-06 10:53:48,358 - INFO - Contenedor cl creado con éxito.
2025-05-06 10:53:48,358 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-06 10:53:48,393 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-06 10:53:48,393 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-06 10:53:48,415 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-06 10:53:48,415 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 10:53:48,838 - INFO - Contenedor iniciado: cl
2025-05-06 10:53:48,838 - DEBUG - Iniciando cambio de netplan en cl
2025-05-06 10:53:48,838 - DEBUG - Desactivando cloud-init en cl
2025-05-06 10:53:48,904 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-06 10:53:48,943 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-06 10:53:48,943 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-06 10:53:48,964 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-06 10:53:50,701 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-06 10:53:50,701 - DEBUG - Verificando estado antes de detener cl
2025-05-06 10:53:52,120 - INFO - Contenedor parado: cl
2025-05-06 10:53:52,120 - INFO - Cliente configurado correctamente
2025-05-06 10:53:52,120 - INFO - Infraestructura creada correctamente.
2025-05-06 11:14:41,935 - INFO - Orden recibida: create
2025-05-06 11:14:41,936 - INFO - Número de servidores especificado: 1
2025-05-06 11:14:41,936 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-06 11:14:41,936 - DEBUG - Parámetro recibido n_servers=1
2025-05-06 11:14:41,936 - DEBUG - Creando imagen base...
2025-05-06 11:14:41,936 - DEBUG - Verificando si la imagen ya está importada...
2025-05-06 11:14:41,947 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-06 11:14:41,947 - DEBUG - Configurando y creando bridges...
2025-05-06 11:14:41,972 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-06 11:14:42,019 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-06 11:14:42,020 - DEBUG - Creando bridge lxdbr1
2025-05-06 11:14:42,030 - WARNING - El bridge lxdbr1 ya existe.
2025-05-06 11:14:42,054 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-06 11:14:42,102 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-06 11:14:42,102 - DEBUG - Creando contenedores de servidores...
2025-05-06 11:14:42,102 - DEBUG - Intentando crear el contenedor s1
2025-05-06 11:14:42,114 - WARNING - El contenedor s1 ya existe.
2025-05-06 11:14:42,114 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-06 11:14:42,124 - WARNING - El contenedor s1 ya está conectado a lxdbr0 por eth0
2025-05-06 11:14:42,124 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-06 11:14:42,144 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-06 11:14:42,144 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-06 11:14:42,146 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-06 11:14:42,146 - INFO - Número de servidores guardados correctamente
2025-05-06 11:14:42,146 - DEBUG - Creando balanceador...
2025-05-06 11:14:42,146 - DEBUG - Intentando crear el contenedor lb
2025-05-06 11:14:42,157 - WARNING - El contenedor lb ya existe.
2025-05-06 11:14:42,157 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-06 11:14:42,167 - WARNING - El contenedor lb ya está conectado a lxdbr0 por eth0
2025-05-06 11:14:42,167 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-06 11:14:42,189 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-06 11:14:42,189 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-06 11:14:42,199 - WARNING - El contenedor lb ya está conectado a lxdbr1 por eth1
2025-05-06 11:14:42,199 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-06 11:14:42,221 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-06 11:14:42,221 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 11:14:42,675 - INFO - Contenedor iniciado: lb
2025-05-06 11:14:42,675 - DEBUG - Iniciando cambio de netplan en lb
2025-05-06 11:14:42,675 - DEBUG - Desactivando cloud-init en lb
2025-05-06 11:14:42,722 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-06 11:14:42,753 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-06 11:14:42,753 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-06 11:14:42,774 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-06 11:14:44,384 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-06 11:14:44,384 - DEBUG - Verificando estado antes de detener lb
2025-05-06 11:14:45,889 - INFO - Contenedor parado: lb
2025-05-06 11:14:45,889 - INFO - Balanceador configurado correctamente
2025-05-06 11:14:45,889 - DEBUG - Creando cliente...
2025-05-06 11:14:45,889 - DEBUG - Intentando crear el contenedor cl
2025-05-06 11:14:45,901 - WARNING - El contenedor cl ya existe.
2025-05-06 11:14:45,901 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-06 11:14:45,912 - WARNING - El contenedor cl ya está conectado a lxdbr1 por eth1
2025-05-06 11:14:45,912 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-06 11:14:45,932 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-06 11:14:45,932 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 11:14:46,301 - INFO - Contenedor iniciado: cl
2025-05-06 11:14:46,302 - DEBUG - Iniciando cambio de netplan en cl
2025-05-06 11:14:46,302 - DEBUG - Desactivando cloud-init en cl
2025-05-06 11:14:46,341 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-06 11:14:46,370 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-06 11:14:46,370 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-06 11:14:46,390 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-06 11:14:48,023 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-06 11:14:48,024 - DEBUG - Verificando estado antes de detener cl
2025-05-06 11:14:49,433 - INFO - Contenedor parado: cl
2025-05-06 11:14:49,433 - INFO - Cliente configurado correctamente
2025-05-06 11:14:49,433 - INFO - Infraestructura creada correctamente.
2025-05-06 11:14:58,452 - INFO - Orden recibida: create
2025-05-06 11:14:58,452 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-06 11:14:58,452 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-06 11:14:58,452 - DEBUG - Parámetro recibido n_servers=2
2025-05-06 11:14:58,452 - DEBUG - Creando imagen base...
2025-05-06 11:14:58,452 - DEBUG - Verificando si la imagen ya está importada...
2025-05-06 11:14:58,464 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-06 11:14:58,464 - DEBUG - Configurando y creando bridges...
2025-05-06 11:14:58,489 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-06 11:14:58,542 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-06 11:14:58,542 - DEBUG - Creando bridge lxdbr1
2025-05-06 11:14:58,554 - WARNING - El bridge lxdbr1 ya existe.
2025-05-06 11:14:58,587 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-06 11:14:58,645 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-06 11:14:58,645 - DEBUG - Creando contenedores de servidores...
2025-05-06 11:14:58,645 - DEBUG - Intentando crear el contenedor s1
2025-05-06 11:14:58,660 - WARNING - El contenedor s1 ya existe.
2025-05-06 11:14:58,660 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-06 11:14:58,672 - WARNING - El contenedor s1 ya está conectado a lxdbr0 por eth0
2025-05-06 11:14:58,672 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-06 11:14:58,696 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-06 11:14:58,696 - DEBUG - Intentando crear el contenedor s2
2025-05-06 11:15:05,738 - INFO - Contenedor s2 creado con éxito.
2025-05-06 11:15:05,738 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-06 11:15:05,777 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-06 11:15:05,777 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-06 11:15:05,799 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-06 11:15:05,799 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-06 11:15:05,800 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-06 11:15:05,800 - INFO - Número de servidores guardados correctamente
2025-05-06 11:15:05,800 - DEBUG - Creando balanceador...
2025-05-06 11:15:05,800 - DEBUG - Intentando crear el contenedor lb
2025-05-06 11:15:05,813 - WARNING - El contenedor lb ya existe.
2025-05-06 11:15:05,813 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-06 11:15:05,824 - WARNING - El contenedor lb ya está conectado a lxdbr0 por eth0
2025-05-06 11:15:05,825 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-06 11:15:05,847 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-06 11:15:05,847 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-06 11:15:05,858 - WARNING - El contenedor lb ya está conectado a lxdbr1 por eth1
2025-05-06 11:15:05,858 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-06 11:15:05,881 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-06 11:15:05,881 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 11:15:06,324 - INFO - Contenedor iniciado: lb
2025-05-06 11:15:06,324 - DEBUG - Iniciando cambio de netplan en lb
2025-05-06 11:15:06,325 - DEBUG - Desactivando cloud-init en lb
2025-05-06 11:15:06,383 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-06 11:15:06,416 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-06 11:15:06,416 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-06 11:15:06,436 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-06 11:15:08,206 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-06 11:15:08,206 - DEBUG - Verificando estado antes de detener lb
2025-05-06 11:15:09,669 - INFO - Contenedor parado: lb
2025-05-06 11:15:09,669 - INFO - Balanceador configurado correctamente
2025-05-06 11:15:09,669 - DEBUG - Creando cliente...
2025-05-06 11:15:09,669 - DEBUG - Intentando crear el contenedor cl
2025-05-06 11:15:09,680 - WARNING - El contenedor cl ya existe.
2025-05-06 11:15:09,680 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-06 11:15:09,691 - WARNING - El contenedor cl ya está conectado a lxdbr1 por eth1
2025-05-06 11:15:09,691 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-06 11:15:09,713 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-06 11:15:09,713 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 11:15:10,126 - INFO - Contenedor iniciado: cl
2025-05-06 11:15:10,127 - DEBUG - Iniciando cambio de netplan en cl
2025-05-06 11:15:10,127 - DEBUG - Desactivando cloud-init en cl
2025-05-06 11:15:10,184 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-06 11:15:10,211 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-06 11:15:10,212 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-06 11:15:10,233 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-06 11:15:11,850 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-06 11:15:11,850 - DEBUG - Verificando estado antes de detener cl
2025-05-06 11:15:13,324 - INFO - Contenedor parado: cl
2025-05-06 11:15:13,324 - INFO - Cliente configurado correctamente
2025-05-06 11:15:13,324 - INFO - Infraestructura creada correctamente.
2025-05-06 11:15:25,825 - INFO - Orden recibida: list
2025-05-06 11:15:25,825 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 11:15:25,826 - INFO - Número de servidores 2 cargados correctamente.
2025-05-06 11:15:25,826 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-06 11:15:25,826 - INFO - Listando contenedores
2025-05-06 11:15:25,843 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-06 11:33:22,635 - INFO - Orden recibida: delete
2025-05-06 11:33:22,635 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 11:33:22,636 - INFO - Número de servidores 2 cargados correctamente.
2025-05-06 11:33:22,636 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-06 11:33:22,636 - INFO - Eliminando toda la infraestructura
2025-05-06 11:33:22,636 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-06 11:33:22,701 - INFO - Imagen local eliminada con éxito.
2025-05-06 11:33:22,701 - DEBUG - Eliminando contenedor s1
2025-05-06 11:33:23,372 - INFO - Contenedor eliminado: s1
2025-05-06 11:33:23,372 - DEBUG - Eliminando contenedor s2
2025-05-06 11:33:24,047 - INFO - Contenedor eliminado: s2
2025-05-06 11:33:24,047 - DEBUG - Eliminando contenedor cl
2025-05-06 11:33:24,724 - INFO - Contenedor eliminado: cl
2025-05-06 11:33:24,724 - DEBUG - Eliminando contenedor lb
2025-05-06 11:33:25,404 - INFO - Contenedor eliminado: lb
2025-05-06 11:33:25,404 - DEBUG - Contenedores eliminados correctamente
2025-05-06 11:33:25,404 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-06 11:33:25,846 - INFO - Bridge eliminado: lxdbr1
2025-05-06 11:33:25,846 - INFO - Eliminación completada.
2025-05-06 13:09:39,689 - INFO - Orden recibida: create
2025-05-06 13:09:39,689 - INFO - Número de servidores especificado: 3
2025-05-06 13:09:39,689 - INFO - Iniciando creación de infraestructura con 3 servidores
2025-05-06 13:09:39,690 - DEBUG - Parámetro recibido n_servers=3
2025-05-06 13:09:39,690 - DEBUG - Creando imagen base...
2025-05-06 13:09:39,690 - DEBUG - Verificando si la imagen ya está importada...
2025-05-06 13:09:39,719 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-06 13:09:39,719 - DEBUG - Configurando y creando bridges...
2025-05-06 13:09:40,711 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-06 13:09:40,755 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-06 13:09:40,755 - DEBUG - Creando bridge lxdbr1
2025-05-06 13:09:42,347 - INFO - Bridge creado: lxdbr1
2025-05-06 13:09:43,266 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-06 13:09:46,700 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-06 13:09:46,700 - DEBUG - Creando contenedores de servidores...
2025-05-06 13:09:46,700 - DEBUG - Intentando crear el contenedor s1
2025-05-06 13:09:53,865 - INFO - Contenedor s1 creado con éxito.
2025-05-06 13:09:53,865 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-06 13:09:53,902 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-06 13:09:53,902 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-06 13:09:53,923 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-06 13:09:53,923 - DEBUG - Intentando crear el contenedor s2
2025-05-06 13:10:01,011 - INFO - Contenedor s2 creado con éxito.
2025-05-06 13:10:01,011 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-06 13:10:01,051 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-06 13:10:01,051 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-06 13:10:01,073 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-06 13:10:01,073 - DEBUG - Intentando crear el contenedor s3
2025-05-06 13:10:08,107 - INFO - Contenedor s3 creado con éxito.
2025-05-06 13:10:08,108 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-06 13:10:08,146 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-06 13:10:08,146 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-06 13:10:08,168 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-06 13:10:08,168 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-06 13:10:08,169 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-06 13:10:08,169 - INFO - Número de servidores guardados correctamente
2025-05-06 13:10:08,169 - DEBUG - Creando balanceador...
2025-05-06 13:10:08,169 - DEBUG - Intentando crear el contenedor lb
2025-05-06 13:10:15,206 - INFO - Contenedor lb creado con éxito.
2025-05-06 13:10:15,206 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-06 13:10:15,244 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-06 13:10:15,244 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-06 13:10:15,268 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-06 13:10:15,268 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-06 13:10:15,313 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-06 13:10:15,314 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-06 13:10:15,344 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-06 13:10:15,344 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 13:10:15,690 - INFO - Contenedor iniciado: lb
2025-05-06 13:10:15,690 - DEBUG - Iniciando cambio de netplan en lb
2025-05-06 13:10:15,690 - DEBUG - Desactivando cloud-init en lb
2025-05-06 13:10:15,716 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-06 13:10:15,748 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-06 13:10:15,748 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-06 13:10:15,769 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-06 13:10:17,463 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-06 13:10:17,463 - DEBUG - Verificando estado antes de detener lb
2025-05-06 13:10:18,923 - INFO - Contenedor parado: lb
2025-05-06 13:10:18,923 - INFO - Balanceador configurado correctamente
2025-05-06 13:10:18,923 - DEBUG - Creando cliente...
2025-05-06 13:10:18,923 - DEBUG - Intentando crear el contenedor cl
2025-05-06 13:10:25,959 - INFO - Contenedor cl creado con éxito.
2025-05-06 13:10:25,959 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-06 13:10:25,998 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-06 13:10:25,999 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-06 13:10:26,024 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-06 13:10:26,024 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 13:10:26,467 - INFO - Contenedor iniciado: cl
2025-05-06 13:10:26,467 - DEBUG - Iniciando cambio de netplan en cl
2025-05-06 13:10:26,467 - DEBUG - Desactivando cloud-init en cl
2025-05-06 13:10:26,511 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-06 13:10:26,583 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-06 13:10:26,583 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-06 13:10:26,608 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-06 13:10:28,270 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-06 13:10:28,270 - DEBUG - Verificando estado antes de detener cl
2025-05-06 13:10:29,738 - INFO - Contenedor parado: cl
2025-05-06 13:10:29,738 - INFO - Cliente configurado correctamente
2025-05-06 13:10:29,739 - INFO - Infraestructura creada correctamente.
2025-05-06 13:10:33,417 - INFO - Orden recibida: start
2025-05-06 13:10:33,417 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 13:10:33,418 - INFO - Número de servidores 3 cargados correctamente.
2025-05-06 13:10:33,418 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-06 13:10:33,418 - INFO - Iniciando todos los contenedores
2025-05-06 13:10:33,418 - DEBUG - Arrancando servidor: s1
2025-05-06 13:10:33,418 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-06 13:10:33,739 - INFO - Contenedor iniciado: s1
2025-05-06 13:10:33,739 - DEBUG - Arrancando servidor: s2
2025-05-06 13:10:33,739 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-06 13:10:34,015 - INFO - Contenedor iniciado: s2
2025-05-06 13:10:34,015 - DEBUG - Arrancando servidor: s3
2025-05-06 13:10:34,015 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-06 13:10:34,281 - INFO - Contenedor iniciado: s3
2025-05-06 13:10:34,281 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-06 13:10:34,636 - INFO - Contenedor iniciado: cl
2025-05-06 13:10:34,636 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-06 13:10:35,046 - INFO - Contenedor iniciado: lb
2025-05-06 13:10:35,046 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-06 13:10:35,049 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-06 13:10:35,050 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-06 13:10:35,051 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-06 13:10:35,052 - INFO - Consola del contenedor cl abierta correctamente
2025-05-06 13:10:35,052 - INFO - Consola del contenedor lb abierta correctamente
2025-05-06 13:17:25,003 - INFO - Orden recibida: delete
2025-05-06 13:17:25,003 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-06 13:17:25,004 - INFO - Número de servidores 3 cargados correctamente.
2025-05-06 13:17:25,004 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-06 13:17:25,004 - INFO - Eliminando toda la infraestructura
2025-05-06 13:17:25,004 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-06 13:17:25,065 - INFO - Imagen local eliminada con éxito.
2025-05-06 13:17:25,065 - DEBUG - Eliminando contenedor s1
2025-05-06 13:17:26,844 - INFO - Contenedor eliminado: s1
2025-05-06 13:17:26,844 - DEBUG - Eliminando contenedor s2
2025-05-06 13:17:28,496 - INFO - Contenedor eliminado: s2
2025-05-06 13:17:28,496 - DEBUG - Eliminando contenedor s3
2025-05-06 13:17:30,198 - INFO - Contenedor eliminado: s3
2025-05-06 13:17:30,198 - DEBUG - Eliminando contenedor cl
2025-05-06 13:17:32,118 - INFO - Contenedor eliminado: cl
2025-05-06 13:17:32,118 - DEBUG - Eliminando contenedor lb
2025-05-06 13:17:33,970 - INFO - Contenedor eliminado: lb
2025-05-06 13:17:33,970 - DEBUG - Contenedores eliminados correctamente
2025-05-06 13:17:33,970 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-06 13:17:34,350 - INFO - Bridge eliminado: lxdbr1
2025-05-06 13:17:34,351 - INFO - Eliminación completada.
2025-05-07 19:37:44,306 - INFO - Orden recibida: create
2025-05-07 19:37:44,306 - INFO - Número de servidores especificado: 1
2025-05-07 19:37:44,306 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-07 19:37:44,306 - DEBUG - Parámetro recibido n_servers=1
2025-05-07 19:37:44,306 - DEBUG - Creando imagen base...
2025-05-07 19:37:44,307 - DEBUG - Verificando si la imagen ya está importada...
2025-05-07 19:37:44,321 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-07 19:37:50,049 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-07 19:37:50,049 - DEBUG - Configurando y creando bridges...
2025-05-07 19:37:50,880 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-07 19:37:54,172 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-07 19:37:54,172 - DEBUG - Creando bridge lxdbr1
2025-05-07 19:37:55,787 - INFO - Bridge creado: lxdbr1
2025-05-07 19:37:56,661 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-07 19:38:00,102 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-07 19:38:00,102 - DEBUG - Creando contenedores de servidores...
2025-05-07 19:38:00,102 - DEBUG - Intentando crear el contenedor s1
2025-05-07 19:38:09,795 - INFO - Contenedor s1 creado con éxito.
2025-05-07 19:38:09,795 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-07 19:38:09,855 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-07 19:38:09,855 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-07 19:38:09,889 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-07 19:38:09,889 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-07 19:38:10,202 - INFO - Contenedor iniciado: s1
2025-05-07 19:38:10,205 - CRITICAL - Error crítico en creación de infraestructura: [Errno 2] No such file or directory: 'lxc exec s1 -- apt update'
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 57, in create_all
    config_server(name=VM_NAMES["servidores"][i])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/server_web.py", line 23, in config_server
    subprocess.run(f"lxc exec {name} -- apt update")
  File "/usr/lib/python3.11/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 1024, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/lib/python3.11/subprocess.py", line 1901, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'lxc exec s1 -- apt update'
2025-05-07 19:41:31,875 - INFO - Orden recibida: delete
2025-05-07 19:41:31,875 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-07 19:41:31,876 - INFO - Número de servidores 3 cargados correctamente.
2025-05-07 19:41:31,876 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-07 19:41:31,876 - INFO - Eliminando toda la infraestructura
2025-05-07 19:41:31,876 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-07 19:41:31,942 - INFO - Imagen local eliminada con éxito.
2025-05-07 19:41:31,943 - DEBUG - Eliminando contenedor s1
2025-05-07 19:41:33,670 - INFO - Contenedor eliminado: s1
2025-05-07 19:41:33,670 - DEBUG - Eliminando contenedor s2
2025-05-07 19:41:33,682 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-07 19:41:33,682 - DEBUG - Eliminando contenedor s3
2025-05-07 19:41:33,694 - ERROR - Error al eliminar el contenedor s3: Command '['lxc', 'delete', 's3', '--force']' returned non-zero exit status 1.
2025-05-07 19:41:33,694 - DEBUG - Eliminando contenedor cl
2025-05-07 19:41:33,704 - ERROR - Error al eliminar el contenedor cl: Command '['lxc', 'delete', 'cl', '--force']' returned non-zero exit status 1.
2025-05-07 19:41:33,705 - DEBUG - Eliminando contenedor lb
2025-05-07 19:41:33,719 - ERROR - Error al eliminar el contenedor lb: Command '['lxc', 'delete', 'lb', '--force']' returned non-zero exit status 1.
2025-05-07 19:41:33,719 - DEBUG - Contenedores eliminados correctamente
2025-05-07 19:41:33,719 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-07 19:41:34,056 - INFO - Bridge eliminado: lxdbr1
2025-05-07 19:41:34,056 - INFO - Eliminación completada.
2025-05-07 19:41:45,709 - INFO - Orden recibida: create
2025-05-07 19:41:45,709 - INFO - Número de servidores especificado: 1
2025-05-07 19:41:45,710 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-07 19:41:45,710 - DEBUG - Parámetro recibido n_servers=1
2025-05-07 19:41:45,710 - DEBUG - Creando imagen base...
2025-05-07 19:41:45,710 - DEBUG - Verificando si la imagen ya está importada...
2025-05-07 19:41:45,726 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-07 19:41:47,370 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-07 19:41:47,370 - DEBUG - Configurando y creando bridges...
2025-05-07 19:41:47,409 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-07 19:41:47,492 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-07 19:41:47,492 - DEBUG - Creando bridge lxdbr1
2025-05-07 19:41:49,102 - INFO - Bridge creado: lxdbr1
2025-05-07 19:41:49,975 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-07 19:41:53,339 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-07 19:41:53,339 - DEBUG - Creando contenedores de servidores...
2025-05-07 19:41:53,339 - DEBUG - Intentando crear el contenedor s1
2025-05-07 19:42:03,232 - INFO - Contenedor s1 creado con éxito.
2025-05-07 19:42:03,233 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-07 19:42:03,278 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-07 19:42:03,278 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-07 19:42:03,312 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-07 19:42:03,312 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-07 19:42:03,612 - INFO - Contenedor iniciado: s1
2025-05-07 19:42:03,615 - CRITICAL - Error crítico en creación de infraestructura: [Errno 2] No such file or directory: 'lxc exec s1 apt update'
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 57, in create_all
    config_server(name=VM_NAMES["servidores"][i])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/server_web.py", line 23, in config_server
    subprocess.run(f"lxc exec {name} apt update")
  File "/usr/lib/python3.11/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 1024, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/lib/python3.11/subprocess.py", line 1901, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'lxc exec s1 apt update'
2025-05-07 19:48:54,206 - INFO - Orden recibida: delete
2025-05-07 19:48:54,206 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-07 19:48:54,207 - INFO - Número de servidores 3 cargados correctamente.
2025-05-07 19:48:54,207 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-07 19:48:54,207 - INFO - Eliminando toda la infraestructura
2025-05-07 19:48:54,207 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-07 19:48:54,283 - INFO - Imagen local eliminada con éxito.
2025-05-07 19:48:54,283 - DEBUG - Eliminando contenedor s1
2025-05-07 19:48:56,001 - INFO - Contenedor eliminado: s1
2025-05-07 19:48:56,001 - DEBUG - Eliminando contenedor s2
2025-05-07 19:48:56,013 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-07 19:48:56,013 - DEBUG - Eliminando contenedor s3
2025-05-07 19:48:56,025 - ERROR - Error al eliminar el contenedor s3: Command '['lxc', 'delete', 's3', '--force']' returned non-zero exit status 1.
2025-05-07 19:48:56,025 - DEBUG - Eliminando contenedor cl
2025-05-07 19:48:56,042 - ERROR - Error al eliminar el contenedor cl: Command '['lxc', 'delete', 'cl', '--force']' returned non-zero exit status 1.
2025-05-07 19:48:56,042 - DEBUG - Eliminando contenedor lb
2025-05-07 19:48:56,052 - ERROR - Error al eliminar el contenedor lb: Command '['lxc', 'delete', 'lb', '--force']' returned non-zero exit status 1.
2025-05-07 19:48:56,052 - DEBUG - Contenedores eliminados correctamente
2025-05-07 19:48:56,052 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-07 19:48:56,415 - INFO - Bridge eliminado: lxdbr1
2025-05-07 19:48:56,416 - INFO - Eliminación completada.
2025-05-07 19:48:58,934 - INFO - Orden recibida: create
2025-05-07 19:48:58,934 - INFO - Número de servidores especificado: 1
2025-05-07 19:48:58,934 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-07 19:48:58,934 - DEBUG - Parámetro recibido n_servers=1
2025-05-07 19:48:58,934 - DEBUG - Creando imagen base...
2025-05-07 19:48:58,934 - DEBUG - Verificando si la imagen ya está importada...
2025-05-07 19:48:58,949 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-07 19:49:00,653 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-07 19:49:00,653 - DEBUG - Configurando y creando bridges...
2025-05-07 19:49:00,682 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-07 19:49:00,741 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-07 19:49:00,741 - DEBUG - Creando bridge lxdbr1
2025-05-07 19:49:02,346 - INFO - Bridge creado: lxdbr1
2025-05-07 19:49:03,207 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-07 19:49:06,556 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-07 19:49:06,556 - DEBUG - Creando contenedores de servidores...
2025-05-07 19:49:06,556 - DEBUG - Intentando crear el contenedor s1
2025-05-07 19:49:16,259 - INFO - Contenedor s1 creado con éxito.
2025-05-07 19:49:16,260 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-07 19:49:16,317 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-07 19:49:16,317 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-07 19:49:16,370 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-07 19:49:16,371 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-07 19:49:16,903 - INFO - Contenedor iniciado: s1
2025-05-07 19:49:16,907 - CRITICAL - Error crítico en creación de infraestructura: [Errno 2] No such file or directory: 'lxc exec'
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 57, in create_all
    config_server(name=VM_NAMES["servidores"][i])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/server_web.py", line 23, in config_server
    subprocess.run(["lxc exec", name, "apt update"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 1024, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/lib/python3.11/subprocess.py", line 1901, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'lxc exec'
2025-05-07 19:52:39,248 - INFO - Orden recibida: create
2025-05-07 19:52:39,248 - INFO - Número de servidores especificado: 1
2025-05-07 19:52:39,248 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-07 19:52:39,248 - DEBUG - Parámetro recibido n_servers=1
2025-05-07 19:52:39,248 - DEBUG - Creando imagen base...
2025-05-07 19:52:39,248 - DEBUG - Verificando si la imagen ya está importada...
2025-05-07 19:52:39,265 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-07 19:52:39,265 - DEBUG - Configurando y creando bridges...
2025-05-07 19:52:39,300 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-07 19:52:39,360 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-07 19:52:39,361 - DEBUG - Creando bridge lxdbr1
2025-05-07 19:52:39,372 - WARNING - El bridge lxdbr1 ya existe.
2025-05-07 19:52:39,404 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-07 19:52:39,464 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-07 19:52:39,464 - DEBUG - Creando contenedores de servidores...
2025-05-07 19:52:39,464 - DEBUG - Intentando crear el contenedor s1
2025-05-07 19:52:39,480 - WARNING - El contenedor s1 ya existe.
2025-05-07 19:52:39,480 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-07 19:52:39,494 - WARNING - El contenedor s1 ya está conectado a lxdbr0 por eth0
2025-05-07 19:52:39,494 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-07 19:52:39,518 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-07 19:52:39,518 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-07 19:52:39,535 - INFO - Contenedor s1 ya está en ejecución.
2025-05-07 19:55:52,727 - DEBUG - Verificando estado antes de detener s1
2025-05-07 19:55:54,508 - INFO - Contenedor parado: s1
2025-05-07 19:55:54,508 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-07 19:55:54,510 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-07 19:55:54,510 - INFO - Número de servidores guardados correctamente
2025-05-07 19:55:54,510 - DEBUG - Creando balanceador...
2025-05-07 19:55:54,510 - DEBUG - Intentando crear el contenedor lb
2025-05-07 19:56:04,598 - INFO - Contenedor lb creado con éxito.
2025-05-07 19:56:04,598 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-07 19:56:04,648 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-07 19:56:04,648 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-07 19:56:04,683 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-07 19:56:04,683 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-07 19:56:04,737 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-07 19:56:04,737 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-07 19:56:04,780 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-07 19:56:04,781 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-07 19:56:05,147 - INFO - Contenedor iniciado: lb
2025-05-07 19:56:05,148 - DEBUG - Iniciando cambio de netplan en lb
2025-05-07 19:56:05,148 - DEBUG - Desactivando cloud-init en lb
2025-05-07 19:56:05,217 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-07 19:56:05,265 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-07 19:56:05,265 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-07 19:56:05,320 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-07 19:56:07,143 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-07 19:56:07,143 - DEBUG - Verificando estado antes de detener lb
2025-05-07 19:56:08,533 - INFO - Contenedor parado: lb
2025-05-07 19:56:08,533 - INFO - Balanceador configurado correctamente
2025-05-07 19:56:08,533 - DEBUG - Creando cliente...
2025-05-07 19:56:08,533 - DEBUG - Intentando crear el contenedor cl
2025-05-07 19:56:18,513 - INFO - Contenedor cl creado con éxito.
2025-05-07 19:56:18,513 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-07 19:56:18,788 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-07 19:56:18,788 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-07 19:56:18,901 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-07 19:56:18,901 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-07 19:56:19,271 - INFO - Contenedor iniciado: cl
2025-05-07 19:56:19,271 - DEBUG - Iniciando cambio de netplan en cl
2025-05-07 19:56:19,271 - DEBUG - Desactivando cloud-init en cl
2025-05-07 19:56:19,319 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-07 19:56:19,392 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-07 19:56:19,393 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-07 19:56:19,418 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-07 19:56:21,216 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-07 19:56:21,216 - DEBUG - Verificando estado antes de detener cl
2025-05-07 19:56:22,627 - INFO - Contenedor parado: cl
2025-05-07 19:56:22,628 - INFO - Cliente configurado correctamente
2025-05-07 19:56:22,628 - INFO - Infraestructura creada correctamente.
2025-05-07 19:56:59,586 - INFO - Orden recibida: list
2025-05-07 19:56:59,587 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-07 19:56:59,587 - INFO - Número de servidores 1 cargados correctamente.
2025-05-07 19:56:59,587 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-07 19:56:59,587 - INFO - Listando contenedores
2025-05-07 19:56:59,608 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-07 19:57:03,467 - INFO - Orden recibida: start
2025-05-07 19:57:03,467 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-07 19:57:03,468 - INFO - Número de servidores 1 cargados correctamente.
2025-05-07 19:57:03,468 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-07 19:57:03,468 - INFO - Iniciando todos los contenedores
2025-05-07 19:57:03,468 - DEBUG - Arrancando servidor: s1
2025-05-07 19:57:03,468 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-07 19:57:03,752 - INFO - Contenedor iniciado: s1
2025-05-07 19:57:03,753 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-07 19:57:04,199 - INFO - Contenedor iniciado: cl
2025-05-07 19:57:04,199 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-07 19:57:04,597 - INFO - Contenedor iniciado: lb
2025-05-07 19:57:04,597 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-07 19:57:04,614 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-07 19:57:04,615 - INFO - Consola del contenedor cl abierta correctamente
2025-05-07 19:57:04,616 - INFO - Consola del contenedor lb abierta correctamente
2025-05-07 19:57:08,154 - INFO - Orden recibida: list
2025-05-07 19:57:08,155 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-07 19:57:08,155 - INFO - Número de servidores 1 cargados correctamente.
2025-05-07 19:57:08,155 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-07 19:57:08,155 - INFO - Listando contenedores
2025-05-07 19:57:08,200 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 12:31:37,954 - INFO - Orden recibida: create
2025-05-13 12:31:37,954 - INFO - Número de servidores especificado: 1
2025-05-13 12:31:37,954 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 12:31:37,954 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 12:31:37,954 - DEBUG - Creando imagen base...
2025-05-13 12:31:37,954 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 12:31:39,312 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 12:31:44,982 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 12:31:44,982 - DEBUG - Configurando y creando bridges...
2025-05-13 12:31:45,887 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 12:31:49,345 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 12:31:49,345 - DEBUG - Creando bridge lxdbr1
2025-05-13 12:31:50,972 - INFO - Bridge creado: lxdbr1
2025-05-13 12:31:51,897 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 12:31:55,455 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 12:31:55,455 - DEBUG - Creando contenedores de servidores...
2025-05-13 12:31:55,455 - DEBUG - Intentando crear el contenedor s1
2025-05-13 12:32:05,165 - INFO - Contenedor s1 creado con éxito.
2025-05-13 12:32:05,166 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 12:32:05,215 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 12:32:05,215 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 12:32:05,251 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 12:32:05,251 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 12:32:05,605 - INFO - Contenedor iniciado: s1
2025-05-13 12:32:06,786 - CRITICAL - Error crítico en creación de infraestructura: Command '['lxc', 'exec', 's1', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 57, in create_all
    config_server(name=VM_NAMES["servidores"][i])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/server_web.py", line 25, in config_server
    subprocess.run(["lxc", "exec", name, "--", "apt", "install", "-y", "apache2"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 's1', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-13 19:55:04,499 - INFO - Orden recibida: create
2025-05-13 19:55:04,499 - INFO - Número de servidores especificado: 1
2025-05-13 19:55:04,499 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 19:55:04,499 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 19:55:04,499 - DEBUG - Creando imagen base...
2025-05-13 19:55:04,499 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 19:55:05,937 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 19:55:11,843 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 19:55:11,843 - DEBUG - Configurando y creando bridges...
2025-05-13 19:55:12,813 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 19:55:16,229 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 19:55:16,229 - DEBUG - Creando bridge lxdbr1
2025-05-13 19:55:17,902 - INFO - Bridge creado: lxdbr1
2025-05-13 19:55:18,780 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 19:55:22,236 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 19:55:22,236 - DEBUG - Creando contenedores de servidores...
2025-05-13 19:55:22,236 - DEBUG - Intentando crear el contenedor s1
2025-05-13 19:55:32,586 - INFO - Contenedor s1 creado con éxito.
2025-05-13 19:55:32,586 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 19:55:32,658 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 19:55:32,658 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 19:55:32,701 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 19:55:32,701 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 19:55:32,702 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 19:55:32,702 - INFO - Número de servidores guardados correctamente
2025-05-13 19:55:32,702 - DEBUG - Creando balanceador...
2025-05-13 19:55:32,702 - DEBUG - Intentando crear el contenedor lb
2025-05-13 19:55:43,992 - INFO - Contenedor lb creado con éxito.
2025-05-13 19:55:43,992 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 19:55:44,046 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 19:55:44,046 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 19:55:44,082 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 19:55:44,082 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 19:55:44,143 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 19:55:44,143 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 19:55:44,185 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 19:55:44,185 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 19:55:44,706 - INFO - Contenedor iniciado: lb
2025-05-13 19:55:44,706 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 19:55:44,706 - DEBUG - Desactivando cloud-init en lb
2025-05-13 19:55:44,854 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 19:55:44,898 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 19:55:44,898 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 19:55:44,947 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 19:55:46,954 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 19:55:46,955 - DEBUG - Verificando estado antes de detener lb
2025-05-13 19:55:48,501 - INFO - Contenedor parado: lb
2025-05-13 19:55:48,501 - INFO - Balanceador configurado correctamente
2025-05-13 19:55:48,501 - DEBUG - Creando cliente...
2025-05-13 19:55:48,501 - DEBUG - Intentando crear el contenedor cl
2025-05-13 19:56:00,096 - INFO - Contenedor cl creado con éxito.
2025-05-13 19:56:00,096 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 19:56:00,153 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 19:56:00,153 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 19:56:00,195 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 19:56:00,195 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 19:56:00,664 - INFO - Contenedor iniciado: cl
2025-05-13 19:56:00,664 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 19:56:00,664 - DEBUG - Desactivando cloud-init en cl
2025-05-13 19:56:00,771 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 19:56:00,867 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 19:56:00,867 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 19:56:00,943 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 19:56:02,796 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 19:56:02,796 - DEBUG - Verificando estado antes de detener cl
2025-05-13 19:56:04,260 - INFO - Contenedor parado: cl
2025-05-13 19:56:04,260 - INFO - Cliente configurado correctamente
2025-05-13 19:56:04,260 - DEBUG - Intentando crear el contenedor db
2025-05-13 19:56:17,299 - INFO - Contenedor db creado con éxito.
2025-05-13 19:56:17,300 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 19:56:17,372 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 19:56:17,372 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 19:56:17,413 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 19:56:17,413 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 19:56:17,746 - INFO - Contenedor iniciado: db
2025-05-13 19:56:17,746 - DEBUG - Iniciando cambio de netplan en db
2025-05-13 19:56:18,614 - CRITICAL - Error crítico en creación de infraestructura: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 101, in create_all
    install_mongoDB(name=VM_NAMES["database"])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/database.py", line 25, in install_mongoDB
    subprocess.run(["lxc", "exec", name, "--", "apt", "install", "-y", "mongodb"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
2025-05-13 19:56:51,924 - INFO - Orden recibida: delete
2025-05-13 19:56:51,924 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 19:56:51,924 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 19:56:51,925 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 19:56:51,925 - INFO - Eliminando toda la infraestructura
2025-05-13 19:56:51,925 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-13 19:56:52,030 - INFO - Imagen local eliminada con éxito.
2025-05-13 19:56:52,030 - DEBUG - Eliminando contenedor s1
2025-05-13 19:56:52,045 - ERROR - Error al eliminar el contenedor s1: Command '['lxc', 'delete', 's1', '--force']' returned non-zero exit status 1.
2025-05-13 19:56:52,045 - DEBUG - Eliminando contenedor cl
2025-05-13 19:56:52,969 - INFO - Contenedor eliminado: cl
2025-05-13 19:56:52,969 - DEBUG - Eliminando contenedor lb
2025-05-13 19:56:52,991 - ERROR - Error al eliminar el contenedor lb: Command '['lxc', 'delete', 'lb', '--force']' returned non-zero exit status 1.
2025-05-13 19:56:52,991 - DEBUG - Eliminando contenedor db
2025-05-13 19:56:54,857 - INFO - Contenedor eliminado: db
2025-05-13 19:56:54,857 - DEBUG - Contenedores eliminados correctamente
2025-05-13 19:56:54,857 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-13 19:56:55,148 - INFO - Bridge eliminado: lxdbr1
2025-05-13 19:56:55,149 - INFO - Eliminación completada.
2025-05-13 19:57:30,162 - INFO - Orden recibida: create
2025-05-13 19:57:30,162 - INFO - Número de servidores especificado: 1
2025-05-13 19:57:30,162 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 19:57:30,163 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 19:57:30,163 - DEBUG - Creando imagen base...
2025-05-13 19:57:30,163 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 19:57:30,185 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 19:57:32,131 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 19:57:32,131 - DEBUG - Configurando y creando bridges...
2025-05-13 19:57:32,160 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 19:57:32,235 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 19:57:32,235 - DEBUG - Creando bridge lxdbr1
2025-05-13 19:57:33,915 - INFO - Bridge creado: lxdbr1
2025-05-13 19:57:34,806 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 19:57:38,241 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 19:57:38,241 - DEBUG - Creando contenedores de servidores...
2025-05-13 19:57:38,241 - DEBUG - Intentando crear el contenedor s1
2025-05-13 19:57:48,739 - INFO - Contenedor s1 creado con éxito.
2025-05-13 19:57:48,740 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 19:57:48,821 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 19:57:48,821 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 19:57:48,884 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 19:57:48,885 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 19:57:48,886 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 19:57:48,886 - INFO - Número de servidores guardados correctamente
2025-05-13 19:57:48,886 - DEBUG - Creando balanceador...
2025-05-13 19:57:48,886 - DEBUG - Intentando crear el contenedor lb
2025-05-13 19:57:59,917 - INFO - Contenedor lb creado con éxito.
2025-05-13 19:57:59,917 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 19:57:59,996 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 19:57:59,997 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 19:58:00,040 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 19:58:00,040 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 19:58:00,109 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 19:58:00,109 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 19:58:00,150 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 19:58:00,150 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 19:58:00,665 - INFO - Contenedor iniciado: lb
2025-05-13 19:58:00,665 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 19:58:00,665 - DEBUG - Desactivando cloud-init en lb
2025-05-13 19:58:00,730 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 19:58:00,816 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 19:58:00,816 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 19:58:00,872 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 19:58:05,000 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 19:58:05,000 - DEBUG - Verificando estado antes de detener lb
2025-05-13 19:58:06,517 - INFO - Contenedor parado: lb
2025-05-13 19:58:06,517 - INFO - Balanceador configurado correctamente
2025-05-13 19:58:06,517 - DEBUG - Creando cliente...
2025-05-13 19:58:06,517 - DEBUG - Intentando crear el contenedor cl
2025-05-13 19:58:17,138 - INFO - Contenedor cl creado con éxito.
2025-05-13 19:58:17,138 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 19:58:17,185 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 19:58:17,185 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 19:58:17,230 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 19:58:17,230 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 19:58:17,624 - INFO - Contenedor iniciado: cl
2025-05-13 19:58:17,624 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 19:58:17,624 - DEBUG - Desactivando cloud-init en cl
2025-05-13 19:58:17,671 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 19:58:17,737 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 19:58:17,737 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 19:58:17,824 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 19:58:19,852 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 19:58:19,852 - DEBUG - Verificando estado antes de detener cl
2025-05-13 19:58:23,343 - INFO - Contenedor parado: cl
2025-05-13 19:58:23,344 - INFO - Cliente configurado correctamente
2025-05-13 19:58:23,344 - DEBUG - Intentando crear el contenedor db
2025-05-13 19:58:34,333 - INFO - Contenedor db creado con éxito.
2025-05-13 19:58:34,333 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 19:58:34,414 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 19:58:34,414 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 19:58:34,457 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 19:58:34,457 - INFO - Infraestructura creada correctamente.
2025-05-13 19:58:46,204 - INFO - Orden recibida: start
2025-05-13 19:58:46,204 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 19:58:46,204 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 19:58:46,204 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 19:58:46,204 - INFO - Iniciando todos los contenedores
2025-05-13 19:58:46,204 - DEBUG - Arrancando servidor: s1
2025-05-13 19:58:46,205 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 19:58:46,248 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'start', 's1']' returned non-zero exit status 1.
2025-05-13 19:58:46,248 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 19:58:46,681 - INFO - Contenedor iniciado: cl
2025-05-13 19:58:46,681 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 19:58:46,756 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'start', 'lb']' returned non-zero exit status 1.
2025-05-13 19:58:46,757 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 19:58:46,808 - ERROR - Error al iniciar el contenedor db: Command '['lxc', 'start', 'db']' returned non-zero exit status 1.
2025-05-13 19:58:46,809 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 19:58:46,814 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 19:58:46,816 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 19:58:46,818 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 19:58:46,819 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 20:03:29,839 - INFO - Orden recibida: create
2025-05-13 20:03:29,839 - INFO - Número de servidores especificado: 1
2025-05-13 20:03:29,839 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 20:03:29,839 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 20:03:29,839 - DEBUG - Creando imagen base...
2025-05-13 20:03:29,839 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 20:03:29,851 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 20:03:35,545 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 20:03:35,546 - DEBUG - Configurando y creando bridges...
2025-05-13 20:03:36,385 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 20:03:39,862 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 20:03:39,863 - DEBUG - Creando bridge lxdbr1
2025-05-13 20:03:41,499 - INFO - Bridge creado: lxdbr1
2025-05-13 20:03:42,410 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 20:03:45,879 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 20:03:45,879 - DEBUG - Creando contenedores de servidores...
2025-05-13 20:03:45,879 - DEBUG - Intentando crear el contenedor s1
2025-05-13 20:03:55,806 - INFO - Contenedor s1 creado con éxito.
2025-05-13 20:03:55,806 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 20:03:55,859 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 20:03:55,859 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 20:03:55,895 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 20:03:55,895 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 20:03:55,898 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 20:03:55,898 - INFO - Número de servidores guardados correctamente
2025-05-13 20:03:55,898 - DEBUG - Creando balanceador...
2025-05-13 20:03:55,898 - DEBUG - Intentando crear el contenedor lb
2025-05-13 20:04:06,286 - INFO - Contenedor lb creado con éxito.
2025-05-13 20:04:06,286 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 20:04:06,389 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 20:04:06,390 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 20:04:06,444 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 20:04:06,444 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 20:04:06,514 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 20:04:06,514 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 20:04:06,557 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 20:04:06,557 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 20:04:06,971 - INFO - Contenedor iniciado: lb
2025-05-13 20:04:06,971 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 20:04:06,971 - DEBUG - Desactivando cloud-init en lb
2025-05-13 20:04:07,053 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 20:04:07,097 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 20:04:07,097 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 20:04:07,148 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 20:04:09,021 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 20:04:09,021 - DEBUG - Verificando estado antes de detener lb
2025-05-13 20:04:10,378 - INFO - Contenedor parado: lb
2025-05-13 20:04:10,378 - INFO - Balanceador configurado correctamente
2025-05-13 20:04:10,378 - DEBUG - Creando cliente...
2025-05-13 20:04:10,378 - DEBUG - Intentando crear el contenedor cl
2025-05-13 20:04:20,627 - INFO - Contenedor cl creado con éxito.
2025-05-13 20:04:20,627 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 20:04:20,675 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 20:04:20,675 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 20:04:20,708 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 20:04:20,708 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 20:04:21,119 - INFO - Contenedor iniciado: cl
2025-05-13 20:04:21,119 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 20:04:21,119 - DEBUG - Desactivando cloud-init en cl
2025-05-13 20:04:21,176 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 20:04:21,233 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 20:04:21,233 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 20:04:21,284 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 20:04:23,307 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 20:04:23,308 - DEBUG - Verificando estado antes de detener cl
2025-05-13 20:04:24,724 - INFO - Contenedor parado: cl
2025-05-13 20:04:24,724 - INFO - Cliente configurado correctamente
2025-05-13 20:04:24,724 - DEBUG - Intentando crear el contenedor db
2025-05-13 20:04:35,008 - INFO - Contenedor db creado con éxito.
2025-05-13 20:04:35,008 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 20:04:35,128 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 20:04:35,128 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 20:04:35,194 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 20:04:35,195 - INFO - Infraestructura creada correctamente.
2025-05-13 20:04:44,559 - INFO - Orden recibida: list
2025-05-13 20:04:44,559 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:04:44,560 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:04:44,560 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:04:44,560 - INFO - Listando contenedores
2025-05-13 20:04:44,579 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 20:04:48,479 - INFO - Orden recibida: start
2025-05-13 20:04:48,480 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:04:48,480 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:04:48,480 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:04:48,480 - INFO - Iniciando todos los contenedores
2025-05-13 20:04:48,480 - DEBUG - Arrancando servidor: s1
2025-05-13 20:04:48,480 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 20:04:48,804 - INFO - Contenedor iniciado: s1
2025-05-13 20:04:48,805 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 20:04:49,198 - INFO - Contenedor iniciado: cl
2025-05-13 20:04:49,198 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 20:04:49,579 - INFO - Contenedor iniciado: lb
2025-05-13 20:04:49,579 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 20:04:49,875 - INFO - Contenedor iniciado: db
2025-05-13 20:04:49,875 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 20:04:49,878 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 20:04:49,879 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 20:04:49,879 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 20:04:49,881 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 20:04:55,779 - INFO - Orden recibida: list
2025-05-13 20:04:55,779 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:04:55,779 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:04:55,780 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:04:55,780 - INFO - Listando contenedores
2025-05-13 20:04:55,804 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 20:05:54,969 - INFO - Orden recibida: stop_server
2025-05-13 20:05:54,969 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:05:54,969 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:05:54,969 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:05:54,969 - INFO - Deteniendo servidor individual: s1
2025-05-13 20:05:54,969 - INFO - Solicitado parar servidor: s1
2025-05-13 20:05:54,984 - DEBUG - Verificando estado antes de detener s1
2025-05-13 20:06:03,869 - INFO - Contenedor parado: s1
2025-05-13 20:06:03,869 - INFO - Servidor s1 detenido correctamente.
2025-05-13 20:06:23,007 - INFO - Orden recibida: start_server
2025-05-13 20:06:23,007 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:06:23,007 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:06:23,007 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:06:23,007 - INFO - Iniciando servidor individual: s1
2025-05-13 20:06:23,007 - INFO - Solicitado arrancar servidor: s1
2025-05-13 20:06:23,023 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 20:06:23,322 - INFO - Contenedor iniciado: s1
2025-05-13 20:06:23,322 - INFO - Servidor s1 corriendo correctamente.
2025-05-13 20:06:23,323 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 20:11:33,245 - INFO - Orden recibida: delete
2025-05-13 20:11:33,245 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:11:33,246 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:11:33,246 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:11:33,246 - INFO - Eliminando toda la infraestructura
2025-05-13 20:11:33,246 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-13 20:11:33,356 - INFO - Imagen local eliminada con éxito.
2025-05-13 20:11:33,356 - DEBUG - Eliminando contenedor s1
2025-05-13 20:11:35,160 - INFO - Contenedor eliminado: s1
2025-05-13 20:11:35,160 - DEBUG - Eliminando contenedor cl
2025-05-13 20:11:37,177 - INFO - Contenedor eliminado: cl
2025-05-13 20:11:37,177 - DEBUG - Eliminando contenedor lb
2025-05-13 20:11:39,123 - INFO - Contenedor eliminado: lb
2025-05-13 20:11:39,123 - DEBUG - Eliminando contenedor db
2025-05-13 20:11:40,901 - INFO - Contenedor eliminado: db
2025-05-13 20:11:40,902 - DEBUG - Contenedores eliminados correctamente
2025-05-13 20:11:40,902 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-13 20:11:41,265 - INFO - Bridge eliminado: lxdbr1
2025-05-13 20:11:41,265 - INFO - Eliminación completada.
2025-05-13 20:12:42,645 - INFO - Orden recibida: create
2025-05-13 20:12:42,645 - INFO - Número de servidores especificado: 1
2025-05-13 20:12:42,645 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 20:12:42,645 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 20:12:42,645 - DEBUG - Creando imagen base...
2025-05-13 20:12:42,645 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 20:12:42,665 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 20:12:44,401 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 20:12:44,401 - DEBUG - Configurando y creando bridges...
2025-05-13 20:12:44,435 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 20:12:44,507 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 20:12:44,507 - DEBUG - Creando bridge lxdbr1
2025-05-13 20:12:46,155 - INFO - Bridge creado: lxdbr1
2025-05-13 20:12:47,001 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 20:12:50,452 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 20:12:50,453 - DEBUG - Creando contenedores de servidores...
2025-05-13 20:12:50,453 - DEBUG - Intentando crear el contenedor s1
2025-05-13 20:13:00,723 - INFO - Contenedor s1 creado con éxito.
2025-05-13 20:13:00,723 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 20:13:00,773 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 20:13:00,773 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 20:13:00,807 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 20:13:00,807 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 20:13:00,808 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 20:13:00,808 - INFO - Número de servidores guardados correctamente
2025-05-13 20:13:00,808 - DEBUG - Creando balanceador...
2025-05-13 20:13:00,808 - DEBUG - Intentando crear el contenedor lb
2025-05-13 20:13:11,438 - INFO - Contenedor lb creado con éxito.
2025-05-13 20:13:11,438 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 20:13:11,489 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 20:13:11,489 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 20:13:11,524 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 20:13:11,524 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 20:13:11,582 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 20:13:11,582 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 20:13:11,622 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 20:13:11,623 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 20:13:12,015 - INFO - Contenedor iniciado: lb
2025-05-13 20:13:12,015 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 20:13:12,015 - DEBUG - Desactivando cloud-init en lb
2025-05-13 20:13:12,077 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 20:13:12,161 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 20:13:12,161 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 20:13:12,240 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 20:13:14,129 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 20:13:14,129 - DEBUG - Verificando estado antes de detener lb
2025-05-13 20:13:15,484 - INFO - Contenedor parado: lb
2025-05-13 20:13:15,484 - INFO - Balanceador configurado correctamente
2025-05-13 20:13:15,484 - DEBUG - Creando cliente...
2025-05-13 20:13:15,485 - DEBUG - Intentando crear el contenedor cl
2025-05-13 20:13:25,948 - INFO - Contenedor cl creado con éxito.
2025-05-13 20:13:25,948 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 20:13:26,006 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 20:13:26,006 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 20:13:26,044 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 20:13:26,044 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 20:13:26,458 - INFO - Contenedor iniciado: cl
2025-05-13 20:13:26,459 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 20:13:26,459 - DEBUG - Desactivando cloud-init en cl
2025-05-13 20:13:26,530 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 20:13:26,622 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 20:13:26,622 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 20:13:26,681 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 20:13:28,473 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 20:13:28,473 - DEBUG - Verificando estado antes de detener cl
2025-05-13 20:13:29,929 - INFO - Contenedor parado: cl
2025-05-13 20:13:29,929 - INFO - Cliente configurado correctamente
2025-05-13 20:13:29,929 - DEBUG - Intentando crear el contenedor db
2025-05-13 20:13:40,857 - INFO - Contenedor db creado con éxito.
2025-05-13 20:13:40,857 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 20:13:40,927 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 20:13:40,927 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 20:13:40,960 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 20:13:40,960 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 20:13:41,222 - INFO - Contenedor iniciado: db
2025-05-13 20:13:41,222 - DEBUG - Iniciando cambio de netplan en db
2025-05-13 20:13:42,078 - CRITICAL - Error crítico en creación de infraestructura: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 101, in create_all
    install_mongoDB(name=VM_NAMES["database"])
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/database.py", line 25, in install_mongoDB
    subprocess.run(["lxc", "exec", name, "--", "apt", "install", "-y", "mongodb"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
2025-05-13 20:25:31,849 - INFO - Orden recibida: create
2025-05-13 20:25:31,849 - INFO - Número de servidores especificado: 1
2025-05-13 20:25:31,849 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 20:25:31,849 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 20:25:31,849 - DEBUG - Creando imagen base...
2025-05-13 20:25:31,849 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 20:25:31,868 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-13 20:25:31,868 - DEBUG - Configurando y creando bridges...
2025-05-13 20:25:31,906 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 20:25:31,984 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 20:25:31,984 - DEBUG - Creando bridge lxdbr1
2025-05-13 20:25:31,996 - WARNING - El bridge lxdbr1 ya existe.
2025-05-13 20:25:32,042 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 20:25:32,110 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 20:25:32,110 - DEBUG - Creando contenedores de servidores...
2025-05-13 20:25:32,110 - DEBUG - Intentando crear el contenedor s1
2025-05-13 20:25:32,126 - WARNING - El contenedor s1 ya existe.
2025-05-13 20:25:32,126 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 20:25:32,146 - WARNING - El contenedor s1 ya está conectado a lxdbr0 por eth0
2025-05-13 20:25:32,147 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 20:25:32,177 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 20:25:32,177 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 20:25:32,178 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 20:25:32,178 - INFO - Número de servidores guardados correctamente
2025-05-13 20:25:32,178 - DEBUG - Creando balanceador...
2025-05-13 20:25:32,179 - DEBUG - Intentando crear el contenedor lb
2025-05-13 20:25:32,200 - WARNING - El contenedor lb ya existe.
2025-05-13 20:25:32,200 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 20:25:32,212 - WARNING - El contenedor lb ya está conectado a lxdbr0 por eth0
2025-05-13 20:25:32,212 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 20:25:32,246 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 20:25:32,247 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 20:25:32,259 - WARNING - El contenedor lb ya está conectado a lxdbr1 por eth1
2025-05-13 20:25:32,260 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 20:25:32,293 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 20:25:32,293 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 20:25:32,681 - INFO - Contenedor iniciado: lb
2025-05-13 20:25:32,681 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 20:25:32,681 - DEBUG - Desactivando cloud-init en lb
2025-05-13 20:25:32,750 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 20:25:32,845 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 20:25:32,845 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 20:25:32,903 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 20:25:34,557 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 20:25:34,557 - DEBUG - Verificando estado antes de detener lb
2025-05-13 20:25:35,966 - INFO - Contenedor parado: lb
2025-05-13 20:25:35,967 - INFO - Balanceador configurado correctamente
2025-05-13 20:25:35,967 - DEBUG - Creando cliente...
2025-05-13 20:25:35,967 - DEBUG - Intentando crear el contenedor cl
2025-05-13 20:25:35,981 - WARNING - El contenedor cl ya existe.
2025-05-13 20:25:35,981 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 20:25:35,994 - WARNING - El contenedor cl ya está conectado a lxdbr1 por eth1
2025-05-13 20:25:35,994 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 20:25:36,041 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 20:25:36,041 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 20:25:36,451 - INFO - Contenedor iniciado: cl
2025-05-13 20:25:36,451 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 20:25:36,451 - DEBUG - Desactivando cloud-init en cl
2025-05-13 20:25:36,508 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 20:25:36,590 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 20:25:36,591 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 20:25:36,645 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 20:25:38,332 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 20:25:38,333 - DEBUG - Verificando estado antes de detener cl
2025-05-13 20:25:39,780 - INFO - Contenedor parado: cl
2025-05-13 20:25:39,780 - INFO - Cliente configurado correctamente
2025-05-13 20:25:39,780 - DEBUG - Intentando crear el contenedor db
2025-05-13 20:25:39,801 - WARNING - El contenedor db ya existe.
2025-05-13 20:25:39,801 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 20:25:39,818 - WARNING - El contenedor db ya está conectado a lxdbr0 por eth0
2025-05-13 20:25:39,820 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 20:25:39,853 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 20:25:39,853 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 20:25:39,873 - INFO - Contenedor db ya está en ejecución.
2025-05-13 20:25:39,873 - DEBUG - Iniciando instalación de MongoDB en db
2025-05-13 20:26:49,237 - INFO - MongoDB instalado correctamente en db
2025-05-13 20:26:49,237 - DEBUG - Verificando estado antes de detener db
2025-05-13 20:26:53,474 - INFO - Contenedor parado: db
2025-05-13 20:26:53,474 - INFO - Infraestructura creada correctamente.
2025-05-13 20:28:10,426 - INFO - Orden recibida: configure
2025-05-13 20:28:10,426 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:28:10,426 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:28:10,427 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:28:41,867 - INFO - Orden recibida: configure
2025-05-13 20:28:41,867 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:28:41,867 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:28:41,867 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:43:43,231 - INFO - Orden recibida: configure
2025-05-13 20:43:43,231 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 20:43:43,232 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 20:43:43,232 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 20:43:43,232 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 20:43:43,250 - INFO - Contenedor s1 ya está en ejecución.
2025-05-13 20:47:17,733 - DEBUG - Verificando estado antes de detener s1
2025-05-13 20:47:19,443 - INFO - Contenedor parado: s1
2025-05-13 20:47:19,443 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 20:47:19,468 - INFO - Contenedor lb ya está en ejecución.
2025-05-13 21:06:42,125 - INFO - Orden recibida: configure
2025-05-13 21:06:42,125 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:06:42,126 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:06:42,126 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:06:42,126 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:06:42,155 - INFO - Contenedor lb ya está en ejecución.
2025-05-13 21:07:35,491 - DEBUG - Escribiendo nueva configuración de haproxy en lb
2025-05-13 21:07:35,559 - DEBUG - Verficiando si el fichero de configuración del lb es válido
2025-05-13 21:07:35,583 - DEBUG - Verficiando si el fichero de configuración del lb es válido
2025-05-13 21:07:35,602 - DEBUG - Verificando estado antes de detener lb
2025-05-13 21:07:40,147 - INFO - Contenedor parado: lb
2025-05-13 21:12:07,305 - INFO - Orden recibida: delete
2025-05-13 21:12:07,305 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:12:07,306 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:12:07,306 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:12:07,306 - INFO - Eliminando toda la infraestructura
2025-05-13 21:12:07,306 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-13 21:12:07,394 - INFO - Imagen local eliminada con éxito.
2025-05-13 21:12:07,395 - DEBUG - Eliminando contenedor s1
2025-05-13 21:12:11,269 - INFO - Contenedor eliminado: s1
2025-05-13 21:12:11,269 - DEBUG - Eliminando contenedor cl
2025-05-13 21:12:13,210 - INFO - Contenedor eliminado: cl
2025-05-13 21:12:13,210 - DEBUG - Eliminando contenedor lb
2025-05-13 21:12:15,331 - INFO - Contenedor eliminado: lb
2025-05-13 21:12:15,331 - DEBUG - Eliminando contenedor db
2025-05-13 21:12:17,220 - INFO - Contenedor eliminado: db
2025-05-13 21:12:17,220 - DEBUG - Contenedores eliminados correctamente
2025-05-13 21:12:17,220 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-13 21:12:17,558 - INFO - Bridge eliminado: lxdbr1
2025-05-13 21:12:17,559 - INFO - Eliminación completada.
2025-05-13 21:14:13,183 - INFO - Orden recibida: create
2025-05-13 21:14:13,183 - INFO - Número de servidores especificado: 1
2025-05-13 21:14:13,183 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 21:14:13,183 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 21:14:13,183 - DEBUG - Creando imagen base...
2025-05-13 21:14:13,184 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 21:14:13,206 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 21:14:15,028 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 21:14:15,028 - DEBUG - Configurando y creando bridges...
2025-05-13 21:14:15,060 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 21:14:15,148 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 21:14:15,149 - DEBUG - Creando bridge lxdbr1
2025-05-13 21:14:16,852 - INFO - Bridge creado: lxdbr1
2025-05-13 21:14:17,713 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 21:14:21,034 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 21:14:21,034 - DEBUG - Creando contenedores de servidores...
2025-05-13 21:14:21,034 - DEBUG - Intentando crear el contenedor s1
2025-05-13 21:14:31,930 - INFO - Contenedor s1 creado con éxito.
2025-05-13 21:14:31,930 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 21:14:31,986 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 21:14:31,986 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 21:14:32,018 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 21:14:32,018 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 21:14:32,019 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 21:14:32,019 - INFO - Número de servidores guardados correctamente
2025-05-13 21:14:32,019 - DEBUG - Creando balanceador...
2025-05-13 21:14:32,019 - DEBUG - Intentando crear el contenedor lb
2025-05-13 21:14:42,321 - INFO - Contenedor lb creado con éxito.
2025-05-13 21:14:42,321 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 21:14:42,413 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 21:14:42,413 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 21:14:42,445 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 21:14:42,445 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 21:14:42,499 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 21:14:42,500 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 21:14:42,536 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 21:14:42,536 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:14:42,902 - INFO - Contenedor iniciado: lb
2025-05-13 21:14:42,903 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 21:14:42,903 - DEBUG - Desactivando cloud-init en lb
2025-05-13 21:14:42,962 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 21:14:43,044 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 21:14:43,044 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 21:14:43,093 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 21:14:44,978 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 21:14:44,978 - DEBUG - Verificando estado antes de detener lb
2025-05-13 21:14:46,348 - INFO - Contenedor parado: lb
2025-05-13 21:14:46,349 - INFO - Balanceador configurado correctamente
2025-05-13 21:14:46,349 - DEBUG - Creando cliente...
2025-05-13 21:14:46,349 - DEBUG - Intentando crear el contenedor cl
2025-05-13 21:14:56,820 - INFO - Contenedor cl creado con éxito.
2025-05-13 21:14:56,821 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 21:14:56,876 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 21:14:56,877 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 21:14:56,908 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 21:14:56,908 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 21:14:57,308 - INFO - Contenedor iniciado: cl
2025-05-13 21:14:57,308 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 21:14:57,308 - DEBUG - Desactivando cloud-init en cl
2025-05-13 21:14:57,358 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 21:14:57,418 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 21:14:57,419 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 21:14:57,460 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 21:14:59,314 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 21:14:59,314 - DEBUG - Verificando estado antes de detener cl
2025-05-13 21:15:00,713 - INFO - Contenedor parado: cl
2025-05-13 21:15:00,713 - INFO - Cliente configurado correctamente
2025-05-13 21:15:00,713 - DEBUG - Intentando crear el contenedor db
2025-05-13 21:15:11,745 - INFO - Contenedor db creado con éxito.
2025-05-13 21:15:11,745 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 21:15:11,834 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 21:15:11,834 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 21:15:11,907 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 21:15:11,908 - INFO - Infraestructura creada correctamente.
2025-05-13 21:15:36,479 - INFO - Orden recibida: ls
2025-05-13 21:15:36,480 - ERROR - Orden no válida: ls
2025-05-13 21:15:40,013 - INFO - Orden recibida: list
2025-05-13 21:15:40,013 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:15:40,013 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:15:40,013 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:15:40,014 - INFO - Listando contenedores
2025-05-13 21:15:40,041 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:15:43,203 - INFO - Orden recibida: start
2025-05-13 21:15:43,204 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:15:43,204 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:15:43,204 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:15:43,204 - INFO - Iniciando todos los contenedores
2025-05-13 21:15:43,204 - DEBUG - Arrancando servidor: s1
2025-05-13 21:15:43,204 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 21:15:44,018 - INFO - Contenedor iniciado: s1
2025-05-13 21:15:44,018 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 21:15:44,382 - INFO - Contenedor iniciado: cl
2025-05-13 21:15:44,382 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:15:44,757 - INFO - Contenedor iniciado: lb
2025-05-13 21:15:44,757 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 21:15:45,204 - INFO - Contenedor iniciado: db
2025-05-13 21:15:45,204 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 21:15:45,206 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 21:15:45,208 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 21:15:45,217 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 21:15:45,220 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 21:15:51,156 - INFO - Orden recibida: list
2025-05-13 21:15:51,156 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:15:51,157 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:15:51,157 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:15:51,157 - INFO - Listando contenedores
2025-05-13 21:15:51,191 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:15:57,748 - INFO - Orden recibida: configure
2025-05-13 21:15:57,748 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:15:57,748 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:15:57,748 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:15:57,748 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 21:15:57,770 - INFO - Contenedor s1 ya está en ejecución.
2025-05-13 21:20:41,202 - DEBUG - Verificando estado antes de detener s1
2025-05-13 21:22:12,673 - INFO - Contenedor parado: s1
2025-05-13 21:22:12,673 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:22:12,701 - INFO - Contenedor lb ya está en ejecución.
2025-05-13 21:22:33,580 - DEBUG - Escribiendo nueva configuración de haproxy en balanceador
2025-05-13 21:22:33,632 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 21:22:33,643 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 21:22:33,653 - DEBUG - Verificando estado antes de detener lb
2025-05-13 21:22:37,995 - INFO - Contenedor parado: lb
2025-05-13 21:22:37,995 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 21:22:38,017 - INFO - Contenedor db ya está en ejecución.
2025-05-13 21:22:38,017 - DEBUG - Iniciando cambio de netplan en db
2025-05-13 21:23:14,314 - INFO - MongoDB instalado correctamente en db
2025-05-13 21:23:14,369 - INFO - Archivo mongodb.conf modificado correctamente en db
2025-05-13 21:23:14,369 - DEBUG - Reiniciando contenedor db para aplicar cambios
2025-05-13 21:23:18,738 - INFO - Configuración de MongoDB aplicada correctamente en el contenedor db
2025-05-13 21:23:18,738 - DEBUG - Verificando estado antes de detener db
2025-05-13 21:23:20,031 - INFO - Contenedor parado: db
2025-05-13 21:23:25,758 - INFO - Orden recibida: list
2025-05-13 21:23:25,758 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:23:25,759 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:23:25,759 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:23:25,759 - INFO - Listando contenedores
2025-05-13 21:23:25,781 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:23:30,496 - INFO - Orden recibida: start
2025-05-13 21:23:30,497 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:23:30,497 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:23:30,497 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:23:30,497 - INFO - Iniciando todos los contenedores
2025-05-13 21:23:30,497 - DEBUG - Arrancando servidor: s1
2025-05-13 21:23:30,497 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 21:23:30,792 - INFO - Contenedor iniciado: s1
2025-05-13 21:23:30,792 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 21:23:30,810 - INFO - Contenedor cl ya está en ejecución.
2025-05-13 21:23:30,810 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:23:31,234 - INFO - Contenedor iniciado: lb
2025-05-13 21:23:31,234 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 21:23:31,575 - INFO - Contenedor iniciado: db
2025-05-13 21:23:31,575 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 21:23:31,579 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 21:23:31,580 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 21:23:31,581 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 21:23:31,584 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 21:24:29,512 - INFO - Orden recibida: list
2025-05-13 21:24:29,512 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:24:29,513 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:24:29,513 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:24:29,513 - INFO - Listando contenedores
2025-05-13 21:24:29,555 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:29:17,427 - INFO - Orden recibida: list
2025-05-13 21:29:17,428 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:29:17,428 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:29:17,428 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:29:17,428 - INFO - Listando contenedores
2025-05-13 21:29:17,470 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:35:15,191 - INFO - Orden recibida: delete
2025-05-13 21:35:15,191 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:35:15,192 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:35:15,192 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:35:15,192 - INFO - Eliminando toda la infraestructura
2025-05-13 21:35:15,192 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-13 21:35:15,267 - INFO - Imagen local eliminada con éxito.
2025-05-13 21:35:15,267 - DEBUG - Eliminando contenedor s1
2025-05-13 21:35:17,850 - INFO - Contenedor eliminado: s1
2025-05-13 21:35:17,850 - DEBUG - Eliminando contenedor cl
2025-05-13 21:35:19,764 - INFO - Contenedor eliminado: cl
2025-05-13 21:35:19,764 - DEBUG - Eliminando contenedor lb
2025-05-13 21:35:21,940 - INFO - Contenedor eliminado: lb
2025-05-13 21:35:21,940 - DEBUG - Eliminando contenedor db
2025-05-13 21:35:23,802 - INFO - Contenedor eliminado: db
2025-05-13 21:35:23,802 - DEBUG - Contenedores eliminados correctamente
2025-05-13 21:35:23,802 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-13 21:35:24,130 - INFO - Bridge eliminado: lxdbr1
2025-05-13 21:35:24,131 - INFO - Eliminación completada.
2025-05-13 21:35:29,853 - INFO - Orden recibida: create
2025-05-13 21:35:29,853 - INFO - Número de servidores especificado: 1
2025-05-13 21:35:29,853 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 21:35:29,853 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 21:35:29,853 - DEBUG - Creando imagen base...
2025-05-13 21:35:29,853 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 21:35:29,870 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 21:35:31,560 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 21:35:31,560 - DEBUG - Configurando y creando bridges...
2025-05-13 21:35:31,590 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 21:35:31,657 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 21:35:31,658 - DEBUG - Creando bridge lxdbr1
2025-05-13 21:35:33,289 - INFO - Bridge creado: lxdbr1
2025-05-13 21:35:34,136 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 21:35:37,572 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 21:35:37,572 - DEBUG - Creando contenedores de servidores...
2025-05-13 21:35:37,572 - DEBUG - Intentando crear el contenedor s1
2025-05-13 21:35:47,446 - INFO - Contenedor s1 creado con éxito.
2025-05-13 21:35:47,446 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 21:35:47,491 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 21:35:47,491 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 21:35:47,522 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 21:35:47,522 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 21:35:47,524 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 21:35:47,524 - INFO - Número de servidores guardados correctamente
2025-05-13 21:35:47,524 - DEBUG - Creando balanceador...
2025-05-13 21:35:47,524 - DEBUG - Intentando crear el contenedor lb
2025-05-13 21:35:57,656 - INFO - Contenedor lb creado con éxito.
2025-05-13 21:35:57,657 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 21:35:57,703 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 21:35:57,703 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 21:35:57,741 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 21:35:57,741 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 21:35:57,797 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 21:35:57,797 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 21:35:57,834 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 21:35:57,834 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:35:58,172 - INFO - Contenedor iniciado: lb
2025-05-13 21:35:58,172 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 21:35:58,172 - DEBUG - Desactivando cloud-init en lb
2025-05-13 21:35:58,229 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 21:35:58,294 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 21:35:58,294 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 21:35:58,340 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 21:36:00,215 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 21:36:00,215 - DEBUG - Verificando estado antes de detener lb
2025-05-13 21:36:01,623 - INFO - Contenedor parado: lb
2025-05-13 21:36:01,623 - INFO - Balanceador configurado correctamente
2025-05-13 21:36:01,623 - DEBUG - Creando cliente...
2025-05-13 21:36:01,624 - DEBUG - Intentando crear el contenedor cl
2025-05-13 21:36:12,015 - INFO - Contenedor cl creado con éxito.
2025-05-13 21:36:12,015 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 21:36:12,059 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 21:36:12,059 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 21:36:12,093 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 21:36:12,093 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 21:36:12,493 - INFO - Contenedor iniciado: cl
2025-05-13 21:36:12,493 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 21:36:12,493 - DEBUG - Desactivando cloud-init en cl
2025-05-13 21:36:12,548 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 21:36:12,604 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 21:36:12,604 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 21:36:12,652 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 21:36:14,445 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 21:36:14,445 - DEBUG - Verificando estado antes de detener cl
2025-05-13 21:36:15,893 - INFO - Contenedor parado: cl
2025-05-13 21:36:15,893 - INFO - Cliente configurado correctamente
2025-05-13 21:36:15,893 - DEBUG - Intentando crear el contenedor db
2025-05-13 21:36:26,179 - INFO - Contenedor db creado con éxito.
2025-05-13 21:36:26,180 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 21:36:26,241 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 21:36:26,241 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 21:36:26,282 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 21:36:26,282 - INFO - Infraestructura creada correctamente.
2025-05-13 21:36:36,795 - INFO - Orden recibida: list
2025-05-13 21:36:36,795 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:36:36,796 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:36:36,796 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:36:36,796 - INFO - Listando contenedores
2025-05-13 21:36:36,816 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:36:39,894 - INFO - Orden recibida: start
2025-05-13 21:36:39,894 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:36:39,894 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:36:39,894 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:36:39,894 - INFO - Iniciando todos los contenedores
2025-05-13 21:36:39,894 - DEBUG - Arrancando servidor: s1
2025-05-13 21:36:39,895 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 21:36:40,168 - INFO - Contenedor iniciado: s1
2025-05-13 21:36:40,168 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 21:36:40,501 - INFO - Contenedor iniciado: cl
2025-05-13 21:36:40,501 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 21:36:40,923 - INFO - Contenedor iniciado: lb
2025-05-13 21:36:40,923 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 21:36:41,252 - INFO - Contenedor iniciado: db
2025-05-13 21:36:41,252 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 21:36:41,256 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 21:36:41,270 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 21:36:41,300 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 21:36:41,320 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 21:36:43,687 - INFO - Orden recibida: list
2025-05-13 21:36:43,687 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:36:43,687 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:36:43,687 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:36:43,687 - INFO - Listando contenedores
2025-05-13 21:36:43,802 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 21:37:20,989 - INFO - Orden recibida: configure
2025-05-13 21:37:20,989 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 21:37:20,989 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 21:37:20,989 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 21:37:20,989 - DEBUG - Iniciando cambio de netplan en db
2025-05-13 21:38:08,570 - INFO - MongoDB instalado correctamente en db
2025-05-13 21:38:08,626 - INFO - Archivo mongodb.conf modificado correctamente en db
2025-05-13 21:38:08,626 - DEBUG - Reiniciando contenedor db para aplicar cambios
2025-05-13 21:38:13,095 - INFO - Configuración de MongoDB aplicada correctamente en el contenedor db
2025-05-13 21:41:56,616 - DEBUG - Escribiendo nueva configuración de haproxy en balanceador
2025-05-13 21:41:56,690 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 21:41:56,704 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 22:07:12,061 - INFO - Orden recibida: create
2025-05-13 22:07:12,061 - INFO - Número de servidores especificado: 1
2025-05-13 22:07:12,061 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 22:07:12,062 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 22:07:12,062 - DEBUG - Creando imagen base...
2025-05-13 22:07:12,062 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 22:07:13,363 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 22:07:18,631 - INFO - Orden recibida: create
2025-05-13 22:07:18,631 - INFO - Número de servidores especificado: 1
2025-05-13 22:07:18,631 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-13 22:07:18,631 - DEBUG - Parámetro recibido n_servers=1
2025-05-13 22:07:18,631 - DEBUG - Creando imagen base...
2025-05-13 22:07:18,631 - DEBUG - Verificando si la imagen ya está importada...
2025-05-13 22:07:18,643 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-13 22:07:22,955 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-13 22:07:22,955 - DEBUG - Configurando y creando bridges...
2025-05-13 22:07:23,809 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-13 22:07:27,148 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-13 22:07:27,148 - DEBUG - Creando bridge lxdbr1
2025-05-13 22:07:28,788 - INFO - Bridge creado: lxdbr1
2025-05-13 22:07:29,642 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-13 22:07:33,106 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-13 22:07:33,106 - DEBUG - Creando contenedores de servidores...
2025-05-13 22:07:33,106 - DEBUG - Intentando crear el contenedor s1
2025-05-13 22:07:42,488 - INFO - Contenedor s1 creado con éxito.
2025-05-13 22:07:42,488 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-13 22:07:42,534 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-13 22:07:42,534 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-13 22:07:42,559 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-13 22:07:42,559 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-13 22:07:42,561 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-13 22:07:42,561 - INFO - Número de servidores guardados correctamente
2025-05-13 22:07:42,561 - DEBUG - Creando balanceador...
2025-05-13 22:07:42,561 - DEBUG - Intentando crear el contenedor lb
2025-05-13 22:07:51,935 - INFO - Contenedor lb creado con éxito.
2025-05-13 22:07:51,935 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-13 22:07:51,993 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-13 22:07:51,994 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-13 22:07:52,024 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-13 22:07:52,024 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-13 22:07:52,099 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-13 22:07:52,099 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-13 22:07:52,161 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-13 22:07:52,161 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 22:07:52,578 - INFO - Contenedor iniciado: lb
2025-05-13 22:07:52,578 - DEBUG - Iniciando cambio de netplan en lb
2025-05-13 22:07:52,579 - DEBUG - Desactivando cloud-init en lb
2025-05-13 22:07:52,624 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-13 22:07:52,684 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-13 22:07:52,684 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-13 22:07:52,762 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-13 22:07:57,336 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-13 22:07:57,336 - DEBUG - Verificando estado antes de detener lb
2025-05-13 22:07:58,918 - INFO - Contenedor parado: lb
2025-05-13 22:07:58,918 - INFO - Balanceador configurado correctamente
2025-05-13 22:07:58,918 - DEBUG - Creando cliente...
2025-05-13 22:07:58,918 - DEBUG - Intentando crear el contenedor cl
2025-05-13 22:08:08,311 - INFO - Contenedor cl creado con éxito.
2025-05-13 22:08:08,311 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-13 22:08:08,358 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-13 22:08:08,358 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-13 22:08:08,403 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-13 22:08:08,403 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 22:08:08,837 - INFO - Contenedor iniciado: cl
2025-05-13 22:08:08,837 - DEBUG - Iniciando cambio de netplan en cl
2025-05-13 22:08:08,837 - DEBUG - Desactivando cloud-init en cl
2025-05-13 22:08:08,883 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-13 22:08:09,079 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-13 22:08:09,079 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-13 22:08:09,441 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-13 22:08:13,736 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-13 22:08:13,736 - DEBUG - Verificando estado antes de detener cl
2025-05-13 22:08:16,155 - INFO - Contenedor parado: cl
2025-05-13 22:08:16,155 - INFO - Cliente configurado correctamente
2025-05-13 22:08:16,155 - DEBUG - Intentando crear el contenedor db
2025-05-13 22:08:25,647 - INFO - Contenedor db creado con éxito.
2025-05-13 22:08:25,647 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-13 22:08:25,697 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-13 22:08:25,697 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-13 22:08:25,728 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-13 22:08:25,728 - INFO - Infraestructura creada correctamente.
2025-05-13 22:11:44,632 - INFO - Orden recibida: start
2025-05-13 22:11:44,632 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 22:11:44,633 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 22:11:44,633 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 22:11:44,633 - INFO - Iniciando todos los contenedores
2025-05-13 22:11:44,633 - DEBUG - Arrancando servidor: s1
2025-05-13 22:11:44,633 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-13 22:11:44,905 - INFO - Contenedor iniciado: s1
2025-05-13 22:11:44,905 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-13 22:11:45,293 - INFO - Contenedor iniciado: cl
2025-05-13 22:11:45,293 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-13 22:11:45,676 - INFO - Contenedor iniciado: lb
2025-05-13 22:11:45,676 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-13 22:11:45,988 - INFO - Contenedor iniciado: db
2025-05-13 22:11:45,988 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-13 22:11:45,994 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-13 22:11:45,999 - INFO - Consola del contenedor cl abierta correctamente
2025-05-13 22:11:46,001 - INFO - Consola del contenedor lb abierta correctamente
2025-05-13 22:11:46,011 - INFO - Consola del contenedor db abierta correctamente
2025-05-13 22:11:49,884 - INFO - Orden recibida: list
2025-05-13 22:11:49,885 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 22:11:49,885 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 22:11:49,885 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 22:11:49,885 - INFO - Listando contenedores
2025-05-13 22:11:49,906 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-13 22:11:56,182 - INFO - Orden recibida: configure
2025-05-13 22:11:56,182 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 22:11:56,182 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 22:11:56,182 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 22:11:56,182 - DEBUG - Iniciando cambio de netplan en db
2025-05-13 22:14:14,558 - INFO - MongoDB instalado correctamente en db
2025-05-13 22:14:14,603 - INFO - Archivo mongodb.conf modificado correctamente en db
2025-05-13 22:14:14,603 - DEBUG - Reiniciando contenedor db para aplicar cambios
2025-05-13 22:14:16,579 - INFO - Configuración de MongoDB aplicada correctamente en el contenedor db
2025-05-13 22:19:04,204 - DEBUG - Escribiendo nueva configuración de haproxy en balanceador
2025-05-13 22:19:04,250 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 22:19:04,258 - DEBUG - Verficiando si el fichero de configuración del balanceador es válido
2025-05-13 22:19:45,749 - INFO - Orden recibida: list
2025-05-13 22:19:45,749 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-13 22:19:45,750 - INFO - Número de servidores 1 cargados correctamente.
2025-05-13 22:19:45,750 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-13 22:19:45,750 - INFO - Listando contenedores
2025-05-13 22:19:45,770 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-14 12:49:06,665 - INFO - Orden recibida: create
2025-05-14 12:49:06,665 - INFO - Número de servidores especificado: 1
2025-05-14 12:49:06,665 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-14 12:49:06,665 - DEBUG - Parámetro recibido n_servers=1
2025-05-14 12:49:06,665 - DEBUG - Creando imagen base...
2025-05-14 12:49:06,665 - DEBUG - Verificando si la imagen ya está importada...
2025-05-14 12:49:06,691 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-14 12:49:12,401 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-14 12:49:12,401 - DEBUG - Configurando y creando bridges...
2025-05-14 12:49:13,246 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-14 12:49:16,625 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-14 12:49:16,625 - DEBUG - Creando bridge lxdbr1
2025-05-14 12:49:18,287 - INFO - Bridge creado: lxdbr1
2025-05-14 12:49:19,203 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-14 12:49:22,628 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-14 12:49:22,628 - DEBUG - Creando contenedores de servidores...
2025-05-14 12:49:22,628 - DEBUG - Intentando crear el contenedor s1
2025-05-14 12:49:32,399 - INFO - Contenedor s1 creado con éxito.
2025-05-14 12:49:32,399 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-14 12:49:32,449 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-14 12:49:32,449 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-14 12:49:32,484 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-14 12:49:32,484 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-14 12:49:32,486 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-14 12:49:32,486 - INFO - Número de servidores guardados correctamente
2025-05-14 12:49:32,486 - DEBUG - Creando balanceador...
2025-05-14 12:49:32,486 - DEBUG - Intentando crear el contenedor lb
2025-05-14 12:49:42,512 - INFO - Contenedor lb creado con éxito.
2025-05-14 12:49:42,513 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-14 12:49:42,571 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-14 12:49:42,571 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-14 12:49:42,708 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-14 12:49:42,708 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-14 12:49:43,053 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-14 12:49:43,053 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-14 12:49:43,594 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-14 12:49:43,594 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-14 12:49:44,055 - INFO - Contenedor iniciado: lb
2025-05-14 12:49:44,055 - DEBUG - Iniciando cambio de netplan en lb
2025-05-14 12:49:44,055 - DEBUG - Desactivando cloud-init en lb
2025-05-14 12:49:44,100 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-14 12:49:44,175 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-14 12:49:44,175 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-14 12:49:44,260 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-14 12:49:47,024 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-14 12:49:47,024 - DEBUG - Verificando estado antes de detener lb
2025-05-14 12:49:48,464 - INFO - Contenedor parado: lb
2025-05-14 12:49:48,464 - INFO - Balanceador configurado correctamente
2025-05-14 12:49:48,464 - DEBUG - Creando cliente...
2025-05-14 12:49:48,464 - DEBUG - Intentando crear el contenedor cl
2025-05-14 12:49:58,264 - INFO - Contenedor cl creado con éxito.
2025-05-14 12:49:58,264 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-14 12:49:58,447 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-14 12:49:58,447 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-14 12:49:58,752 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-14 12:49:58,753 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-14 12:49:59,656 - INFO - Contenedor iniciado: cl
2025-05-14 12:49:59,656 - DEBUG - Iniciando cambio de netplan en cl
2025-05-14 12:49:59,657 - DEBUG - Desactivando cloud-init en cl
2025-05-14 12:49:59,727 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-14 12:49:59,791 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-14 12:49:59,791 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-14 12:49:59,853 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-14 12:50:01,826 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-14 12:50:01,827 - DEBUG - Verificando estado antes de detener cl
2025-05-14 12:50:03,224 - INFO - Contenedor parado: cl
2025-05-14 12:50:03,224 - INFO - Cliente configurado correctamente
2025-05-14 12:50:03,224 - DEBUG - Intentando crear el contenedor db
2025-05-14 12:50:13,417 - INFO - Contenedor db creado con éxito.
2025-05-14 12:50:13,418 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-14 12:50:13,465 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-14 12:50:13,465 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-14 12:50:13,499 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-14 12:50:13,499 - INFO - Infraestructura creada correctamente.
2025-05-14 12:51:40,357 - INFO - Orden recibida: list
2025-05-14 12:51:40,357 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:51:40,358 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:51:40,358 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:51:40,358 - INFO - Listando contenedores
2025-05-14 12:51:40,388 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-14 12:51:47,916 - INFO - Orden recibida: configure
2025-05-14 12:51:47,916 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:51:47,917 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:51:47,917 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:51:47,917 - INFO - Iniciando configuración de la infraestructura...
2025-05-14 12:51:47,917 - INFO - Configurando base de datos MongoDB en: db
2025-05-14 12:51:47,917 - INFO - Iniciando instalación de MongoDB en db
2025-05-14 12:52:29,538 - INFO - Orden recibida: configure
2025-05-14 12:52:29,538 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:52:29,538 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:52:29,538 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:52:29,538 - INFO - Iniciando configuración de la infraestructura...
2025-05-14 12:52:29,538 - INFO - Configurando base de datos MongoDB en: db
2025-05-14 12:52:29,539 - INFO - Iniciando instalación de MongoDB en db
2025-05-14 12:52:29,539 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-14 12:52:29,822 - INFO - Contenedor iniciado: db
2025-05-14 12:52:30,376 - DEBUG - Instalando MongoDB
2025-05-14 12:52:30,558 - CRITICAL - Error instalando/configurando MongoDB en db: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
2025-05-14 12:52:30,558 - INFO - Configuración de base de datos completada correctamente.
2025-05-14 12:52:30,558 - INFO - Configurando servidor web s1
2025-05-14 12:52:30,558 - INFO - Iniciando configuración del servidor web s1
2025-05-14 12:52:30,558 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-14 12:52:30,839 - INFO - Contenedor iniciado: s1
2025-05-14 12:52:30,839 - DEBUG - Actualizando paquetes en s1
2025-05-14 12:52:31,391 - DEBUG - Instalando Apache en s1
2025-05-14 12:52:31,733 - CRITICAL - Error al configurar el servidor s1: Command '['lxc', 'exec', 's1', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-14 12:52:31,733 - INFO - Servidor s1 configurado correctamente.
2025-05-14 12:52:31,733 - INFO - Configurando balanceador lb
2025-05-14 12:52:31,733 - INFO - Instalando haproxy en el balanceador
2025-05-14 12:52:31,733 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-14 12:52:32,122 - INFO - Contenedor iniciado: lb
2025-05-14 12:52:33,390 - CRITICAL - Error en instalación de haproxy: Command '['lxc', 'exec', 'lb', '--', 'apt', 'install', '-y', 'haproxy']' returned non-zero exit status 100.
2025-05-14 12:52:33,390 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-14 12:52:33,390 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-14 12:52:33,450 - CRITICAL - Error en configuración de HAProxy: Command 'echo "
    global
        log /dev/log local0
        log /dev/log local1 notice
        chroot /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin
        stats timeout 30s
        user haproxy
        group haproxy
        daemon
    
        # Default SSL material locations
            ca-base /etc/ssl/certs
            crt-base /etc/ssl/private
        # Default ciphers to use on SSL-enabled listening sockets.
        # For more information, see ciphers(1SSL). This list is from:
        # https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
        ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
        ssl-default-bind-options no-sslv3

    defaults
        log global
        mode http
        option httplog
        option dontlognull
        timeout connect 5000
        timeout client 50000
        timeout server 50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http

    frontend firstbalance
        bind *:80
        option forwardfor
        default_backend webservers

    backend webservers
        balance roundrobin
        server webserver1 134.3.0.11:8001
        server webserver2 134.3.0.12:8001
        server webserver3 134.3.0.13:8001
        server webserver4 134.3.0.14:8001
        server webserver5 134.3.0.15:8001
        option httpchk
    " | lxc exec lb -- tee /etc/haproxy/haproxy.cfg' returned non-zero exit status 1.
2025-05-14 12:52:33,450 - INFO - Balanceador configurado correctamente.
2025-05-14 12:53:42,668 - INFO - Orden recibida: list
2025-05-14 12:53:42,668 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:53:42,668 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:53:42,668 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:53:42,668 - INFO - Listando contenedores
2025-05-14 12:53:42,726 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-14 12:53:54,960 - INFO - Orden recibida: start
2025-05-14 12:53:54,960 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:53:54,961 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:53:54,961 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:53:54,961 - INFO - Iniciando todos los contenedores
2025-05-14 12:53:54,961 - DEBUG - Arrancando servidor: s1
2025-05-14 12:53:54,961 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-14 12:53:54,980 - INFO - Contenedor s1 ya está en ejecución.
2025-05-14 12:53:54,980 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-14 12:53:55,373 - INFO - Contenedor iniciado: cl
2025-05-14 12:53:55,374 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-14 12:53:55,398 - INFO - Contenedor lb ya está en ejecución.
2025-05-14 12:53:55,398 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-14 12:53:55,427 - INFO - Contenedor db ya está en ejecución.
2025-05-14 12:53:55,427 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-14 12:53:55,436 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-14 12:53:55,438 - INFO - Consola del contenedor cl abierta correctamente
2025-05-14 12:53:55,439 - INFO - Consola del contenedor lb abierta correctamente
2025-05-14 12:53:55,442 - INFO - Consola del contenedor db abierta correctamente
2025-05-14 12:54:00,329 - INFO - Orden recibida: list
2025-05-14 12:54:00,329 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:54:00,329 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:54:00,329 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:54:00,329 - INFO - Listando contenedores
2025-05-14 12:54:00,449 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-14 12:54:49,720 - INFO - Orden recibida: configure
2025-05-14 12:54:49,720 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 12:54:49,720 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 12:54:49,720 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 12:54:49,721 - INFO - Iniciando configuración de la infraestructura...
2025-05-14 12:54:49,721 - INFO - Configurando base de datos MongoDB en: db
2025-05-14 12:54:49,721 - INFO - Iniciando instalación de MongoDB en db
2025-05-14 12:54:49,721 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-14 12:54:49,739 - INFO - Contenedor db ya está en ejecución.
2025-05-14 12:55:01,738 - DEBUG - Instalando MongoDB
2025-05-14 13:00:53,574 - DEBUG - Modificando bind_ip de MongoDB
2025-05-14 13:00:53,619 - DEBUG - Reiniciando contenedor db
2025-05-14 13:00:58,071 - INFO - MongoDB configurado con éxito en db
2025-05-14 13:00:58,072 - INFO - Configuración de base de datos completada correctamente.
2025-05-14 13:00:58,072 - INFO - Configurando servidor web s1
2025-05-14 13:00:58,072 - INFO - Iniciando configuración del servidor web s1
2025-05-14 13:00:58,072 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-14 13:00:58,095 - INFO - Contenedor s1 ya está en ejecución.
2025-05-14 13:00:58,095 - DEBUG - Actualizando paquetes en s1
2025-05-14 13:01:21,184 - DEBUG - Instalando Apache en s1
2025-05-14 13:02:28,312 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-14 13:02:28,419 - ERROR - Directorio de la app web no encontrado: static/files/app.tar.gz
2025-05-14 13:02:28,419 - INFO - Servidor s1 configurado correctamente.
2025-05-14 13:02:28,420 - INFO - Configurando balanceador lb
2025-05-14 13:02:28,420 - INFO - Instalando haproxy en el balanceador
2025-05-14 13:02:28,420 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-14 13:02:28,440 - INFO - Contenedor lb ya está en ejecución.
2025-05-14 13:04:14,357 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-14 13:04:14,359 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-14 13:04:14,408 - DEBUG - Validando archivo haproxy.cfg
2025-05-14 13:04:14,462 - DEBUG - Iniciando servicio de haproxy
2025-05-14 13:04:15,488 - INFO - Haproxy instalado y configurado correctamente.
2025-05-14 13:04:15,488 - INFO - Balanceador configurado correctamente.
2025-05-14 13:08:08,791 - INFO - Orden recibida: list
2025-05-14 13:08:08,791 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-14 13:08:08,791 - INFO - Número de servidores 1 cargados correctamente.
2025-05-14 13:08:08,791 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-14 13:08:08,791 - INFO - Listando contenedores
2025-05-14 13:08:08,813 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:13:39,510 - INFO - Orden recibida: delete
2025-05-17 16:13:39,510 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:13:39,511 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:13:39,511 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:13:39,511 - INFO - Eliminando toda la infraestructura
2025-05-17 16:13:39,511 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-17 16:13:39,649 - INFO - Imagen local eliminada con éxito.
2025-05-17 16:13:39,652 - DEBUG - Eliminando contenedor s1
2025-05-17 16:13:42,599 - INFO - Contenedor eliminado: s1
2025-05-17 16:13:42,600 - DEBUG - Eliminando contenedor cl
2025-05-17 16:13:44,398 - INFO - Contenedor eliminado: cl
2025-05-17 16:13:44,398 - DEBUG - Eliminando contenedor lb
2025-05-17 16:13:47,547 - INFO - Contenedor eliminado: lb
2025-05-17 16:13:47,548 - DEBUG - Eliminando contenedor db
2025-05-17 16:13:49,515 - INFO - Contenedor eliminado: db
2025-05-17 16:13:49,515 - DEBUG - Contenedores eliminados correctamente
2025-05-17 16:13:49,515 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-17 16:13:49,935 - INFO - Bridge eliminado: lxdbr1
2025-05-17 16:13:49,935 - INFO - Eliminación completada.
2025-05-17 16:13:55,223 - INFO - Orden recibida: list
2025-05-17 16:13:55,223 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:13:55,223 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:13:55,223 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:13:55,224 - INFO - Listando contenedores
2025-05-17 16:13:55,235 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:14:33,284 - INFO - Orden recibida: create
2025-05-17 16:14:33,284 - INFO - Número de servidores especificado: 1
2025-05-17 16:14:33,284 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-17 16:14:33,285 - DEBUG - Parámetro recibido n_servers=1
2025-05-17 16:14:33,285 - DEBUG - Creando imagen base...
2025-05-17 16:14:33,285 - DEBUG - Verificando si la imagen ya está importada...
2025-05-17 16:14:33,297 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-17 16:14:35,684 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-17 16:14:35,685 - DEBUG - Configurando y creando bridges...
2025-05-17 16:14:35,712 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-17 16:14:35,773 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-17 16:14:35,773 - DEBUG - Creando bridge lxdbr1
2025-05-17 16:14:37,413 - INFO - Bridge creado: lxdbr1
2025-05-17 16:14:38,307 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-17 16:14:41,871 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-17 16:14:41,871 - DEBUG - Creando contenedores de servidores...
2025-05-17 16:14:41,871 - DEBUG - Intentando crear el contenedor s1
2025-05-17 16:14:51,736 - INFO - Contenedor s1 creado con éxito.
2025-05-17 16:14:51,736 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-17 16:14:51,823 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-17 16:14:51,823 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-17 16:14:51,921 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-17 16:14:51,921 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-17 16:14:51,923 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-17 16:14:51,923 - INFO - Número de servidores guardados correctamente
2025-05-17 16:14:51,923 - DEBUG - Creando balanceador...
2025-05-17 16:14:51,924 - DEBUG - Intentando crear el contenedor lb
2025-05-17 16:15:02,213 - INFO - Contenedor lb creado con éxito.
2025-05-17 16:15:02,213 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-17 16:15:02,328 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-17 16:15:02,328 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-17 16:15:02,369 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-17 16:15:02,369 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-17 16:15:02,431 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-17 16:15:02,431 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-17 16:15:02,465 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-17 16:15:02,466 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:15:02,930 - INFO - Contenedor iniciado: lb
2025-05-17 16:15:02,930 - DEBUG - Iniciando cambio de netplan en lb
2025-05-17 16:15:02,930 - DEBUG - Desactivando cloud-init en lb
2025-05-17 16:15:02,980 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-17 16:15:03,049 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-17 16:15:03,049 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-17 16:15:03,105 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-17 16:15:04,984 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-17 16:15:04,984 - DEBUG - Verificando estado antes de detener lb
2025-05-17 16:15:06,508 - INFO - Contenedor parado: lb
2025-05-17 16:15:06,508 - INFO - Balanceador configurado correctamente
2025-05-17 16:15:06,508 - DEBUG - Creando cliente...
2025-05-17 16:15:06,508 - DEBUG - Intentando crear el contenedor cl
2025-05-17 16:15:16,483 - INFO - Contenedor cl creado con éxito.
2025-05-17 16:15:16,484 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-17 16:15:17,021 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-17 16:15:17,021 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-17 16:15:17,080 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-17 16:15:17,081 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:15:17,510 - INFO - Contenedor iniciado: cl
2025-05-17 16:15:17,510 - DEBUG - Iniciando cambio de netplan en cl
2025-05-17 16:15:17,511 - DEBUG - Desactivando cloud-init en cl
2025-05-17 16:15:17,560 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-17 16:15:17,621 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-17 16:15:17,621 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-17 16:15:17,696 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-17 16:15:19,488 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-17 16:15:19,489 - DEBUG - Verificando estado antes de detener cl
2025-05-17 16:15:20,952 - INFO - Contenedor parado: cl
2025-05-17 16:15:20,952 - INFO - Cliente configurado correctamente
2025-05-17 16:15:20,952 - DEBUG - Intentando crear el contenedor db
2025-05-17 16:15:31,297 - INFO - Contenedor db creado con éxito.
2025-05-17 16:15:31,297 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-17 16:15:31,525 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-17 16:15:31,525 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-17 16:15:31,621 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-17 16:15:31,621 - INFO - Infraestructura creada correctamente.
2025-05-17 16:16:28,263 - INFO - Orden recibida: ls
2025-05-17 16:16:28,264 - ERROR - Orden no válida: ls
2025-05-17 16:16:31,041 - INFO - Orden recibida: list
2025-05-17 16:16:31,042 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:16:31,042 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:16:31,042 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:16:31,042 - INFO - Listando contenedores
2025-05-17 16:16:31,070 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:16:34,367 - INFO - Orden recibida: start
2025-05-17 16:16:34,367 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:16:34,368 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:16:34,368 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:16:34,368 - INFO - Iniciando todos los contenedores
2025-05-17 16:16:34,368 - DEBUG - Arrancando servidor: s1
2025-05-17 16:16:34,368 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:16:34,743 - INFO - Contenedor iniciado: s1
2025-05-17 16:16:34,743 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:16:35,166 - INFO - Contenedor iniciado: cl
2025-05-17 16:16:35,166 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:16:35,600 - INFO - Contenedor iniciado: lb
2025-05-17 16:16:35,600 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:16:36,013 - INFO - Contenedor iniciado: db
2025-05-17 16:16:36,013 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-17 16:16:36,031 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-17 16:16:36,033 - INFO - Consola del contenedor cl abierta correctamente
2025-05-17 16:16:36,035 - INFO - Consola del contenedor lb abierta correctamente
2025-05-17 16:16:36,040 - INFO - Consola del contenedor db abierta correctamente
2025-05-17 16:16:38,556 - INFO - Orden recibida: list
2025-05-17 16:16:38,556 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:16:38,556 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:16:38,556 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:16:38,556 - INFO - Listando contenedores
2025-05-17 16:16:38,608 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:16:45,047 - INFO - Orden recibida: configure
2025-05-17 16:16:45,047 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:16:45,047 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:16:45,047 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:16:45,047 - INFO - Iniciando configuración de la infraestructura...
2025-05-17 16:16:45,047 - INFO - Configurando base de datos MongoDB en: db
2025-05-17 16:16:45,048 - INFO - Iniciando instalación de MongoDB en db
2025-05-17 16:16:45,048 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:16:45,077 - INFO - Contenedor db ya está en ejecución.
2025-05-17 16:17:02,157 - DEBUG - Instalando MongoDB
2025-05-17 16:17:48,046 - DEBUG - Modificando bind_ip de MongoDB
2025-05-17 16:17:48,118 - DEBUG - Reiniciando contenedor db
2025-05-17 16:17:52,624 - INFO - MongoDB configurado con éxito en db
2025-05-17 16:17:52,624 - INFO - Configuración de base de datos completada correctamente.
2025-05-17 16:17:52,624 - INFO - Configurando servidor web s1
2025-05-17 16:17:52,625 - INFO - Iniciando configuración del servidor web s1
2025-05-17 16:17:52,625 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:17:52,656 - INFO - Contenedor s1 ya está en ejecución.
2025-05-17 16:17:52,656 - DEBUG - Actualizando paquetes en s1
2025-05-17 16:18:08,527 - DEBUG - Instalando Apache en s1
2025-05-17 16:18:34,687 - ERROR - Archivo de instalación Node.js no encontrado: /home/javier.sanmayoral/arso/p2/static/files/install.sh
2025-05-17 16:18:34,687 - INFO - Servidor s1 configurado correctamente.
2025-05-17 16:18:34,687 - INFO - Configurando balanceador lb
2025-05-17 16:18:34,687 - INFO - Instalando haproxy en el balanceador
2025-05-17 16:18:34,687 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:18:34,703 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:18:57,555 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-17 16:18:57,558 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:18:57,574 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:18:57,574 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-17 16:18:57,625 - DEBUG - Validando archivo haproxy.cfg
2025-05-17 16:18:57,689 - DEBUG - Iniciando servicio de haproxy
2025-05-17 16:18:58,734 - INFO - Haproxy instalado y configurado correctamente.
2025-05-17 16:18:58,734 - INFO - Balanceador configurado correctamente.
2025-05-17 16:31:32,240 - INFO - Orden recibida: configure
2025-05-17 16:31:32,240 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:31:32,240 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:31:32,240 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:31:32,240 - INFO - Iniciando configuración de la infraestructura...
2025-05-17 16:31:32,241 - INFO - Configurando base de datos MongoDB en: db
2025-05-17 16:31:32,241 - INFO - Iniciando instalación de MongoDB en db
2025-05-17 16:31:32,241 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:31:32,257 - INFO - Contenedor db ya está en ejecución.
2025-05-17 16:31:35,710 - DEBUG - Instalando MongoDB
2025-05-17 16:31:36,678 - DEBUG - Modificando bind_ip de MongoDB
2025-05-17 16:31:36,718 - DEBUG - Reiniciando contenedor db
2025-05-17 16:31:41,126 - INFO - MongoDB configurado con éxito en db
2025-05-17 16:31:41,127 - INFO - Configuración de base de datos completada correctamente.
2025-05-17 16:31:41,127 - INFO - Configurando servidor web s1
2025-05-17 16:31:41,127 - INFO - Iniciando configuración del servidor web s1
2025-05-17 16:31:41,127 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:31:41,149 - INFO - Contenedor s1 ya está en ejecución.
2025-05-17 16:31:41,149 - DEBUG - Actualizando paquetes en s1
2025-05-17 16:31:44,940 - DEBUG - Instalando Apache en s1
2025-05-17 16:32:13,867 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-17 16:32:13,969 - ERROR - Directorio de la app web no encontrado: /home/javier.sanmayoral/arso/p2/practica2_arso/static/files/app.tar.gz
2025-05-17 16:32:13,969 - INFO - Servidor s1 configurado correctamente.
2025-05-17 16:32:13,969 - INFO - Configurando balanceador lb
2025-05-17 16:32:13,969 - INFO - Instalando haproxy en el balanceador
2025-05-17 16:32:13,969 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:32:14,017 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:32:20,138 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-17 16:32:20,138 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:32:20,155 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:32:20,155 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-17 16:32:20,197 - DEBUG - Validando archivo haproxy.cfg
2025-05-17 16:32:20,262 - DEBUG - Iniciando servicio de haproxy
2025-05-17 16:32:21,369 - INFO - Haproxy instalado y configurado correctamente.
2025-05-17 16:32:21,369 - INFO - Balanceador configurado correctamente.
2025-05-17 16:34:43,030 - INFO - Orden recibida: list
2025-05-17 16:34:43,030 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:34:43,031 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:34:43,031 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:34:43,031 - INFO - Listando contenedores
2025-05-17 16:34:43,059 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:34:47,389 - INFO - Orden recibida: stop
2025-05-17 16:34:47,389 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:34:47,389 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:34:47,389 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:34:47,389 - INFO - Parando todos los contenedores
2025-05-17 16:34:47,390 - DEBUG - Verificando estado antes de detener s1
2025-05-17 16:34:51,801 - INFO - Contenedor parado: s1
2025-05-17 16:34:51,801 - DEBUG - Verificando estado antes de detener cl
2025-05-17 16:34:56,094 - INFO - Contenedor parado: cl
2025-05-17 16:34:56,094 - DEBUG - Verificando estado antes de detener lb
2025-05-17 16:35:00,582 - INFO - Contenedor parado: lb
2025-05-17 16:35:00,582 - DEBUG - Verificando estado antes de detener db
2025-05-17 16:35:04,910 - INFO - Contenedor parado: db
2025-05-17 16:35:04,910 - INFO - Todos los contenedores han sido parados
2025-05-17 16:35:04,950 - ERROR - Error al cerrar consolas: Command '['pkill', 'xterm']' returned non-zero exit status 1.
2025-05-17 16:37:21,221 - INFO - Orden recibida: start
2025-05-17 16:37:21,221 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:37:21,222 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:37:21,222 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:37:21,222 - INFO - Iniciando todos los contenedores
2025-05-17 16:37:21,222 - DEBUG - Arrancando servidor: s1
2025-05-17 16:37:21,222 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:37:21,579 - INFO - Contenedor iniciado: s1
2025-05-17 16:37:21,580 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:37:21,876 - INFO - Contenedor iniciado: cl
2025-05-17 16:37:21,877 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:37:22,336 - INFO - Contenedor iniciado: lb
2025-05-17 16:37:22,336 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:37:22,693 - INFO - Contenedor iniciado: db
2025-05-17 16:37:22,693 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-17 16:37:22,693 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-17 16:37:22,704 - INFO - Consola del contenedor cl abierta correctamente
2025-05-17 16:37:22,709 - INFO - Consola del contenedor lb abierta correctamente
2025-05-17 16:37:22,721 - INFO - Consola del contenedor db abierta correctamente
2025-05-17 16:37:27,703 - INFO - Orden recibida: configure
2025-05-17 16:37:27,703 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:37:27,703 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:37:27,704 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:37:27,704 - INFO - Iniciando configuración de la infraestructura...
2025-05-17 16:37:27,704 - INFO - Configurando base de datos MongoDB en: db
2025-05-17 16:37:27,704 - INFO - Iniciando instalación de MongoDB en db
2025-05-17 16:37:27,704 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:37:27,736 - INFO - Contenedor db ya está en ejecución.
2025-05-17 16:37:33,078 - DEBUG - Instalando MongoDB
2025-05-17 16:37:34,128 - DEBUG - Modificando bind_ip de MongoDB
2025-05-17 16:37:34,207 - DEBUG - Reiniciando contenedor db
2025-05-17 16:37:38,889 - INFO - MongoDB configurado con éxito en db
2025-05-17 16:37:38,889 - INFO - Configuración de base de datos completada correctamente.
2025-05-17 16:37:38,889 - INFO - Configurando servidor web s1
2025-05-17 16:37:38,889 - INFO - Iniciando configuración del servidor web s1
2025-05-17 16:37:38,890 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:37:38,924 - INFO - Contenedor s1 ya está en ejecución.
2025-05-17 16:37:38,924 - DEBUG - Actualizando paquetes en s1
2025-05-17 16:37:43,082 - DEBUG - Instalando Apache en s1
2025-05-17 16:37:43,899 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-17 16:37:43,992 - DEBUG - Transfiriendo aplicación web
2025-05-17 16:37:44,034 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-17 16:37:44,258 - DEBUG - Ejecutando instalación Node.js
2025-05-17 16:39:40,323 - DEBUG - Reiniciando servidor
2025-05-17 16:39:44,950 - DEBUG - Iniciando servidor Node.js con forever
2025-05-17 16:39:45,752 - INFO - Servidor web s1 configurado con éxito.
2025-05-17 16:39:45,752 - INFO - Servidor s1 configurado correctamente.
2025-05-17 16:39:45,752 - INFO - Configurando balanceador lb
2025-05-17 16:39:45,752 - INFO - Instalando haproxy en el balanceador
2025-05-17 16:39:45,752 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:39:45,774 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:39:51,307 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-17 16:39:51,307 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:39:51,327 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:39:51,327 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-17 16:39:51,434 - DEBUG - Validando archivo haproxy.cfg
2025-05-17 16:39:51,496 - DEBUG - Iniciando servicio de haproxy
2025-05-17 16:39:52,852 - INFO - Haproxy instalado y configurado correctamente.
2025-05-17 16:39:52,852 - INFO - Balanceador configurado correctamente.
2025-05-17 16:39:58,637 - INFO - Orden recibida: list
2025-05-17 16:39:58,637 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:39:58,638 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:39:58,638 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:39:58,638 - INFO - Listando contenedores
2025-05-17 16:39:58,659 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:42:12,804 - INFO - Orden recibida: delete
2025-05-17 16:42:12,804 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:42:12,804 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:42:12,805 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:42:12,805 - INFO - Eliminando toda la infraestructura
2025-05-17 16:42:12,805 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-17 16:42:12,878 - INFO - Imagen local eliminada con éxito.
2025-05-17 16:42:12,878 - DEBUG - Eliminando contenedor s1
2025-05-17 16:42:15,661 - INFO - Contenedor eliminado: s1
2025-05-17 16:42:15,661 - DEBUG - Eliminando contenedor cl
2025-05-17 16:42:17,619 - INFO - Contenedor eliminado: cl
2025-05-17 16:42:17,619 - DEBUG - Eliminando contenedor lb
2025-05-17 16:42:19,510 - INFO - Contenedor eliminado: lb
2025-05-17 16:42:19,510 - DEBUG - Eliminando contenedor db
2025-05-17 16:42:21,457 - INFO - Contenedor eliminado: db
2025-05-17 16:42:21,457 - DEBUG - Contenedores eliminados correctamente
2025-05-17 16:42:21,457 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-17 16:42:21,862 - INFO - Bridge eliminado: lxdbr1
2025-05-17 16:42:21,863 - INFO - Eliminación completada.
2025-05-17 16:43:35,482 - INFO - Orden recibida: create
2025-05-17 16:43:35,482 - INFO - Número de servidores especificado: 1
2025-05-17 16:43:35,483 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-17 16:43:35,483 - DEBUG - Parámetro recibido n_servers=1
2025-05-17 16:43:35,483 - DEBUG - Creando imagen base...
2025-05-17 16:43:35,483 - DEBUG - Verificando si la imagen ya está importada...
2025-05-17 16:43:35,531 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-17 16:43:37,186 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-17 16:43:37,186 - DEBUG - Configurando y creando bridges...
2025-05-17 16:43:37,219 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-17 16:43:37,283 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-17 16:43:37,283 - DEBUG - Creando bridge lxdbr1
2025-05-17 16:43:38,910 - INFO - Bridge creado: lxdbr1
2025-05-17 16:43:39,720 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-17 16:43:43,322 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-17 16:43:43,322 - DEBUG - Creando contenedores de servidores...
2025-05-17 16:43:43,322 - DEBUG - Intentando crear el contenedor s1
2025-05-17 16:43:53,067 - INFO - Contenedor s1 creado con éxito.
2025-05-17 16:43:53,067 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-17 16:43:53,117 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-17 16:43:53,117 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-17 16:43:53,152 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-17 16:43:53,152 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-17 16:43:53,153 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-17 16:43:53,153 - INFO - Número de servidores guardados correctamente
2025-05-17 16:43:53,154 - DEBUG - Creando balanceador...
2025-05-17 16:43:53,154 - DEBUG - Intentando crear el contenedor lb
2025-05-17 16:44:03,732 - INFO - Contenedor lb creado con éxito.
2025-05-17 16:44:03,732 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-17 16:44:04,056 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-17 16:44:04,057 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-17 16:44:04,187 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-17 16:44:04,187 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-17 16:44:04,328 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-17 16:44:04,328 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-17 16:44:04,487 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-17 16:44:04,487 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:44:05,101 - INFO - Contenedor iniciado: lb
2025-05-17 16:44:05,101 - DEBUG - Iniciando cambio de netplan en lb
2025-05-17 16:44:05,101 - DEBUG - Desactivando cloud-init en lb
2025-05-17 16:44:05,147 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-17 16:44:05,218 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-17 16:44:05,218 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-17 16:44:05,305 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-17 16:44:08,557 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-17 16:44:08,557 - DEBUG - Verificando estado antes de detener lb
2025-05-17 16:44:09,988 - INFO - Contenedor parado: lb
2025-05-17 16:44:09,988 - INFO - Balanceador configurado correctamente
2025-05-17 16:44:09,988 - DEBUG - Creando cliente...
2025-05-17 16:44:09,988 - DEBUG - Intentando crear el contenedor cl
2025-05-17 16:44:19,802 - INFO - Contenedor cl creado con éxito.
2025-05-17 16:44:19,802 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-17 16:44:19,864 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-17 16:44:19,864 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-17 16:44:19,965 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-17 16:44:19,965 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:44:21,070 - INFO - Contenedor iniciado: cl
2025-05-17 16:44:21,070 - DEBUG - Iniciando cambio de netplan en cl
2025-05-17 16:44:21,070 - DEBUG - Desactivando cloud-init en cl
2025-05-17 16:44:21,142 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-17 16:44:21,194 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-17 16:44:21,194 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-17 16:44:21,267 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-17 16:44:25,675 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-17 16:44:25,675 - DEBUG - Verificando estado antes de detener cl
2025-05-17 16:44:27,186 - INFO - Contenedor parado: cl
2025-05-17 16:44:27,186 - INFO - Cliente configurado correctamente
2025-05-17 16:44:27,187 - DEBUG - Intentando crear el contenedor db
2025-05-17 16:44:37,173 - INFO - Contenedor db creado con éxito.
2025-05-17 16:44:37,173 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-17 16:44:37,228 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-17 16:44:37,228 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-17 16:44:37,272 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-17 16:44:37,272 - INFO - Infraestructura creada correctamente.
2025-05-17 16:44:44,145 - INFO - Orden recibida: start
2025-05-17 16:44:44,145 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:44:44,145 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:44:44,146 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:44:44,146 - INFO - Iniciando todos los contenedores
2025-05-17 16:44:44,146 - DEBUG - Arrancando servidor: s1
2025-05-17 16:44:44,146 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:44:44,463 - INFO - Contenedor iniciado: s1
2025-05-17 16:44:44,463 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:44:44,818 - INFO - Contenedor iniciado: cl
2025-05-17 16:44:44,818 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:44:45,242 - INFO - Contenedor iniciado: lb
2025-05-17 16:44:45,242 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:44:45,630 - INFO - Contenedor iniciado: db
2025-05-17 16:44:45,630 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-17 16:44:45,631 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-17 16:44:45,634 - INFO - Consola del contenedor cl abierta correctamente
2025-05-17 16:44:45,643 - INFO - Consola del contenedor lb abierta correctamente
2025-05-17 16:44:45,660 - INFO - Consola del contenedor db abierta correctamente
2025-05-17 16:44:50,341 - INFO - Orden recibida: configure
2025-05-17 16:44:50,341 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:44:50,341 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:44:50,341 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:44:50,341 - INFO - Iniciando configuración de la infraestructura...
2025-05-17 16:44:50,341 - INFO - Configurando base de datos MongoDB en: db
2025-05-17 16:44:50,341 - INFO - Iniciando instalación de MongoDB en db
2025-05-17 16:44:50,341 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:44:50,358 - INFO - Contenedor db ya está en ejecución.
2025-05-17 16:45:06,227 - DEBUG - Instalando MongoDB
2025-05-17 16:45:52,882 - DEBUG - Modificando bind_ip de MongoDB
2025-05-17 16:45:52,927 - DEBUG - Reiniciando contenedor db
2025-05-17 16:45:57,982 - INFO - MongoDB configurado con éxito en db
2025-05-17 16:45:57,982 - INFO - Configuración de base de datos completada correctamente.
2025-05-17 16:45:57,983 - INFO - Configurando servidor web s1
2025-05-17 16:45:57,983 - INFO - Iniciando configuración del servidor web s1
2025-05-17 16:45:57,983 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:45:58,014 - INFO - Contenedor s1 ya está en ejecución.
2025-05-17 16:45:58,014 - DEBUG - Actualizando paquetes en s1
2025-05-17 16:46:10,149 - DEBUG - Instalando Apache en s1
2025-05-17 16:46:37,237 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-17 16:46:37,326 - DEBUG - Transfiriendo aplicación web
2025-05-17 16:46:37,344 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-17 16:46:37,395 - DEBUG - Ejecutando instalación Node.js
2025-05-17 16:49:28,250 - DEBUG - Reiniciando servidor
2025-05-17 16:49:32,872 - DEBUG - Iniciando servidor Node.js con forever
2025-05-17 16:49:34,599 - INFO - Servidor web s1 configurado con éxito.
2025-05-17 16:49:34,599 - INFO - Servidor s1 configurado correctamente.
2025-05-17 16:49:34,599 - INFO - Configurando balanceador lb
2025-05-17 16:49:34,599 - INFO - Instalando haproxy en el balanceador
2025-05-17 16:49:34,599 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:49:34,623 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:49:59,554 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-17 16:49:59,554 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:49:59,570 - INFO - Contenedor lb ya está en ejecución.
2025-05-17 16:49:59,570 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-17 16:49:59,625 - DEBUG - Validando archivo haproxy.cfg
2025-05-17 16:49:59,691 - DEBUG - Iniciando servicio de haproxy
2025-05-17 16:50:00,864 - INFO - Haproxy instalado y configurado correctamente.
2025-05-17 16:50:00,864 - INFO - Balanceador configurado correctamente.
2025-05-17 16:51:18,424 - INFO - Orden recibida: list
2025-05-17 16:51:18,424 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:51:18,424 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:51:18,424 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:51:18,424 - INFO - Listando contenedores
2025-05-17 16:51:18,450 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-17 16:51:57,134 - INFO - Orden recibida: stop
2025-05-17 16:51:57,134 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:51:57,134 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:51:57,134 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:51:57,134 - INFO - Parando todos los contenedores
2025-05-17 16:51:57,134 - DEBUG - Verificando estado antes de detener s1
2025-05-17 16:52:01,514 - INFO - Contenedor parado: s1
2025-05-17 16:52:01,514 - DEBUG - Verificando estado antes de detener cl
2025-05-17 16:52:05,935 - INFO - Contenedor parado: cl
2025-05-17 16:52:05,935 - DEBUG - Verificando estado antes de detener lb
2025-05-17 16:52:10,377 - INFO - Contenedor parado: lb
2025-05-17 16:52:10,378 - DEBUG - Verificando estado antes de detener db
2025-05-17 16:52:14,645 - INFO - Contenedor parado: db
2025-05-17 16:52:14,646 - INFO - Todos los contenedores han sido parados
2025-05-17 16:52:14,685 - ERROR - Error al cerrar consolas: Command '['pkill', 'xterm']' returned non-zero exit status 1.
2025-05-17 16:53:13,081 - INFO - Orden recibida: start
2025-05-17 16:53:13,082 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-17 16:53:13,082 - INFO - Número de servidores 1 cargados correctamente.
2025-05-17 16:53:13,082 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-17 16:53:13,082 - INFO - Iniciando todos los contenedores
2025-05-17 16:53:13,082 - DEBUG - Arrancando servidor: s1
2025-05-17 16:53:13,083 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-17 16:53:13,424 - INFO - Contenedor iniciado: s1
2025-05-17 16:53:13,424 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-17 16:53:13,789 - INFO - Contenedor iniciado: cl
2025-05-17 16:53:13,789 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-17 16:53:14,267 - INFO - Contenedor iniciado: lb
2025-05-17 16:53:14,267 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-17 16:53:14,699 - INFO - Contenedor iniciado: db
2025-05-17 16:53:14,699 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-17 16:53:14,700 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-17 16:53:14,708 - INFO - Consola del contenedor cl abierta correctamente
2025-05-17 16:53:14,711 - INFO - Consola del contenedor lb abierta correctamente
2025-05-17 16:53:14,722 - INFO - Consola del contenedor db abierta correctamente
2025-05-18 13:08:06,273 - INFO - Orden recibida: configure
2025-05-18 13:08:06,273 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:08:06,274 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:08:06,274 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:08:06,275 - INFO - Iniciando configuración de la infraestructura...
2025-05-18 13:08:06,275 - INFO - Configurando base de datos MongoDB en: db
2025-05-18 13:08:06,275 - INFO - Iniciando instalación de MongoDB en db
2025-05-18 13:08:06,275 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-18 13:08:06,301 - ERROR - Error al iniciar el contenedor db: Command '['lxc', 'info', 'db']' returned non-zero exit status 1.
2025-05-18 13:08:06,322 - CRITICAL - Error instalando/configurando MongoDB en db: Command '['lxc', 'exec', 'db', '--', 'apt', 'update']' returned non-zero exit status 1.
2025-05-18 13:08:06,323 - INFO - Configuración de base de datos completada correctamente.
2025-05-18 13:08:06,323 - INFO - Configurando servidor web s1
2025-05-18 13:08:06,323 - INFO - Iniciando configuración del servidor web s1
2025-05-18 13:08:06,323 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-18 13:08:06,346 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'info', 's1']' returned non-zero exit status 1.
2025-05-18 13:08:06,346 - DEBUG - Actualizando paquetes en s1
2025-05-18 13:08:06,358 - CRITICAL - Error al configurar el servidor s1: Command '['lxc', 'exec', 's1', '--', 'apt', 'update']' returned non-zero exit status 1.
2025-05-18 13:08:06,358 - INFO - Servidor s1 configurado correctamente.
2025-05-18 13:08:06,359 - INFO - Configurando balanceador lb
2025-05-18 13:08:06,359 - INFO - Instalando haproxy en el balanceador
2025-05-18 13:08:06,359 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:08:06,370 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'info', 'lb']' returned non-zero exit status 1.
2025-05-18 13:08:06,383 - CRITICAL - Error en instalación de haproxy: Command '['lxc', 'exec', 'lb', '--', 'apt', 'update']' returned non-zero exit status 1.
2025-05-18 13:08:06,383 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-18 13:08:06,383 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:08:06,394 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'info', 'lb']' returned non-zero exit status 1.
2025-05-18 13:08:06,394 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-18 13:08:06,408 - CRITICAL - Error en configuración de HAProxy: Command 'echo "
    global
        log /dev/log local0
        log /dev/log local1 notice
        chroot /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin
        stats timeout 30s
        user haproxy
        group haproxy
        daemon
    
        # Default SSL material locations
            ca-base /etc/ssl/certs
            crt-base /etc/ssl/private
        # Default ciphers to use on SSL-enabled listening sockets.
        # For more information, see ciphers(1SSL). This list is from:
        # https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
        ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
        ssl-default-bind-options no-sslv3

    defaults
        log global
        mode http
        option httplog
        option dontlognull
        timeout connect 5000
        timeout client 50000
        timeout server 50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http

    frontend firstbalance
        bind *:80
        option forwardfor
        default_backend webservers

    backend webservers
        balance roundrobin
        server webserver1 134.3.0.11:8001
        server webserver2 134.3.0.12:8001
        server webserver3 134.3.0.13:8001
        server webserver4 134.3.0.14:8001
        server webserver5 134.3.0.15:8001
        option httpchk
    " | lxc exec lb -- tee /etc/haproxy/haproxy.cfg' returned non-zero exit status 1.
2025-05-18 13:08:06,408 - INFO - Balanceador configurado correctamente.
2025-05-18 13:08:31,449 - INFO - Orden recibida: create
2025-05-18 13:08:31,449 - INFO - Número de servidores especificado: 1
2025-05-18 13:08:31,449 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-18 13:08:31,449 - DEBUG - Parámetro recibido n_servers=1
2025-05-18 13:08:31,450 - DEBUG - Creando imagen base...
2025-05-18 13:08:31,450 - DEBUG - Verificando si la imagen ya está importada...
2025-05-18 13:08:31,462 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-18 13:08:37,123 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-18 13:08:37,123 - DEBUG - Configurando y creando bridges...
2025-05-18 13:08:37,985 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-18 13:08:41,317 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-18 13:08:41,317 - DEBUG - Creando bridge lxdbr1
2025-05-18 13:08:42,941 - INFO - Bridge creado: lxdbr1
2025-05-18 13:08:43,803 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-18 13:08:47,198 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-18 13:08:47,198 - DEBUG - Creando contenedores de servidores...
2025-05-18 13:08:47,198 - DEBUG - Intentando crear el contenedor s1
2025-05-18 13:08:56,828 - INFO - Contenedor s1 creado con éxito.
2025-05-18 13:08:56,828 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-18 13:08:56,873 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-18 13:08:56,873 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-18 13:08:56,899 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-18 13:08:56,899 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-18 13:08:56,901 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:08:56,901 - INFO - Número de servidores guardados correctamente
2025-05-18 13:08:56,901 - DEBUG - Creando balanceador...
2025-05-18 13:08:56,901 - DEBUG - Intentando crear el contenedor lb
2025-05-18 13:09:06,773 - INFO - Contenedor lb creado con éxito.
2025-05-18 13:09:06,773 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-18 13:09:06,818 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-18 13:09:06,818 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-18 13:09:06,849 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-18 13:09:06,849 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-18 13:09:06,930 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-18 13:09:06,930 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-18 13:09:07,018 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-18 13:09:07,018 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:09:07,484 - INFO - Contenedor iniciado: lb
2025-05-18 13:09:07,484 - DEBUG - Iniciando cambio de netplan en lb
2025-05-18 13:09:07,485 - DEBUG - Desactivando cloud-init en lb
2025-05-18 13:09:08,033 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-18 13:09:08,095 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-18 13:09:08,095 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-18 13:09:08,238 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-18 13:09:12,899 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-18 13:09:12,899 - DEBUG - Verificando estado antes de detener lb
2025-05-18 13:09:14,325 - INFO - Contenedor parado: lb
2025-05-18 13:09:14,325 - INFO - Balanceador configurado correctamente
2025-05-18 13:09:14,325 - DEBUG - Creando cliente...
2025-05-18 13:09:14,325 - DEBUG - Intentando crear el contenedor cl
2025-05-18 13:09:24,299 - INFO - Contenedor cl creado con éxito.
2025-05-18 13:09:24,299 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-18 13:09:24,638 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-18 13:09:24,638 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-18 13:09:25,017 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-18 13:09:25,017 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-18 13:09:25,469 - INFO - Contenedor iniciado: cl
2025-05-18 13:09:25,470 - DEBUG - Iniciando cambio de netplan en cl
2025-05-18 13:09:25,470 - DEBUG - Desactivando cloud-init en cl
2025-05-18 13:09:25,516 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-18 13:09:25,572 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-18 13:09:25,572 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-18 13:09:25,685 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-18 13:09:30,753 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-18 13:09:30,753 - DEBUG - Verificando estado antes de detener cl
2025-05-18 13:09:32,201 - INFO - Contenedor parado: cl
2025-05-18 13:09:32,202 - INFO - Cliente configurado correctamente
2025-05-18 13:09:32,202 - DEBUG - Intentando crear el contenedor db
2025-05-18 13:09:41,723 - INFO - Contenedor db creado con éxito.
2025-05-18 13:09:41,723 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-18 13:09:41,804 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-18 13:09:41,804 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-18 13:09:41,851 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-18 13:09:41,851 - INFO - Infraestructura creada correctamente.
2025-05-18 13:16:06,919 - INFO - Orden recibida: start
2025-05-18 13:16:06,919 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:16:06,920 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:16:06,920 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:16:06,920 - INFO - Iniciando todos los contenedores
2025-05-18 13:16:06,920 - DEBUG - Arrancando servidor: s1
2025-05-18 13:16:06,920 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-18 13:16:07,199 - INFO - Contenedor iniciado: s1
2025-05-18 13:16:07,199 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-18 13:16:07,590 - INFO - Contenedor iniciado: cl
2025-05-18 13:16:07,590 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:16:07,961 - INFO - Contenedor iniciado: lb
2025-05-18 13:16:07,962 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-18 13:16:08,377 - INFO - Contenedor iniciado: db
2025-05-18 13:16:08,377 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-18 13:16:08,380 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-18 13:16:08,384 - INFO - Consola del contenedor cl abierta correctamente
2025-05-18 13:16:08,389 - INFO - Consola del contenedor lb abierta correctamente
2025-05-18 13:16:08,395 - INFO - Consola del contenedor db abierta correctamente
2025-05-18 13:16:15,527 - INFO - Orden recibida: configure
2025-05-18 13:16:15,527 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:16:15,527 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:16:15,527 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:16:15,527 - INFO - Iniciando configuración de la infraestructura...
2025-05-18 13:16:15,527 - INFO - Configurando base de datos MongoDB en: db
2025-05-18 13:16:15,528 - INFO - Iniciando instalación de MongoDB en db
2025-05-18 13:16:15,528 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-18 13:16:15,555 - INFO - Contenedor db ya está en ejecución.
2025-05-18 13:16:31,307 - DEBUG - Instalando MongoDB
2025-05-18 13:17:15,704 - DEBUG - Modificando bind_ip de MongoDB
2025-05-18 13:17:15,753 - DEBUG - Reiniciando contenedor db
2025-05-18 13:17:20,128 - INFO - MongoDB configurado con éxito en db
2025-05-18 13:17:20,128 - INFO - Configuración de base de datos completada correctamente.
2025-05-18 13:17:20,128 - INFO - Configurando servidor web s1
2025-05-18 13:17:20,128 - INFO - Iniciando configuración del servidor web s1
2025-05-18 13:17:20,128 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-18 13:17:20,153 - INFO - Contenedor s1 ya está en ejecución.
2025-05-18 13:17:20,153 - DEBUG - Actualizando paquetes en s1
2025-05-18 13:17:32,443 - DEBUG - Instalando Apache en s1
2025-05-18 13:18:01,280 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-18 13:18:01,372 - DEBUG - Transfiriendo aplicación web
2025-05-18 13:18:01,386 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-18 13:18:01,451 - DEBUG - Ejecutando instalación Node.js
2025-05-18 13:20:29,679 - DEBUG - Reiniciando servidor
2025-05-18 13:20:34,282 - DEBUG - Iniciando servidor Node.js con forever
2025-05-18 13:20:35,032 - INFO - Servidor web s1 configurado con éxito.
2025-05-18 13:20:35,032 - INFO - Servidor s1 configurado correctamente.
2025-05-18 13:20:35,032 - INFO - Configurando balanceador lb
2025-05-18 13:20:35,032 - INFO - Instalando haproxy en el balanceador
2025-05-18 13:20:35,032 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:20:35,055 - INFO - Contenedor lb ya está en ejecución.
2025-05-18 13:21:00,731 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-18 13:21:00,731 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 13:21:00,753 - INFO - Contenedor lb ya está en ejecución.
2025-05-18 13:21:00,753 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-18 13:21:00,814 - DEBUG - Validando archivo haproxy.cfg
2025-05-18 13:21:00,887 - DEBUG - Iniciando servicio de haproxy
2025-05-18 13:21:02,004 - INFO - Haproxy instalado y configurado correctamente.
2025-05-18 13:21:02,004 - INFO - Balanceador configurado correctamente.
2025-05-18 13:26:33,241 - INFO - Orden recibida: enlarge
2025-05-18 13:26:33,241 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:26:33,241 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:26:33,241 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:27:28,192 - INFO - Orden recibida: enlarge
2025-05-18 13:27:28,192 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:27:28,192 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:27:28,192 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:27:28,192 - INFO - Buscando servidor libre para añadir...
2025-05-18 13:27:28,193 - DEBUG - Verificando si existe el contenedor s1
2025-05-18 13:27:28,211 - DEBUG - Verificando si existe el contenedor s2
2025-05-18 13:27:28,223 - INFO - Creando nuevo servidor disponible: s2
2025-05-18 13:27:28,223 - DEBUG - Intentando crear el contenedor s2
2025-05-18 13:27:37,958 - INFO - Contenedor s2 creado con éxito.
2025-05-18 13:27:37,958 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 13:27:38,010 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 13:27:38,010 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 13:27:38,043 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 13:27:38,043 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-18 13:27:38,043 - DEBUG - Configurando el servidor s2
2025-05-18 13:27:38,043 - INFO - Iniciando configuración del servidor web s2
2025-05-18 13:27:38,043 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:27:38,331 - INFO - Contenedor iniciado: s2
2025-05-18 13:27:38,331 - DEBUG - Actualizando paquetes en s2
2025-05-18 13:27:38,845 - DEBUG - Instalando Apache en s2
2025-05-18 13:27:39,180 - CRITICAL - Error al configurar el servidor s2: Command '['lxc', 'exec', 's2', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-18 13:27:39,180 - CRITICAL - Error crítico al añadir el servidor: name 'logging' is not defined
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/P2/practica2_arso/ordenes_opcionales.py", line 170, in enlarge
    logging.info(f"Servidor {name} añadido a la red correctamente")
    ^^^^^^^
NameError: name 'logging' is not defined
2025-05-18 13:28:58,686 - INFO - Orden recibida: stop_server
2025-05-18 13:28:58,686 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:28:58,686 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:28:58,687 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:28:58,687 - INFO - Deteniendo servidor individual: s2
2025-05-18 13:28:58,687 - INFO - Solicitado parar servidor: s2
2025-05-18 13:28:58,703 - DEBUG - Verificando estado antes de detener s2
2025-05-18 13:29:02,935 - INFO - Contenedor parado: s2
2025-05-18 13:29:02,935 - INFO - Servidor s2 detenido correctamente.
2025-05-18 13:29:13,213 - INFO - Orden recibida: delete_server
2025-05-18 13:29:13,213 - ERROR - Orden no válida: delete_server
2025-05-18 13:29:23,714 - INFO - Orden recibida: delete_last_server
2025-05-18 13:29:23,714 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:29:23,714 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:29:23,714 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:29:23,714 - WARNING - Intento de eliminar servidor por debajo del mínimo
2025-05-18 13:32:32,601 - INFO - Orden recibida: enlarge
2025-05-18 13:32:32,601 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:32:32,602 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:32:32,602 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:32:55,270 - INFO - Orden recibida: enlarge
2025-05-18 13:32:55,270 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:32:55,271 - INFO - Número de servidores 1 cargados correctamente.
2025-05-18 13:32:55,271 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-18 13:32:55,271 - INFO - Buscando servidor libre para añadir...
2025-05-18 13:32:55,271 - DEBUG - Verificando si existe el contenedor s1
2025-05-18 13:32:55,294 - DEBUG - Verificando si existe el contenedor s2
2025-05-18 13:32:55,304 - INFO - Creando nuevo servidor disponible: s2
2025-05-18 13:32:55,304 - DEBUG - Intentando crear el contenedor s2
2025-05-18 13:33:04,879 - INFO - Contenedor s2 creado con éxito.
2025-05-18 13:33:04,879 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 13:33:04,930 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 13:33:04,930 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 13:33:04,963 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 13:33:04,963 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-18 13:33:04,963 - DEBUG - Configurando el servidor s2
2025-05-18 13:33:04,963 - INFO - Iniciando configuración del servidor web s2
2025-05-18 13:33:04,963 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:33:05,357 - INFO - Contenedor iniciado: s2
2025-05-18 13:33:05,357 - DEBUG - Actualizando paquetes en s2
2025-05-18 13:33:05,859 - DEBUG - Instalando Apache en s2
2025-05-18 13:33:06,240 - CRITICAL - Error al configurar el servidor s2: Command '['lxc', 'exec', 's2', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-18 13:33:06,240 - INFO - Servidor s2 añadido a la red correctamente
2025-05-18 13:33:06,240 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-18 13:33:06,242 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:33:06,242 - INFO - Nuevo número de servidores: 2
2025-05-18 13:34:52,142 - INFO - Orden recibida: enlarge
2025-05-18 13:34:52,142 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:34:52,142 - INFO - Número de servidores 2 cargados correctamente.
2025-05-18 13:34:52,143 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-18 13:34:52,143 - INFO - Buscando servidor libre para añadir...
2025-05-18 13:34:52,143 - DEBUG - Verificando si existe el contenedor s1
2025-05-18 13:34:52,157 - DEBUG - Verificando si existe el contenedor s2
2025-05-18 13:34:52,168 - INFO - Creando nuevo servidor disponible: s2
2025-05-18 13:34:52,168 - DEBUG - Intentando crear el contenedor s2
2025-05-18 13:35:01,733 - INFO - Contenedor s2 creado con éxito.
2025-05-18 13:35:01,733 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 13:35:01,884 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 13:35:01,884 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 13:35:02,025 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 13:35:02,026 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-18 13:35:02,026 - DEBUG - Configurando el servidor s2
2025-05-18 13:35:02,026 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:35:02,589 - INFO - Contenedor iniciado: s2
2025-05-18 13:35:02,589 - INFO - Iniciando configuración del servidor web s2
2025-05-18 13:35:02,589 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:35:02,619 - INFO - Contenedor s2 ya está en ejecución.
2025-05-18 13:35:02,619 - DEBUG - Actualizando paquetes en s2
2025-05-18 13:35:03,147 - DEBUG - Instalando Apache en s2
2025-05-18 13:35:03,488 - CRITICAL - Error al configurar el servidor s2: Command '['lxc', 'exec', 's2', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-18 13:35:03,488 - INFO - Servidor s2 añadido a la red correctamente
2025-05-18 13:35:03,488 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-18 13:35:03,490 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:35:03,490 - INFO - Nuevo número de servidores: 3
2025-05-18 13:36:53,609 - INFO - Orden recibida: enlarge
2025-05-18 13:36:53,609 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:36:53,610 - INFO - Número de servidores 3 cargados correctamente.
2025-05-18 13:36:53,610 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-18 13:36:53,610 - INFO - Buscando servidor libre para añadir...
2025-05-18 13:36:53,610 - DEBUG - Verificando si existe el contenedor s1
2025-05-18 13:36:53,630 - DEBUG - Verificando si existe el contenedor s2
2025-05-18 13:36:53,640 - INFO - Creando nuevo servidor disponible: s2
2025-05-18 13:36:53,640 - DEBUG - Intentando crear el contenedor s2
2025-05-18 13:37:03,146 - INFO - Contenedor s2 creado con éxito.
2025-05-18 13:37:03,147 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 13:37:03,195 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 13:37:03,195 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 13:37:03,228 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 13:37:03,228 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-18 13:37:03,228 - DEBUG - Configurando el servidor s2
2025-05-18 13:37:03,228 - CRITICAL - Error crítico al añadir el servidor: bufsize must be an integer
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/P2/practica2_arso/ordenes_opcionales.py", line 169, in enlarge
    subprocess.run("lxc","start",name)
  File "/usr/lib/python3.11/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 835, in __init__
    raise TypeError("bufsize must be an integer")
TypeError: bufsize must be an integer
2025-05-18 13:37:03,231 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-18 13:37:03,232 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:37:03,232 - INFO - Nuevo número de servidores: 4
2025-05-18 13:39:05,977 - INFO - Orden recibida: delete_last_server
2025-05-18 13:39:05,977 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:39:05,977 - INFO - Número de servidores 4 cargados correctamente.
2025-05-18 13:39:05,977 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-18 13:39:05,978 - INFO - Buscando último servidor para eliminar...
2025-05-18 13:39:06,056 - INFO - Eliminando servidor: s2
2025-05-18 13:39:06,056 - DEBUG - Eliminando contenedor s2
2025-05-18 13:39:06,874 - INFO - Contenedor eliminado: s2
2025-05-18 13:39:06,875 - INFO - Servidor s2 eliminado correctamente.
2025-05-18 13:39:06,875 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-18 13:39:06,876 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:39:06,876 - INFO - Nuevo número de servidores: 3
2025-05-18 13:39:13,881 - INFO - Orden recibida: enlarge
2025-05-18 13:39:13,881 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:39:13,882 - INFO - Número de servidores 3 cargados correctamente.
2025-05-18 13:39:13,882 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-18 13:39:13,882 - INFO - Buscando servidor libre para añadir...
2025-05-18 13:39:13,882 - DEBUG - Verificando si existe el contenedor s1
2025-05-18 13:39:13,897 - DEBUG - Verificando si existe el contenedor s2
2025-05-18 13:39:13,910 - INFO - Creando nuevo servidor disponible: s2
2025-05-18 13:39:13,910 - DEBUG - Intentando crear el contenedor s2
2025-05-18 13:39:23,501 - INFO - Contenedor s2 creado con éxito.
2025-05-18 13:39:23,501 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 13:39:23,554 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 13:39:23,555 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 13:39:23,588 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 13:39:23,588 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-18 13:39:23,588 - DEBUG - Configurando el servidor s2
2025-05-18 13:39:23,851 - INFO - Iniciando configuración del servidor web s2
2025-05-18 13:39:23,851 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:39:23,876 - INFO - Contenedor s2 ya está en ejecución.
2025-05-18 13:39:23,876 - DEBUG - Actualizando paquetes en s2
2025-05-18 13:39:24,504 - DEBUG - Instalando Apache en s2
2025-05-18 13:39:24,809 - CRITICAL - Error al configurar el servidor s2: Command '['lxc', 'exec', 's2', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-18 13:39:24,809 - INFO - Servidor s2 añadido a la red correctamente
2025-05-18 13:39:24,810 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-18 13:39:24,811 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-18 13:39:24,811 - INFO - Nuevo número de servidores: 4
2025-05-18 13:40:07,497 - INFO - Orden recibida: config_server
2025-05-18 13:40:07,497 - ERROR - Orden no válida: config_server
2025-05-18 13:41:00,233 - INFO - Orden recibida: config_server
2025-05-18 13:41:00,233 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:41:00,234 - INFO - Número de servidores 4 cargados correctamente.
2025-05-18 13:41:00,234 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-18 13:41:17,497 - INFO - Orden recibida: config_server
2025-05-18 13:41:17,497 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 13:41:17,497 - INFO - Número de servidores 4 cargados correctamente.
2025-05-18 13:41:17,497 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-18 13:41:17,497 - INFO - Configurando el servidor infividual s2
2025-05-18 13:41:17,497 - INFO - Iniciando configuración del servidor web s2
2025-05-18 13:41:17,497 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 13:41:17,513 - INFO - Contenedor s2 ya está en ejecución.
2025-05-18 13:41:17,513 - DEBUG - Actualizando paquetes en s2
2025-05-18 13:41:29,307 - DEBUG - Instalando Apache en s2
2025-05-18 13:41:57,091 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-18 13:41:57,174 - DEBUG - Transfiriendo aplicación web
2025-05-18 13:41:57,200 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-18 13:41:57,271 - DEBUG - Ejecutando instalación Node.js
2025-05-18 13:44:28,196 - DEBUG - Reiniciando servidor
2025-05-18 13:44:32,823 - DEBUG - Iniciando servidor Node.js con forever
2025-05-18 13:44:33,500 - INFO - Servidor web s2 configurado con éxito.
2025-05-18 21:16:33,920 - INFO - Orden recibida: delete
2025-05-18 21:16:33,920 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 21:16:33,920 - INFO - Número de servidores 4 cargados correctamente.
2025-05-18 21:16:33,921 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-18 21:16:33,921 - INFO - Eliminando toda la infraestructura
2025-05-18 21:16:33,921 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-18 21:16:34,060 - INFO - Imagen local eliminada con éxito.
2025-05-18 21:16:34,060 - DEBUG - Eliminando contenedor s1
2025-05-18 21:16:40,402 - INFO - Contenedor eliminado: s1
2025-05-18 21:16:40,402 - DEBUG - Eliminando contenedor s2
2025-05-18 21:16:40,435 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-18 21:16:40,435 - DEBUG - Eliminando contenedor s3
2025-05-18 21:16:40,448 - ERROR - Error al eliminar el contenedor s3: Command '['lxc', 'delete', 's3', '--force']' returned non-zero exit status 1.
2025-05-18 21:16:40,448 - DEBUG - Eliminando contenedor s4
2025-05-18 21:16:40,459 - ERROR - Error al eliminar el contenedor s4: Command '['lxc', 'delete', 's4', '--force']' returned non-zero exit status 1.
2025-05-18 21:16:40,459 - DEBUG - Eliminando contenedor cl
2025-05-18 21:16:42,580 - INFO - Contenedor eliminado: cl
2025-05-18 21:16:42,580 - DEBUG - Eliminando contenedor lb
2025-05-18 21:16:44,257 - INFO - Contenedor eliminado: lb
2025-05-18 21:16:44,257 - DEBUG - Eliminando contenedor db
2025-05-18 21:16:47,813 - INFO - Contenedor eliminado: db
2025-05-18 21:16:47,814 - DEBUG - Contenedores eliminados correctamente
2025-05-18 21:16:47,814 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-18 21:16:48,291 - INFO - Bridge eliminado: lxdbr1
2025-05-18 21:16:48,292 - INFO - Eliminación completada.
2025-05-18 21:17:47,646 - INFO - Orden recibida: create
2025-05-18 21:17:47,646 - INFO - Número de servidores especificado: 2
2025-05-18 21:17:47,646 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-18 21:17:47,646 - DEBUG - Parámetro recibido n_servers=2
2025-05-18 21:17:47,646 - DEBUG - Creando imagen base...
2025-05-18 21:17:47,646 - DEBUG - Verificando si la imagen ya está importada...
2025-05-18 21:17:47,660 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-18 21:17:53,978 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-18 21:17:53,978 - DEBUG - Configurando y creando bridges...
2025-05-18 21:17:54,026 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-18 21:17:54,096 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-18 21:17:54,096 - DEBUG - Creando bridge lxdbr1
2025-05-18 21:17:55,770 - INFO - Bridge creado: lxdbr1
2025-05-18 21:17:56,676 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-18 21:18:00,364 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-18 21:18:00,364 - DEBUG - Creando contenedores de servidores...
2025-05-18 21:18:00,364 - DEBUG - Intentando crear el contenedor s1
2025-05-18 21:18:10,230 - INFO - Contenedor s1 creado con éxito.
2025-05-18 21:18:10,230 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-18 21:18:10,394 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-18 21:18:10,394 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-18 21:18:10,447 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-18 21:18:10,447 - DEBUG - Intentando crear el contenedor s2
2025-05-18 21:18:20,818 - INFO - Contenedor s2 creado con éxito.
2025-05-18 21:18:20,818 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-18 21:18:20,940 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-18 21:18:20,940 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-18 21:18:21,018 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-18 21:18:21,019 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-18 21:18:21,020 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-18 21:18:21,020 - INFO - Número de servidores guardados correctamente
2025-05-18 21:18:21,020 - DEBUG - Creando balanceador...
2025-05-18 21:18:21,020 - DEBUG - Intentando crear el contenedor lb
2025-05-18 21:18:31,733 - INFO - Contenedor lb creado con éxito.
2025-05-18 21:18:31,733 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-18 21:18:31,844 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-18 21:18:31,844 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-18 21:18:31,878 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-18 21:18:31,878 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-18 21:18:31,953 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-18 21:18:31,953 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-18 21:18:32,032 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-18 21:18:32,032 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 21:18:32,552 - INFO - Contenedor iniciado: lb
2025-05-18 21:18:32,552 - DEBUG - Iniciando cambio de netplan en lb
2025-05-18 21:18:32,552 - DEBUG - Desactivando cloud-init en lb
2025-05-18 21:18:32,607 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-18 21:18:32,670 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-18 21:18:32,670 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-18 21:18:32,734 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-18 21:18:34,615 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-18 21:18:34,615 - DEBUG - Verificando estado antes de detener lb
2025-05-18 21:18:36,014 - INFO - Contenedor parado: lb
2025-05-18 21:18:36,014 - INFO - Balanceador configurado correctamente
2025-05-18 21:18:36,014 - DEBUG - Creando cliente...
2025-05-18 21:18:36,014 - DEBUG - Intentando crear el contenedor cl
2025-05-18 21:18:46,744 - INFO - Contenedor cl creado con éxito.
2025-05-18 21:18:46,744 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-18 21:18:46,842 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-18 21:18:46,842 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-18 21:18:46,884 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-18 21:18:46,884 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-18 21:18:47,408 - INFO - Contenedor iniciado: cl
2025-05-18 21:18:47,408 - DEBUG - Iniciando cambio de netplan en cl
2025-05-18 21:18:47,408 - DEBUG - Desactivando cloud-init en cl
2025-05-18 21:18:47,469 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-18 21:18:47,527 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-18 21:18:47,527 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-18 21:18:47,598 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-18 21:18:49,554 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-18 21:18:49,554 - DEBUG - Verificando estado antes de detener cl
2025-05-18 21:18:50,947 - INFO - Contenedor parado: cl
2025-05-18 21:18:50,947 - INFO - Cliente configurado correctamente
2025-05-18 21:18:50,947 - DEBUG - Intentando crear el contenedor db
2025-05-18 21:19:01,489 - INFO - Contenedor db creado con éxito.
2025-05-18 21:19:01,490 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-18 21:19:01,610 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-18 21:19:01,610 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-18 21:19:01,641 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-18 21:19:01,641 - INFO - Infraestructura creada correctamente.
2025-05-18 21:19:05,804 - INFO - Orden recibida: start
2025-05-18 21:19:05,804 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 21:19:05,805 - INFO - Número de servidores 2 cargados correctamente.
2025-05-18 21:19:05,805 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-18 21:19:05,805 - INFO - Iniciando todos los contenedores
2025-05-18 21:19:05,805 - DEBUG - Arrancando servidor: s1
2025-05-18 21:19:05,805 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-18 21:19:06,187 - INFO - Contenedor iniciado: s1
2025-05-18 21:19:06,187 - DEBUG - Arrancando servidor: s2
2025-05-18 21:19:06,188 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 21:19:06,467 - INFO - Contenedor iniciado: s2
2025-05-18 21:19:06,467 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-18 21:19:06,976 - INFO - Contenedor iniciado: cl
2025-05-18 21:19:06,976 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 21:19:07,582 - INFO - Contenedor iniciado: lb
2025-05-18 21:19:07,582 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-18 21:19:08,261 - INFO - Contenedor iniciado: db
2025-05-18 21:19:08,261 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-18 21:19:08,274 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-18 21:19:08,275 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-18 21:19:08,276 - INFO - Consola del contenedor cl abierta correctamente
2025-05-18 21:19:08,277 - INFO - Consola del contenedor lb abierta correctamente
2025-05-18 21:19:08,278 - INFO - Consola del contenedor db abierta correctamente
2025-05-18 21:19:24,556 - INFO - Orden recibida: configure
2025-05-18 21:19:24,557 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-18 21:19:24,557 - INFO - Número de servidores 2 cargados correctamente.
2025-05-18 21:19:24,557 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-18 21:19:24,557 - INFO - Iniciando configuración de la infraestructura...
2025-05-18 21:19:24,557 - INFO - Configurando base de datos MongoDB en: db
2025-05-18 21:19:24,557 - INFO - Iniciando instalación de MongoDB en db
2025-05-18 21:19:24,557 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-18 21:19:24,583 - INFO - Contenedor db ya está en ejecución.
2025-05-18 21:19:54,365 - DEBUG - Instalando MongoDB
2025-05-18 21:20:48,839 - DEBUG - Modificando bind_ip de MongoDB
2025-05-18 21:20:48,991 - DEBUG - Reiniciando contenedor db
2025-05-18 21:20:54,676 - INFO - MongoDB configurado con éxito en db
2025-05-18 21:20:54,676 - INFO - Configuración de base de datos completada correctamente.
2025-05-18 21:20:54,676 - INFO - Configurando servidor web s1
2025-05-18 21:20:54,676 - INFO - Iniciando configuración del servidor web s1
2025-05-18 21:20:54,676 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-18 21:20:54,700 - INFO - Contenedor s1 ya está en ejecución.
2025-05-18 21:20:54,700 - DEBUG - Actualizando paquetes en s1
2025-05-18 21:21:11,388 - DEBUG - Instalando Apache en s1
2025-05-18 21:21:38,745 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-18 21:21:39,314 - DEBUG - Transfiriendo aplicación web
2025-05-18 21:21:39,383 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-18 21:21:39,584 - DEBUG - Ejecutando instalación Node.js
2025-05-18 21:24:04,992 - DEBUG - Reiniciando servidor
2025-05-18 21:24:09,765 - DEBUG - Iniciando servidor Node.js con forever
2025-05-18 21:24:11,102 - INFO - Servidor web s1 configurado con éxito.
2025-05-18 21:24:11,102 - INFO - Configurando servidor web s2
2025-05-18 21:24:11,102 - INFO - Iniciando configuración del servidor web s2
2025-05-18 21:24:11,102 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-18 21:24:11,121 - INFO - Contenedor s2 ya está en ejecución.
2025-05-18 21:24:11,121 - DEBUG - Actualizando paquetes en s2
2025-05-18 21:24:32,766 - DEBUG - Instalando Apache en s2
2025-05-18 21:24:59,966 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-18 21:25:00,277 - DEBUG - Transfiriendo aplicación web
2025-05-18 21:25:00,332 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-18 21:25:00,754 - DEBUG - Ejecutando instalación Node.js
2025-05-18 21:27:22,945 - DEBUG - Reiniciando servidor
2025-05-18 21:27:27,751 - DEBUG - Iniciando servidor Node.js con forever
2025-05-18 21:27:28,509 - INFO - Servidor web s2 configurado con éxito.
2025-05-18 21:27:28,509 - INFO - Configurando balanceador lb
2025-05-18 21:27:28,509 - INFO - Instalando haproxy en el balanceador
2025-05-18 21:27:28,509 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 21:27:28,547 - INFO - Contenedor lb ya está en ejecución.
2025-05-18 21:28:00,050 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-18 21:28:00,051 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-18 21:28:00,073 - INFO - Contenedor lb ya está en ejecución.
2025-05-18 21:28:00,073 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-18 21:28:00,159 - DEBUG - Validando archivo haproxy.cfg
2025-05-18 21:28:00,229 - DEBUG - Iniciando servicio de haproxy
2025-05-18 21:28:01,338 - INFO - Haproxy instalado y configurado correctamente.
2025-05-18 21:28:01,338 - INFO - Balanceador configurado correctamente.
2025-05-19 09:35:51,904 - INFO - Orden recibida: delete
2025-05-19 09:35:51,904 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:35:51,905 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 09:35:51,905 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 09:35:51,905 - INFO - Eliminando toda la infraestructura
2025-05-19 09:35:51,905 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 09:35:51,980 - INFO - Imagen local eliminada con éxito.
2025-05-19 09:35:51,980 - DEBUG - Eliminando contenedor s1
2025-05-19 09:35:54,679 - INFO - Contenedor eliminado: s1
2025-05-19 09:35:54,679 - DEBUG - Eliminando contenedor s2
2025-05-19 09:35:54,689 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-19 09:35:54,689 - DEBUG - Eliminando contenedor cl
2025-05-19 09:35:56,858 - INFO - Contenedor eliminado: cl
2025-05-19 09:35:56,858 - DEBUG - Eliminando contenedor lb
2025-05-19 09:35:58,992 - INFO - Contenedor eliminado: lb
2025-05-19 09:35:58,992 - DEBUG - Eliminando contenedor db
2025-05-19 09:36:00,894 - INFO - Contenedor eliminado: db
2025-05-19 09:36:00,895 - DEBUG - Contenedores eliminados correctamente
2025-05-19 09:36:00,895 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 09:36:01,283 - INFO - Bridge eliminado: lxdbr1
2025-05-19 09:36:01,283 - INFO - Eliminación completada.
2025-05-19 09:36:05,869 - INFO - Orden recibida: list
2025-05-19 09:36:05,869 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:36:05,870 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 09:36:05,870 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 09:36:05,870 - INFO - Listando contenedores
2025-05-19 09:36:05,885 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 09:36:25,312 - INFO - Orden recibida: create
2025-05-19 09:36:25,312 - INFO - Número de servidores especificado: 1
2025-05-19 09:36:25,312 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-19 09:36:25,312 - DEBUG - Parámetro recibido n_servers=1
2025-05-19 09:36:25,312 - DEBUG - Creando imagen base...
2025-05-19 09:36:25,312 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 09:36:25,328 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 09:36:29,389 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 09:36:29,389 - DEBUG - Configurando y creando bridges...
2025-05-19 09:36:29,417 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 09:36:29,476 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 09:36:29,476 - DEBUG - Creando bridge lxdbr1
2025-05-19 09:36:31,134 - INFO - Bridge creado: lxdbr1
2025-05-19 09:36:32,042 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 09:36:35,404 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 09:36:35,404 - DEBUG - Creando contenedores de servidores...
2025-05-19 09:36:35,404 - DEBUG - Intentando crear el contenedor s1
2025-05-19 09:36:45,098 - INFO - Contenedor s1 creado con éxito.
2025-05-19 09:36:45,098 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 09:36:45,152 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 09:36:45,152 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 09:36:45,195 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 09:36:45,195 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 09:36:45,197 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 09:36:45,197 - INFO - Número de servidores guardados correctamente
2025-05-19 09:36:45,197 - DEBUG - Creando balanceador...
2025-05-19 09:36:45,197 - DEBUG - Intentando crear el contenedor lb
2025-05-19 09:36:55,067 - INFO - Contenedor lb creado con éxito.
2025-05-19 09:36:55,067 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 09:36:55,224 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 09:36:55,224 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 09:36:55,267 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 09:36:55,267 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 09:36:55,341 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 09:36:55,341 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 09:36:55,393 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 09:36:55,394 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:36:55,949 - INFO - Contenedor iniciado: lb
2025-05-19 09:36:55,950 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 09:36:55,950 - DEBUG - Desactivando cloud-init en lb
2025-05-19 09:36:56,005 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 09:36:56,102 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 09:36:56,102 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 09:36:56,171 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 09:36:58,238 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 09:36:58,238 - DEBUG - Verificando estado antes de detener lb
2025-05-19 09:37:01,281 - INFO - Contenedor parado: lb
2025-05-19 09:37:01,281 - INFO - Balanceador configurado correctamente
2025-05-19 09:37:01,282 - DEBUG - Creando cliente...
2025-05-19 09:37:01,282 - DEBUG - Intentando crear el contenedor cl
2025-05-19 09:37:17,022 - INFO - Contenedor cl creado con éxito.
2025-05-19 09:37:17,022 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 09:37:17,203 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 09:37:17,203 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 09:37:17,244 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 09:37:17,244 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 09:37:17,582 - INFO - Contenedor iniciado: cl
2025-05-19 09:37:17,582 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 09:37:17,582 - DEBUG - Desactivando cloud-init en cl
2025-05-19 09:37:17,622 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 09:37:17,683 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 09:37:17,683 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 09:37:17,735 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 09:37:19,586 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 09:37:19,586 - DEBUG - Verificando estado antes de detener cl
2025-05-19 09:37:22,771 - INFO - Contenedor parado: cl
2025-05-19 09:37:22,772 - INFO - Cliente configurado correctamente
2025-05-19 09:37:22,772 - DEBUG - Intentando crear el contenedor db
2025-05-19 09:37:22,822 - WARNING - El contenedor db ya existe.
2025-05-19 09:37:22,822 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 09:37:22,855 - WARNING - El contenedor db ya está conectado a lxdbr0 por eth0
2025-05-19 09:37:22,855 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 09:37:23,100 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 09:37:23,101 - INFO - Infraestructura creada correctamente.
2025-05-19 09:37:32,888 - INFO - Orden recibida: start
2025-05-19 09:37:32,888 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:37:32,889 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 09:37:32,889 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 09:37:32,889 - INFO - Iniciando todos los contenedores
2025-05-19 09:37:32,889 - DEBUG - Arrancando servidor: s1
2025-05-19 09:37:32,889 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 09:37:32,944 - INFO - Contenedor s1 ya está en ejecución.
2025-05-19 09:37:32,944 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 09:37:33,399 - INFO - Contenedor iniciado: cl
2025-05-19 09:37:33,399 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:37:33,475 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 09:37:33,476 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 09:37:33,579 - INFO - Contenedor db ya está en ejecución.
2025-05-19 09:37:33,591 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 09:37:33,639 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-19 09:37:33,653 - INFO - Consola del contenedor cl abierta correctamente
2025-05-19 09:37:33,683 - INFO - Consola del contenedor lb abierta correctamente
2025-05-19 09:37:33,710 - INFO - Consola del contenedor db abierta correctamente
2025-05-19 09:37:39,381 - INFO - Orden recibida: list
2025-05-19 09:37:39,381 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:37:39,381 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 09:37:39,381 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 09:37:39,381 - INFO - Listando contenedores
2025-05-19 09:37:39,476 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 09:38:07,823 - INFO - Orden recibida: delete
2025-05-19 09:38:07,823 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:38:07,823 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 09:38:07,823 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 09:38:07,824 - INFO - Eliminando toda la infraestructura
2025-05-19 09:38:07,824 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 09:38:07,898 - INFO - Imagen local eliminada con éxito.
2025-05-19 09:38:07,898 - DEBUG - Eliminando contenedor s1
2025-05-19 09:38:07,908 - ERROR - Error al eliminar el contenedor s1: Command '['lxc', 'delete', 's1', '--force']' returned non-zero exit status 1.
2025-05-19 09:38:07,908 - DEBUG - Eliminando contenedor cl
2025-05-19 09:38:09,594 - INFO - Contenedor eliminado: cl
2025-05-19 09:38:09,594 - DEBUG - Eliminando contenedor lb
2025-05-19 09:38:09,609 - ERROR - Error al eliminar el contenedor lb: Command '['lxc', 'delete', 'lb', '--force']' returned non-zero exit status 1.
2025-05-19 09:38:09,610 - DEBUG - Eliminando contenedor db
2025-05-19 09:38:11,465 - INFO - Contenedor eliminado: db
2025-05-19 09:38:11,465 - DEBUG - Contenedores eliminados correctamente
2025-05-19 09:38:11,465 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 09:38:11,476 - ERROR - Error al eliminar el bridge lxdbr1: Command '['lxc', 'network', 'delete', 'lxdbr1']' returned non-zero exit status 1.
2025-05-19 09:38:11,476 - INFO - Eliminación completada.
2025-05-19 09:39:14,389 - INFO - Orden recibida: delete
2025-05-19 09:39:14,390 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:39:14,390 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 09:39:14,390 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 09:39:14,390 - INFO - Eliminando toda la infraestructura
2025-05-19 09:39:14,390 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 09:39:14,474 - INFO - Imagen local eliminada con éxito.
2025-05-19 09:39:14,474 - DEBUG - Eliminando contenedor s1
2025-05-19 09:39:26,291 - INFO - Contenedor eliminado: s1
2025-05-19 09:39:26,292 - DEBUG - Eliminando contenedor cl
2025-05-19 09:39:28,219 - INFO - Contenedor eliminado: cl
2025-05-19 09:39:28,219 - DEBUG - Eliminando contenedor lb
2025-05-19 09:39:29,971 - INFO - Contenedor eliminado: lb
2025-05-19 09:39:29,971 - DEBUG - Eliminando contenedor db
2025-05-19 09:39:33,157 - INFO - Contenedor eliminado: db
2025-05-19 09:39:33,157 - DEBUG - Contenedores eliminados correctamente
2025-05-19 09:39:33,157 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 09:39:33,546 - INFO - Bridge eliminado: lxdbr1
2025-05-19 09:39:33,546 - INFO - Eliminación completada.
2025-05-19 09:39:40,452 - INFO - Orden recibida: create
2025-05-19 09:39:40,452 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-19 09:39:40,453 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-19 09:39:40,453 - DEBUG - Parámetro recibido n_servers=2
2025-05-19 09:39:40,453 - DEBUG - Creando imagen base...
2025-05-19 09:39:40,453 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 09:39:40,466 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 09:39:44,272 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 09:39:44,272 - DEBUG - Configurando y creando bridges...
2025-05-19 09:39:44,301 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 09:39:44,354 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 09:39:44,354 - DEBUG - Creando bridge lxdbr1
2025-05-19 09:39:46,021 - INFO - Bridge creado: lxdbr1
2025-05-19 09:39:46,952 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 09:39:50,504 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 09:39:50,504 - DEBUG - Creando contenedores de servidores...
2025-05-19 09:39:50,504 - DEBUG - Intentando crear el contenedor s1
2025-05-19 09:39:59,946 - INFO - Contenedor s1 creado con éxito.
2025-05-19 09:39:59,946 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 09:40:00,067 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 09:40:00,068 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 09:40:00,134 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 09:40:00,134 - DEBUG - Intentando crear el contenedor s2
2025-05-19 09:40:09,820 - INFO - Contenedor s2 creado con éxito.
2025-05-19 09:40:09,820 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 09:40:09,963 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 09:40:09,964 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 09:40:10,017 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 09:40:10,017 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 09:40:10,018 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 09:40:10,018 - INFO - Número de servidores guardados correctamente
2025-05-19 09:40:10,018 - DEBUG - Creando balanceador...
2025-05-19 09:40:10,019 - DEBUG - Intentando crear el contenedor lb
2025-05-19 09:40:20,017 - INFO - Contenedor lb creado con éxito.
2025-05-19 09:40:20,017 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 09:40:20,208 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 09:40:20,208 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 09:40:20,464 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 09:40:20,464 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 09:40:20,792 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 09:40:20,792 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 09:40:21,271 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 09:40:21,271 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:40:21,893 - INFO - Contenedor iniciado: lb
2025-05-19 09:40:21,893 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 09:40:21,893 - DEBUG - Desactivando cloud-init en lb
2025-05-19 09:40:21,939 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 09:40:21,982 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 09:40:21,982 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 09:40:22,102 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 09:40:27,007 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 09:40:27,008 - DEBUG - Verificando estado antes de detener lb
2025-05-19 09:40:30,218 - INFO - Contenedor parado: lb
2025-05-19 09:40:30,218 - INFO - Balanceador configurado correctamente
2025-05-19 09:40:30,218 - DEBUG - Creando cliente...
2025-05-19 09:40:30,218 - DEBUG - Intentando crear el contenedor cl
2025-05-19 09:40:40,793 - INFO - Contenedor cl creado con éxito.
2025-05-19 09:40:40,793 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 09:40:40,836 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 09:40:40,836 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 09:40:40,917 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 09:40:40,918 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 09:40:41,401 - INFO - Contenedor iniciado: cl
2025-05-19 09:40:41,401 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 09:40:41,401 - DEBUG - Desactivando cloud-init en cl
2025-05-19 09:40:41,458 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 09:40:41,508 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 09:40:41,508 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 09:40:41,536 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 09:40:43,439 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 09:40:43,439 - DEBUG - Verificando estado antes de detener cl
2025-05-19 09:40:44,871 - INFO - Contenedor parado: cl
2025-05-19 09:40:44,871 - INFO - Cliente configurado correctamente
2025-05-19 09:40:44,872 - DEBUG - Intentando crear el contenedor db
2025-05-19 09:40:54,586 - INFO - Contenedor db creado con éxito.
2025-05-19 09:40:54,586 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 09:40:55,486 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-19 09:40:55,486 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 09:40:55,580 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 09:40:55,580 - INFO - Infraestructura creada correctamente.
2025-05-19 09:41:01,869 - INFO - Orden recibida: start
2025-05-19 09:41:01,869 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:41:01,869 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 09:41:01,869 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 09:41:01,869 - INFO - Iniciando todos los contenedores
2025-05-19 09:41:01,869 - DEBUG - Arrancando servidor: s1
2025-05-19 09:41:01,869 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 09:41:02,200 - INFO - Contenedor iniciado: s1
2025-05-19 09:41:02,200 - DEBUG - Arrancando servidor: s2
2025-05-19 09:41:02,200 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-19 09:41:02,499 - INFO - Contenedor iniciado: s2
2025-05-19 09:41:02,499 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 09:41:02,948 - INFO - Contenedor iniciado: cl
2025-05-19 09:41:02,948 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:41:03,370 - INFO - Contenedor iniciado: lb
2025-05-19 09:41:03,371 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 09:41:03,796 - INFO - Contenedor iniciado: db
2025-05-19 09:41:03,796 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 09:41:03,800 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-19 09:41:03,810 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-19 09:41:03,811 - INFO - Consola del contenedor cl abierta correctamente
2025-05-19 09:41:03,823 - INFO - Consola del contenedor lb abierta correctamente
2025-05-19 09:41:03,863 - INFO - Consola del contenedor db abierta correctamente
2025-05-19 09:41:10,357 - INFO - Orden recibida: list
2025-05-19 09:41:10,357 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:41:10,358 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 09:41:10,358 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 09:41:10,358 - INFO - Listando contenedores
2025-05-19 09:41:10,383 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 09:41:16,872 - INFO - Orden recibida: configure
2025-05-19 09:41:16,872 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 09:41:16,873 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 09:41:16,873 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 09:41:16,873 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 09:41:16,873 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 09:41:16,873 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 09:41:16,873 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 09:41:16,896 - INFO - Contenedor db ya está en ejecución.
2025-05-19 09:41:36,556 - DEBUG - Instalando MongoDB
2025-05-19 09:41:38,583 - CRITICAL - Error instalando/configurando MongoDB en db: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 129.
2025-05-19 09:41:38,583 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 09:41:38,583 - INFO - Configurando servidor web s1
2025-05-19 09:41:38,583 - INFO - Iniciando configuración del servidor web s1
2025-05-19 09:41:38,583 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 09:41:38,598 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'info', 's1']' returned non-zero exit status 1.
2025-05-19 09:41:38,598 - DEBUG - Actualizando paquetes en s1
2025-05-19 09:41:38,614 - CRITICAL - Error al configurar el servidor s1: Command '['lxc', 'exec', 's1', '--', 'apt', 'update']' returned non-zero exit status 1.
2025-05-19 09:41:38,614 - INFO - Configurando servidor web s2
2025-05-19 09:41:38,614 - INFO - Iniciando configuración del servidor web s2
2025-05-19 09:41:38,614 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-19 09:41:38,630 - INFO - Contenedor s2 ya está en ejecución.
2025-05-19 09:41:38,631 - DEBUG - Actualizando paquetes en s2
2025-05-19 09:41:52,089 - DEBUG - Instalando Apache en s2
2025-05-19 09:43:25,542 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 09:43:25,802 - DEBUG - Transfiriendo aplicación web
2025-05-19 09:43:25,829 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 09:43:26,163 - DEBUG - Ejecutando instalación Node.js
2025-05-19 09:46:33,742 - DEBUG - Reiniciando servidor
2025-05-19 09:46:39,844 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 09:46:40,597 - INFO - Servidor web s2 configurado con éxito.
2025-05-19 09:46:40,597 - INFO - Configurando balanceador lb
2025-05-19 09:46:40,597 - INFO - Instalando haproxy en el balanceador
2025-05-19 09:46:40,597 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:46:40,620 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 09:47:14,941 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-19 09:47:14,941 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 09:47:14,960 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 09:47:14,961 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-19 09:47:15,110 - DEBUG - Validando archivo haproxy.cfg
2025-05-19 09:47:15,211 - DEBUG - Iniciando servicio de haproxy
2025-05-19 09:47:16,485 - INFO - Haproxy instalado y configurado correctamente.
2025-05-19 09:47:16,485 - INFO - Balanceador configurado correctamente.
2025-05-19 10:06:32,772 - INFO - Orden recibida: delete
2025-05-19 10:06:32,772 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:06:32,773 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:06:32,773 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:06:32,773 - INFO - Eliminando toda la infraestructura
2025-05-19 10:06:32,773 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 10:06:32,901 - INFO - Imagen local eliminada con éxito.
2025-05-19 10:06:32,901 - DEBUG - Eliminando contenedor s1
2025-05-19 10:06:37,531 - INFO - Contenedor eliminado: s1
2025-05-19 10:06:37,531 - DEBUG - Eliminando contenedor s2
2025-05-19 10:06:42,463 - INFO - Contenedor eliminado: s2
2025-05-19 10:06:42,463 - DEBUG - Eliminando contenedor cl
2025-05-19 10:06:47,046 - INFO - Contenedor eliminado: cl
2025-05-19 10:06:47,047 - DEBUG - Eliminando contenedor lb
2025-05-19 10:06:49,412 - INFO - Contenedor eliminado: lb
2025-05-19 10:06:49,412 - DEBUG - Eliminando contenedor db
2025-05-19 10:06:54,935 - INFO - Contenedor eliminado: db
2025-05-19 10:06:54,935 - DEBUG - Contenedores eliminados correctamente
2025-05-19 10:06:54,935 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 10:06:55,286 - INFO - Bridge eliminado: lxdbr1
2025-05-19 10:06:55,286 - INFO - Eliminación completada.
2025-05-19 10:16:12,152 - INFO - Orden recibida: create
2025-05-19 10:16:12,152 - INFO - Número de servidores especificado: 1
2025-05-19 10:16:12,153 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-19 10:16:12,153 - DEBUG - Parámetro recibido n_servers=1
2025-05-19 10:16:12,153 - DEBUG - Creando imagen base...
2025-05-19 10:16:12,153 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 10:16:12,195 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 10:16:17,859 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 10:16:17,859 - DEBUG - Configurando y creando bridges...
2025-05-19 10:16:18,718 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 10:16:22,313 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 10:16:22,313 - DEBUG - Creando bridge lxdbr1
2025-05-19 10:16:23,936 - INFO - Bridge creado: lxdbr1
2025-05-19 10:16:24,815 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 10:16:28,387 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 10:16:28,387 - DEBUG - Creando contenedores de servidores...
2025-05-19 10:16:28,388 - DEBUG - Intentando crear el contenedor s1
2025-05-19 10:16:37,850 - INFO - Contenedor s1 creado con éxito.
2025-05-19 10:16:37,851 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 10:16:37,904 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 10:16:37,904 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 10:16:37,929 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 10:16:37,929 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 10:16:37,931 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 10:16:37,931 - INFO - Número de servidores guardados correctamente
2025-05-19 10:16:37,931 - DEBUG - Creando balanceador...
2025-05-19 10:16:37,931 - DEBUG - Intentando crear el contenedor lb
2025-05-19 10:16:48,083 - INFO - Contenedor lb creado con éxito.
2025-05-19 10:16:48,083 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 10:16:48,181 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 10:16:48,181 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 10:16:48,279 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 10:16:48,279 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 10:16:48,373 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 10:16:48,373 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 10:16:48,486 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 10:16:48,486 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:16:49,584 - INFO - Contenedor iniciado: lb
2025-05-19 10:16:49,585 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 10:16:49,585 - DEBUG - Desactivando cloud-init en lb
2025-05-19 10:16:49,709 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 10:16:49,788 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 10:16:49,788 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 10:16:49,838 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 10:16:53,834 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 10:16:53,834 - DEBUG - Verificando estado antes de detener lb
2025-05-19 10:16:55,247 - INFO - Contenedor parado: lb
2025-05-19 10:16:55,247 - INFO - Balanceador configurado correctamente
2025-05-19 10:16:55,247 - DEBUG - Creando cliente...
2025-05-19 10:16:55,247 - DEBUG - Intentando crear el contenedor cl
2025-05-19 10:17:04,771 - INFO - Contenedor cl creado con éxito.
2025-05-19 10:17:04,771 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 10:17:04,950 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 10:17:04,950 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 10:17:05,024 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 10:17:05,024 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:17:05,829 - INFO - Contenedor iniciado: cl
2025-05-19 10:17:05,829 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 10:17:05,829 - DEBUG - Desactivando cloud-init en cl
2025-05-19 10:17:06,023 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 10:17:06,063 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 10:17:06,064 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 10:17:06,129 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 10:17:10,271 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 10:17:10,271 - DEBUG - Verificando estado antes de detener cl
2025-05-19 10:17:11,721 - INFO - Contenedor parado: cl
2025-05-19 10:17:11,721 - INFO - Cliente configurado correctamente
2025-05-19 10:17:11,721 - DEBUG - Intentando crear el contenedor db
2025-05-19 10:17:21,146 - INFO - Contenedor db creado con éxito.
2025-05-19 10:17:21,146 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 10:17:21,250 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-19 10:17:21,250 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 10:17:21,442 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 10:17:21,442 - INFO - Infraestructura creada correctamente.
2025-05-19 10:17:33,831 - INFO - Orden recibida: configure
2025-05-19 10:17:33,831 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:17:33,832 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:17:33,832 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:17:33,832 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 10:17:33,832 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 10:17:33,832 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 10:17:33,832 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:17:34,145 - INFO - Contenedor iniciado: db
2025-05-19 10:17:34,653 - DEBUG - Instalando MongoDB
2025-05-19 10:17:34,808 - CRITICAL - Error instalando/configurando MongoDB en db: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
2025-05-19 10:17:34,808 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 10:17:34,808 - INFO - Configurando servidor web s1
2025-05-19 10:17:34,809 - INFO - Iniciando configuración del servidor web s1
2025-05-19 10:17:34,809 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:17:35,077 - INFO - Contenedor iniciado: s1
2025-05-19 10:17:35,077 - DEBUG - Actualizando paquetes en s1
2025-05-19 10:17:35,604 - DEBUG - Instalando Apache en s1
2025-05-19 10:17:35,935 - CRITICAL - Error al configurar el servidor s1: Command '['lxc', 'exec', 's1', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-19 10:17:35,935 - INFO - Configurando balanceador lb
2025-05-19 10:17:35,935 - INFO - Instalando haproxy en el balanceador
2025-05-19 10:17:35,935 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:17:36,296 - INFO - Contenedor iniciado: lb
2025-05-19 10:17:37,236 - CRITICAL - Error en instalación de haproxy: Command '['lxc', 'exec', 'lb', '--', 'apt', 'install', '-y', 'haproxy']' returned non-zero exit status 100.
2025-05-19 10:17:37,236 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-19 10:17:37,236 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:17:37,261 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 10:17:37,261 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-19 10:17:37,308 - CRITICAL - Error en configuración de HAProxy: Command 'echo "
    global
        log /dev/log local0
        log /dev/log local1 notice
        chroot /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin
        stats timeout 30s
        user haproxy
        group haproxy
        daemon
    
        # Default SSL material locations
            ca-base /etc/ssl/certs
            crt-base /etc/ssl/private
        # Default ciphers to use on SSL-enabled listening sockets.
        # For more information, see ciphers(1SSL). This list is from:
        # https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
        ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
        ssl-default-bind-options no-sslv3

    defaults
        log global
        mode http
        option httplog
        option dontlognull
        timeout connect 5000
        timeout client 50000
        timeout server 50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http

    frontend firstbalance
        bind *:80
        option forwardfor
        default_backend webservers

    backend webservers
        balance roundrobin
        server webserver1 134.3.0.11:8001
        server webserver2 134.3.0.12:8001
        server webserver3 134.3.0.13:8001
        server webserver4 134.3.0.14:8001
        server webserver5 134.3.0.15:8001
        option httpchk
    " | lxc exec lb -- tee /etc/haproxy/haproxy.cfg' returned non-zero exit status 1.
2025-05-19 10:17:37,308 - INFO - Balanceador configurado correctamente.
2025-05-19 10:18:26,531 - INFO - Orden recibida: list
2025-05-19 10:18:26,531 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:18:26,531 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:18:26,531 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:18:26,531 - INFO - Listando contenedores
2025-05-19 10:18:26,555 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 10:20:38,280 - INFO - Orden recibida: stop
2025-05-19 10:20:38,280 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:20:38,281 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:20:38,281 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:20:38,281 - INFO - Parando todos los contenedores
2025-05-19 10:20:38,281 - DEBUG - Verificando estado antes de detener s1
2025-05-19 10:20:40,011 - INFO - Contenedor parado: s1
2025-05-19 10:20:40,011 - DEBUG - Verificando estado antes de detener cl
2025-05-19 10:20:40,024 - INFO - Contenedor cl ya está detenido.
2025-05-19 10:20:40,024 - DEBUG - Verificando estado antes de detener lb
2025-05-19 10:20:41,802 - INFO - Contenedor parado: lb
2025-05-19 10:20:41,802 - DEBUG - Verificando estado antes de detener db
2025-05-19 10:20:43,434 - INFO - Contenedor parado: db
2025-05-19 10:20:43,434 - INFO - Todos los contenedores han sido parados
2025-05-19 10:21:37,106 - INFO - Orden recibida: configure
2025-05-19 10:21:37,106 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:21:37,106 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:21:37,106 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:21:37,106 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 10:21:37,106 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 10:21:37,106 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 10:21:37,106 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:21:37,429 - INFO - Contenedor iniciado: db
2025-05-19 10:21:51,087 - DEBUG - Instalando MongoDB
2025-05-19 10:22:14,186 - DEBUG - Modificando bind_ip de MongoDB
2025-05-19 10:22:14,232 - DEBUG - Reiniciando contenedor db
2025-05-19 10:22:18,122 - INFO - MongoDB configurado con éxito en db
2025-05-19 10:22:18,122 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 10:22:18,122 - INFO - Configurando servidor web s1
2025-05-19 10:22:18,123 - INFO - Iniciando configuración del servidor web s1
2025-05-19 10:22:18,123 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:22:18,403 - INFO - Contenedor iniciado: s1
2025-05-19 10:22:19,404 - DEBUG - Actualizando paquetes en s1
2025-05-19 10:22:32,076 - DEBUG - Instalando Apache en s1
2025-05-19 10:23:00,796 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 10:23:00,885 - DEBUG - Transfiriendo aplicación web
2025-05-19 10:23:00,924 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 10:23:01,020 - DEBUG - Ejecutando instalación Node.js
2025-05-19 10:25:27,893 - DEBUG - Reiniciando servidor
2025-05-19 10:25:30,947 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 10:25:31,786 - INFO - Servidor web s1 configurado con éxito.
2025-05-19 10:25:31,787 - INFO - Configurando balanceador lb
2025-05-19 10:25:31,787 - INFO - Instalando haproxy en el balanceador
2025-05-19 10:25:31,787 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:25:32,176 - INFO - Contenedor iniciado: lb
2025-05-19 10:25:34,946 - CRITICAL - Error en instalación de haproxy: Command '['lxc', 'exec', 'lb', '--', 'apt', 'install', '-y', 'haproxy']' returned non-zero exit status 100.
2025-05-19 10:25:34,946 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-19 10:25:34,946 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:25:34,969 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 10:25:34,969 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-19 10:25:35,016 - CRITICAL - Error en configuración de HAProxy: Command 'echo "
    global
        log /dev/log local0
        log /dev/log local1 notice
        chroot /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin
        stats timeout 30s
        user haproxy
        group haproxy
        daemon
    
        # Default SSL material locations
            ca-base /etc/ssl/certs
            crt-base /etc/ssl/private
        # Default ciphers to use on SSL-enabled listening sockets.
        # For more information, see ciphers(1SSL). This list is from:
        # https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
        ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS
        ssl-default-bind-options no-sslv3

    defaults
        log global
        mode http
        option httplog
        option dontlognull
        timeout connect 5000
        timeout client 50000
        timeout server 50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http

    frontend firstbalance
        bind *:80
        option forwardfor
        default_backend webservers

    backend webservers
        balance roundrobin
        server webserver1 134.3.0.11:8001
        server webserver2 134.3.0.12:8001
        server webserver3 134.3.0.13:8001
        server webserver4 134.3.0.14:8001
        server webserver5 134.3.0.15:8001
        option httpchk
    " | lxc exec lb -- tee /etc/haproxy/haproxy.cfg' returned non-zero exit status 1.
2025-05-19 10:25:35,016 - INFO - Balanceador configurado correctamente.
2025-05-19 10:28:01,661 - INFO - Orden recibida: configure
2025-05-19 10:28:01,661 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:28:01,662 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:28:01,662 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:28:01,662 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 10:28:01,662 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 10:28:01,662 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 10:28:01,662 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:28:01,678 - INFO - Contenedor db ya está en ejecución.
2025-05-19 10:28:06,063 - DEBUG - Instalando MongoDB
2025-05-19 10:28:06,769 - DEBUG - Modificando bind_ip de MongoDB
2025-05-19 10:28:06,830 - DEBUG - Reiniciando contenedor db
2025-05-19 10:28:08,767 - INFO - MongoDB configurado con éxito en db
2025-05-19 10:28:08,767 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 10:28:08,768 - INFO - Configurando servidor web s1
2025-05-19 10:28:08,768 - INFO - Iniciando configuración del servidor web s1
2025-05-19 10:28:08,768 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:28:08,806 - INFO - Contenedor s1 ya está en ejecución.
2025-05-19 10:28:09,806 - DEBUG - Actualizando paquetes en s1
2025-05-19 10:28:13,928 - DEBUG - Instalando Apache en s1
2025-05-19 10:28:14,691 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 10:28:14,783 - DEBUG - Transfiriendo aplicación web
2025-05-19 10:28:14,853 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 10:28:15,800 - DEBUG - Ejecutando instalación Node.js
2025-05-19 10:28:46,136 - DEBUG - Reiniciando servidor
2025-05-19 10:28:49,042 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 10:28:49,708 - INFO - Servidor web s1 configurado con éxito.
2025-05-19 10:28:49,708 - INFO - Configurando balanceador lb
2025-05-19 10:28:49,709 - INFO - Instalando haproxy en el balanceador
2025-05-19 10:28:49,709 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:28:49,763 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 10:29:15,103 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-19 10:29:15,103 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:29:15,118 - INFO - Contenedor lb ya está en ejecución.
2025-05-19 10:29:16,118 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-19 10:29:16,178 - DEBUG - Validando archivo haproxy.cfg
2025-05-19 10:29:16,236 - DEBUG - Iniciando servicio de haproxy
2025-05-19 10:29:17,258 - INFO - Haproxy instalado y configurado correctamente.
2025-05-19 10:29:17,258 - INFO - Balanceador configurado correctamente.
2025-05-19 10:33:12,421 - INFO - Orden recibida: delete
2025-05-19 10:33:12,421 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:33:12,422 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:33:12,422 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:33:12,422 - INFO - Eliminando toda la infraestructura
2025-05-19 10:33:12,422 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 10:33:12,490 - INFO - Imagen local eliminada con éxito.
2025-05-19 10:33:12,490 - DEBUG - Eliminando contenedor s1
2025-05-19 10:33:15,314 - INFO - Contenedor eliminado: s1
2025-05-19 10:33:15,314 - DEBUG - Eliminando contenedor cl
2025-05-19 10:33:16,115 - INFO - Contenedor eliminado: cl
2025-05-19 10:33:16,115 - DEBUG - Eliminando contenedor lb
2025-05-19 10:33:18,159 - INFO - Contenedor eliminado: lb
2025-05-19 10:33:18,159 - DEBUG - Eliminando contenedor db
2025-05-19 10:33:20,370 - INFO - Contenedor eliminado: db
2025-05-19 10:33:20,371 - DEBUG - Contenedores eliminados correctamente
2025-05-19 10:33:20,371 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 10:33:20,737 - INFO - Bridge eliminado: lxdbr1
2025-05-19 10:33:20,737 - INFO - Eliminación completada.
2025-05-19 10:44:41,137 - INFO - Orden recibida: list
2025-05-19 10:44:41,137 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:44:41,137 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:44:41,137 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:44:41,138 - INFO - Listando contenedores
2025-05-19 10:44:41,151 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 10:44:48,364 - INFO - Orden recibida: configure
2025-05-19 10:44:48,364 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:44:48,364 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:44:48,364 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:44:48,364 - INFO - Iniciando todos los contenedores
2025-05-19 10:44:48,364 - DEBUG - Arrancando servidor: s1
2025-05-19 10:44:48,364 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:44:48,379 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'info', 's1']' returned non-zero exit status 1.
2025-05-19 10:44:48,380 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:44:48,391 - ERROR - Error al iniciar el contenedor cl: Command '['lxc', 'info', 'cl']' returned non-zero exit status 1.
2025-05-19 10:44:48,391 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:44:48,402 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'info', 'lb']' returned non-zero exit status 1.
2025-05-19 10:44:48,402 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:44:48,416 - ERROR - Error al iniciar el contenedor db: Command '['lxc', 'info', 'db']' returned non-zero exit status 1.
2025-05-19 10:44:48,416 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 10:45:16,400 - INFO - Orden recibida: configure
2025-05-19 10:45:16,400 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:45:16,401 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:45:16,401 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:45:16,401 - INFO - Iniciando todos los contenedores
2025-05-19 10:45:16,401 - DEBUG - Arrancando servidor: s1
2025-05-19 10:45:16,401 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:45:16,411 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'info', 's1']' returned non-zero exit status 1.
2025-05-19 10:45:16,411 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:45:16,422 - ERROR - Error al iniciar el contenedor cl: Command '['lxc', 'info', 'cl']' returned non-zero exit status 1.
2025-05-19 10:45:16,422 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:45:16,432 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'info', 'lb']' returned non-zero exit status 1.
2025-05-19 10:45:16,432 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:45:16,443 - ERROR - Error al iniciar el contenedor db: Command '['lxc', 'info', 'db']' returned non-zero exit status 1.
2025-05-19 10:45:16,443 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 10:46:10,342 - INFO - Orden recibida: configure
2025-05-19 10:46:10,342 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:46:10,342 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:46:10,342 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:46:10,342 - INFO - Iniciando todos los contenedores
2025-05-19 10:46:10,342 - DEBUG - Arrancando servidor: s1
2025-05-19 10:46:10,342 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:46:10,354 - ERROR - Error al iniciar el contenedor s1: Command '['lxc', 'info', 's1']' returned non-zero exit status 1.
2025-05-19 10:46:10,354 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:46:10,365 - ERROR - Error al iniciar el contenedor cl: Command '['lxc', 'info', 'cl']' returned non-zero exit status 1.
2025-05-19 10:46:10,365 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:46:10,376 - ERROR - Error al iniciar el contenedor lb: Command '['lxc', 'info', 'lb']' returned non-zero exit status 1.
2025-05-19 10:46:10,376 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:46:10,388 - ERROR - Error al iniciar el contenedor db: Command '['lxc', 'info', 'db']' returned non-zero exit status 1.
2025-05-19 10:46:10,388 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 10:46:10,388 - ERROR - No se pudo leer num_servers.txt: [Errno 2] No such file or directory: 'num_servers.txt'
2025-05-19 10:46:10,388 - ERROR - Primero debes hacer un create. La infraestructura no está creada correctamente.
2025-05-19 10:48:14,561 - INFO - Orden recibida: configure
2025-05-19 10:48:14,561 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:48:14,562 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 10:48:14,562 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 10:48:14,562 - ERROR - No se pudo leer num_servers.txt: [Errno 2] No such file or directory: 'num_servers.txt'
2025-05-19 10:48:14,562 - ERROR - Primero debes hacer un create. La infraestructura no está creada correctamente.
2025-05-19 10:48:40,792 - INFO - Orden recibida: create
2025-05-19 10:48:40,793 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-19 10:48:40,793 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-19 10:48:40,793 - DEBUG - Parámetro recibido n_servers=2
2025-05-19 10:48:40,793 - DEBUG - Creando imagen base...
2025-05-19 10:48:40,793 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 10:48:40,806 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 10:48:42,462 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 10:48:42,462 - DEBUG - Configurando y creando bridges...
2025-05-19 10:48:42,500 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 10:48:42,564 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 10:48:42,565 - DEBUG - Creando bridge lxdbr1
2025-05-19 10:48:44,340 - INFO - Bridge creado: lxdbr1
2025-05-19 10:48:45,232 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 10:48:48,879 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 10:48:48,879 - DEBUG - Creando contenedores de servidores...
2025-05-19 10:48:48,879 - DEBUG - Intentando crear el contenedor s1
2025-05-19 10:48:58,725 - INFO - Contenedor s1 creado con éxito.
2025-05-19 10:48:58,725 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 10:48:58,772 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 10:48:58,772 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 10:48:58,802 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 10:48:58,802 - DEBUG - Intentando crear el contenedor s2
2025-05-19 10:49:08,508 - INFO - Contenedor s2 creado con éxito.
2025-05-19 10:49:08,508 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 10:49:08,597 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 10:49:08,597 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 10:49:08,662 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 10:49:08,662 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 10:49:08,665 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 10:49:08,665 - INFO - Número de servidores guardados correctamente
2025-05-19 10:49:08,665 - DEBUG - Creando balanceador...
2025-05-19 10:49:08,665 - DEBUG - Intentando crear el contenedor lb
2025-05-19 10:49:18,597 - INFO - Contenedor lb creado con éxito.
2025-05-19 10:49:18,597 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 10:49:18,703 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 10:49:18,703 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 10:49:18,742 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 10:49:18,743 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 10:49:18,834 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 10:49:18,835 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 10:49:18,901 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 10:49:18,902 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:49:19,971 - INFO - Contenedor iniciado: lb
2025-05-19 10:49:19,972 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 10:49:19,972 - DEBUG - Desactivando cloud-init en lb
2025-05-19 10:49:20,024 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 10:49:20,084 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 10:49:20,084 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 10:49:20,239 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 10:49:23,549 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 10:49:23,550 - DEBUG - Verificando estado antes de detener lb
2025-05-19 10:49:25,175 - INFO - Contenedor parado: lb
2025-05-19 10:49:25,175 - INFO - Balanceador configurado correctamente
2025-05-19 10:49:25,175 - DEBUG - Creando cliente...
2025-05-19 10:49:25,175 - DEBUG - Intentando crear el contenedor cl
2025-05-19 10:49:35,927 - INFO - Contenedor cl creado con éxito.
2025-05-19 10:49:35,927 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 10:49:36,049 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 10:49:36,049 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 10:49:36,167 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 10:49:36,167 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:49:36,711 - INFO - Contenedor iniciado: cl
2025-05-19 10:49:36,711 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 10:49:36,711 - DEBUG - Desactivando cloud-init en cl
2025-05-19 10:49:36,760 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 10:49:36,816 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 10:49:36,816 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 10:49:36,940 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 10:49:39,376 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 10:49:39,376 - DEBUG - Verificando estado antes de detener cl
2025-05-19 10:49:40,840 - INFO - Contenedor parado: cl
2025-05-19 10:49:40,840 - INFO - Cliente configurado correctamente
2025-05-19 10:49:40,840 - DEBUG - Intentando crear el contenedor db
2025-05-19 10:49:50,774 - INFO - Contenedor db creado con éxito.
2025-05-19 10:49:50,774 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 10:49:50,947 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-19 10:49:50,947 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 10:49:51,336 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 10:49:51,337 - INFO - Infraestructura creada correctamente.
2025-05-19 10:50:20,372 - INFO - Orden recibida: configure
2025-05-19 10:50:20,372 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:50:20,374 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:50:20,374 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:50:20,375 - ERROR - No se pudo leer num_servers.txt: [Errno 2] No such file or directory: 'num_servers.txt'
2025-05-19 10:50:20,375 - ERROR - Primero debes hacer un create. La infraestructura no está creada correctamente.
2025-05-19 10:51:52,087 - INFO - Orden recibida: configure
2025-05-19 10:51:52,087 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:51:52,088 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:51:52,088 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:51:52,088 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:51:52,088 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:52:23,650 - INFO - Orden recibida: configure
2025-05-19 10:52:23,650 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:52:23,651 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:52:23,651 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:52:23,651 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:52:23,651 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:52:47,437 - INFO - Orden recibida: configure
2025-05-19 10:52:47,437 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:52:47,437 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:52:47,437 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:52:47,437 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:52:47,437 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:52:47,450 - INFO - Runneando todos los contenedores
2025-05-19 10:52:47,450 - INFO - Iniciando todos los contenedores
2025-05-19 10:52:47,451 - DEBUG - Arrancando servidor: s1
2025-05-19 10:52:47,451 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 10:52:47,759 - INFO - Contenedor iniciado: s1
2025-05-19 10:52:47,759 - DEBUG - Arrancando servidor: s2
2025-05-19 10:52:47,759 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-19 10:52:48,028 - INFO - Contenedor iniciado: s2
2025-05-19 10:52:48,029 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 10:52:48,422 - INFO - Contenedor iniciado: cl
2025-05-19 10:52:48,422 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 10:52:48,877 - INFO - Contenedor iniciado: lb
2025-05-19 10:52:48,877 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 10:52:49,336 - INFO - Contenedor iniciado: db
2025-05-19 10:52:49,336 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 10:52:49,336 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 10:52:49,336 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 10:52:49,336 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 10:52:50,380 - DEBUG - Instalando MongoDB
2025-05-19 10:52:50,740 - CRITICAL - Error instalando/configurando MongoDB en db: Command '['lxc', 'exec', 'db', '--', 'apt', 'install', '-y', 'mongodb']' returned non-zero exit status 100.
2025-05-19 10:52:50,740 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 10:52:50,740 - INFO - Configurando servidor web s1
2025-05-19 10:52:50,740 - INFO - Iniciando configuración del servidor web s1
2025-05-19 10:52:50,740 - DEBUG - Actualizando paquetes en s1
2025-05-19 10:53:16,251 - DEBUG - Instalando Apache en s1
2025-05-19 10:53:41,383 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 10:53:41,476 - DEBUG - Transfiriendo aplicación web
2025-05-19 10:53:41,493 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 10:53:41,750 - DEBUG - Ejecutando instalación Node.js
2025-05-19 10:56:07,058 - DEBUG - Reiniciando servidor
2025-05-19 10:56:09,907 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 10:56:10,660 - INFO - Servidor web s1 configurado con éxito.
2025-05-19 10:56:10,660 - INFO - Configurando servidor web s2
2025-05-19 10:56:10,660 - INFO - Iniciando configuración del servidor web s2
2025-05-19 10:56:10,661 - DEBUG - Actualizando paquetes en s2
2025-05-19 10:56:28,111 - DEBUG - Instalando Apache en s2
2025-05-19 10:57:04,222 - INFO - Orden recibida: delete
2025-05-19 10:57:04,222 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 10:57:04,223 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 10:57:04,223 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 10:57:04,223 - INFO - Eliminando toda la infraestructura
2025-05-19 10:57:04,223 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 10:57:04,292 - INFO - Imagen local eliminada con éxito.
2025-05-19 10:57:04,292 - DEBUG - Eliminando contenedor s1
2025-05-19 10:57:06,952 - INFO - Contenedor eliminado: s1
2025-05-19 10:57:06,952 - DEBUG - Eliminando contenedor s2
2025-05-19 10:57:08,915 - INFO - Contenedor eliminado: s2
2025-05-19 10:57:08,915 - DEBUG - Eliminando contenedor cl
2025-05-19 10:57:11,029 - INFO - Contenedor eliminado: cl
2025-05-19 10:57:11,029 - DEBUG - Eliminando contenedor lb
2025-05-19 10:57:12,978 - INFO - Contenedor eliminado: lb
2025-05-19 10:57:12,978 - DEBUG - Eliminando contenedor db
2025-05-19 10:57:14,773 - INFO - Contenedor eliminado: db
2025-05-19 10:57:14,773 - DEBUG - Contenedores eliminados correctamente
2025-05-19 10:57:14,774 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 10:57:15,145 - INFO - Bridge eliminado: lxdbr1
2025-05-19 10:57:15,146 - INFO - Eliminación completada.
2025-05-19 11:00:27,203 - INFO - Orden recibida: config
2025-05-19 11:00:27,203 - ERROR - Orden no válida: config
2025-05-19 11:00:29,550 - INFO - Orden recibida: configure
2025-05-19 11:00:29,550 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:00:29,551 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:00:29,551 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:00:29,551 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:00:29,551 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:00:29,564 - WARNING - Contenedor faltante: cl
2025-05-19 11:00:29,564 - ERROR - Primero debes hacer un create. La infraestructura no está creada correctamente.
2025-05-19 11:00:34,684 - INFO - Orden recibida: create
2025-05-19 11:00:34,684 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-19 11:00:34,684 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-19 11:00:34,685 - DEBUG - Parámetro recibido n_servers=2
2025-05-19 11:00:34,685 - DEBUG - Creando imagen base...
2025-05-19 11:00:34,685 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 11:00:34,698 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 11:00:36,353 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 11:00:36,353 - DEBUG - Configurando y creando bridges...
2025-05-19 11:00:36,382 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 11:00:36,433 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 11:00:36,433 - DEBUG - Creando bridge lxdbr1
2025-05-19 11:00:38,058 - INFO - Bridge creado: lxdbr1
2025-05-19 11:00:38,965 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 11:00:42,490 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 11:00:42,490 - DEBUG - Creando contenedores de servidores...
2025-05-19 11:00:42,490 - DEBUG - Intentando crear el contenedor s1
2025-05-19 11:00:52,137 - INFO - Contenedor s1 creado con éxito.
2025-05-19 11:00:52,138 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 11:00:52,196 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 11:00:52,196 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 11:00:52,235 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 11:00:52,235 - DEBUG - Intentando crear el contenedor s2
2025-05-19 11:01:02,044 - INFO - Contenedor s2 creado con éxito.
2025-05-19 11:01:02,044 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 11:01:02,110 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 11:01:02,110 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 11:01:02,142 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 11:01:02,142 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 11:01:02,143 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:01:02,144 - INFO - Número de servidores guardados correctamente
2025-05-19 11:01:02,144 - DEBUG - Creando balanceador...
2025-05-19 11:01:02,144 - DEBUG - Intentando crear el contenedor lb
2025-05-19 11:01:12,084 - INFO - Contenedor lb creado con éxito.
2025-05-19 11:01:12,084 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 11:01:12,141 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 11:01:12,141 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 11:01:12,180 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 11:01:12,180 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 11:01:12,239 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 11:01:12,239 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 11:01:12,273 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 11:01:12,273 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 11:01:12,730 - INFO - Contenedor iniciado: lb
2025-05-19 11:01:12,730 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 11:01:12,730 - DEBUG - Desactivando cloud-init en lb
2025-05-19 11:01:12,786 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 11:01:12,852 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 11:01:12,852 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 11:01:13,257 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 11:01:17,487 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 11:01:17,487 - DEBUG - Verificando estado antes de detener lb
2025-05-19 11:01:18,933 - INFO - Contenedor parado: lb
2025-05-19 11:01:18,933 - INFO - Balanceador configurado correctamente
2025-05-19 11:01:18,934 - DEBUG - Creando cliente...
2025-05-19 11:01:18,934 - DEBUG - Intentando crear el contenedor cl
2025-05-19 11:01:28,817 - INFO - Contenedor cl creado con éxito.
2025-05-19 11:01:28,817 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 11:01:28,913 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 11:01:28,914 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 11:01:28,972 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 11:01:28,972 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 11:01:29,430 - INFO - Contenedor iniciado: cl
2025-05-19 11:01:29,430 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 11:01:29,430 - DEBUG - Desactivando cloud-init en cl
2025-05-19 11:01:29,482 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 11:01:29,548 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 11:01:29,548 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 11:01:29,655 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 11:01:33,211 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 11:01:33,212 - DEBUG - Verificando estado antes de detener cl
2025-05-19 11:01:34,762 - INFO - Contenedor parado: cl
2025-05-19 11:01:34,762 - INFO - Cliente configurado correctamente
2025-05-19 11:01:34,762 - DEBUG - Intentando crear el contenedor db
2025-05-19 11:01:44,898 - INFO - Contenedor db creado con éxito.
2025-05-19 11:01:44,898 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 11:01:45,246 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-19 11:01:45,246 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 11:01:45,326 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 11:01:45,326 - INFO - Infraestructura creada correctamente.
2025-05-19 11:02:01,541 - INFO - Orden recibida: configure
2025-05-19 11:02:01,541 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:02:01,541 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:02:01,541 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:02:01,542 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:02:01,542 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:12:52,276 - INFO - Orden recibida: create
2025-05-19 11:12:52,276 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-19 11:12:52,276 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-19 11:12:52,276 - DEBUG - Parámetro recibido n_servers=2
2025-05-19 11:12:52,277 - DEBUG - Creando imagen base...
2025-05-19 11:12:52,277 - DEBUG - Verificando si la imagen ya está importada...
2025-05-19 11:12:52,324 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-19 11:12:58,120 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-19 11:12:58,120 - DEBUG - Configurando y creando bridges...
2025-05-19 11:12:59,014 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-19 11:13:02,572 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-19 11:13:02,572 - DEBUG - Creando bridge lxdbr1
2025-05-19 11:13:04,204 - INFO - Bridge creado: lxdbr1
2025-05-19 11:13:05,064 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-19 11:13:08,496 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-19 11:13:08,496 - DEBUG - Creando contenedores de servidores...
2025-05-19 11:13:08,496 - DEBUG - Intentando crear el contenedor s1
2025-05-19 11:13:18,085 - INFO - Contenedor s1 creado con éxito.
2025-05-19 11:13:18,085 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-19 11:13:18,133 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-19 11:13:18,133 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-19 11:13:18,165 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-19 11:13:18,165 - DEBUG - Intentando crear el contenedor s2
2025-05-19 11:13:28,036 - INFO - Contenedor s2 creado con éxito.
2025-05-19 11:13:28,037 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 11:13:28,097 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 11:13:28,097 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 11:13:28,156 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 11:13:28,156 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 11:13:28,157 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:13:28,157 - INFO - Número de servidores guardados correctamente
2025-05-19 11:13:28,157 - DEBUG - Creando balanceador...
2025-05-19 11:13:28,157 - DEBUG - Intentando crear el contenedor lb
2025-05-19 11:13:38,322 - INFO - Contenedor lb creado con éxito.
2025-05-19 11:13:38,323 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-19 11:13:38,377 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-19 11:13:38,377 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-19 11:13:38,407 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-19 11:13:38,407 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-19 11:13:38,454 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-19 11:13:38,454 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-19 11:13:38,487 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-19 11:13:38,487 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 11:13:39,064 - INFO - Contenedor iniciado: lb
2025-05-19 11:13:39,064 - DEBUG - Iniciando cambio de netplan en lb
2025-05-19 11:13:39,064 - DEBUG - Desactivando cloud-init en lb
2025-05-19 11:13:39,111 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-19 11:13:39,178 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-19 11:13:39,179 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-19 11:13:39,234 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-19 11:13:41,761 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-19 11:13:41,761 - DEBUG - Verificando estado antes de detener lb
2025-05-19 11:13:44,669 - INFO - Contenedor parado: lb
2025-05-19 11:13:44,669 - INFO - Balanceador configurado correctamente
2025-05-19 11:13:44,669 - DEBUG - Creando cliente...
2025-05-19 11:13:44,669 - DEBUG - Intentando crear el contenedor cl
2025-05-19 11:13:54,598 - INFO - Contenedor cl creado con éxito.
2025-05-19 11:13:54,598 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-19 11:13:54,644 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-19 11:13:54,644 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-19 11:13:54,675 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-19 11:13:54,675 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 11:13:55,110 - INFO - Contenedor iniciado: cl
2025-05-19 11:13:55,111 - DEBUG - Iniciando cambio de netplan en cl
2025-05-19 11:13:55,111 - DEBUG - Desactivando cloud-init en cl
2025-05-19 11:13:55,178 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-19 11:13:55,246 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-19 11:13:55,246 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-19 11:13:55,300 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-19 11:13:57,225 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-19 11:13:57,225 - DEBUG - Verificando estado antes de detener cl
2025-05-19 11:13:58,644 - INFO - Contenedor parado: cl
2025-05-19 11:13:58,644 - INFO - Cliente configurado correctamente
2025-05-19 11:13:58,644 - DEBUG - Intentando crear el contenedor db
2025-05-19 11:14:08,913 - INFO - Contenedor db creado con éxito.
2025-05-19 11:14:08,913 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-19 11:14:08,961 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-19 11:14:08,961 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-19 11:14:09,001 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-19 11:14:09,002 - INFO - Infraestructura creada correctamente.
2025-05-19 11:14:21,642 - INFO - Orden recibida: delete_last_server
2025-05-19 11:14:21,642 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:21,643 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:14:21,643 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:14:21,643 - INFO - Buscando último servidor para eliminar...
2025-05-19 11:14:21,690 - INFO - Eliminando servidor: s2
2025-05-19 11:14:21,690 - DEBUG - Eliminando contenedor s2
2025-05-19 11:14:22,474 - INFO - Contenedor eliminado: s2
2025-05-19 11:14:22,474 - INFO - Servidor s2 eliminado correctamente.
2025-05-19 11:14:22,474 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 11:14:22,476 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:14:22,476 - INFO - Nuevo número de servidores: 1
2025-05-19 11:14:30,937 - INFO - Orden recibida: configure
2025-05-19 11:14:30,937 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:30,937 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:30,938 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:14:30,938 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:30,938 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:30,952 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:30,952 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:30,965 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-19 11:14:30,965 - WARNING - El contenedor db no está en estado RUNNING
2025-05-19 11:14:30,965 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-19 11:14:30,965 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-19 11:14:30,965 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-19 11:14:41,501 - INFO - Orden recibida: start
2025-05-19 11:14:41,501 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:41,501 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:41,502 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:14:41,502 - INFO - Iniciando todos los contenedores
2025-05-19 11:14:41,502 - DEBUG - Arrancando servidor: s1
2025-05-19 11:14:41,502 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-19 11:14:41,936 - INFO - Contenedor iniciado: s1
2025-05-19 11:14:41,936 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-19 11:14:42,312 - INFO - Contenedor iniciado: cl
2025-05-19 11:14:42,314 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-19 11:14:42,731 - INFO - Contenedor iniciado: lb
2025-05-19 11:14:42,731 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-19 11:14:43,081 - INFO - Contenedor iniciado: db
2025-05-19 11:14:43,081 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-19 11:14:43,087 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-19 11:14:43,093 - INFO - Consola del contenedor cl abierta correctamente
2025-05-19 11:14:43,100 - INFO - Consola del contenedor lb abierta correctamente
2025-05-19 11:14:43,107 - INFO - Consola del contenedor db abierta correctamente
2025-05-19 11:14:48,426 - INFO - Orden recibida: configure
2025-05-19 11:14:48,426 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:48,426 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:48,426 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:14:48,426 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:48,426 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:48,441 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:14:48,441 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:14:48,454 - INFO - Iniciando configuración de la infraestructura...
2025-05-19 11:14:48,454 - INFO - Configurando base de datos MongoDB en: db
2025-05-19 11:14:48,454 - INFO - Iniciando instalación de MongoDB en db
2025-05-19 11:15:04,895 - DEBUG - Instalando MongoDB
2025-05-19 11:15:47,689 - DEBUG - Modificando bind_ip de MongoDB
2025-05-19 11:15:47,734 - DEBUG - Reiniciando contenedor db
2025-05-19 11:15:52,269 - INFO - MongoDB configurado con éxito en db
2025-05-19 11:15:52,270 - INFO - Configuración de base de datos completada correctamente.
2025-05-19 11:15:52,270 - INFO - Configurando servidor web s1
2025-05-19 11:15:52,270 - INFO - Iniciando configuración del servidor web s1
2025-05-19 11:15:52,270 - DEBUG - Actualizando paquetes en s1
2025-05-19 11:16:05,381 - DEBUG - Instalando Apache en s1
2025-05-19 11:16:32,999 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 11:16:33,105 - DEBUG - Transfiriendo aplicación web
2025-05-19 11:16:33,132 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 11:16:33,186 - DEBUG - Ejecutando instalación Node.js
2025-05-19 11:19:05,007 - DEBUG - Reiniciando servidor
2025-05-19 11:19:09,668 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 11:19:10,512 - INFO - Servidor web s1 configurado con éxito.
2025-05-19 11:19:10,512 - INFO - Configurando balanceador lb
2025-05-19 11:19:10,512 - INFO - Instalando haproxy en el balanceador
2025-05-19 11:19:41,709 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-19 11:19:41,709 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-19 11:19:41,778 - DEBUG - Validando archivo haproxy.cfg
2025-05-19 11:19:41,818 - DEBUG - Iniciando servicio de haproxy
2025-05-19 11:19:42,852 - INFO - Haproxy instalado y configurado correctamente.
2025-05-19 11:19:42,852 - INFO - Balanceador configurado correctamente.
2025-05-19 11:20:03,674 - INFO - Orden recibida: list
2025-05-19 11:20:03,674 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:20:03,674 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:20:03,675 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:20:03,675 - INFO - Listando contenedores
2025-05-19 11:20:03,706 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 11:34:43,674 - INFO - Orden recibida: enlarge
2025-05-19 11:34:43,677 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:34:43,678 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:34:43,678 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:34:43,678 - INFO - Buscando servidor libre para añadir...
2025-05-19 11:34:43,678 - DEBUG - Verificando si existe el contenedor s1
2025-05-19 11:34:43,724 - DEBUG - Verificando si existe el contenedor s2
2025-05-19 11:34:43,747 - INFO - Creando nuevo servidor disponible: s2
2025-05-19 11:34:43,747 - DEBUG - Intentando crear el contenedor s2
2025-05-19 11:34:53,349 - INFO - Contenedor s2 creado con éxito.
2025-05-19 11:34:53,349 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 11:34:53,417 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 11:34:53,418 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 11:34:53,482 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 11:34:53,482 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-19 11:34:53,483 - DEBUG - Configurando el servidor s2
2025-05-19 11:34:53,832 - INFO - Iniciando configuración del servidor web s2
2025-05-19 11:34:53,832 - DEBUG - Actualizando paquetes en s2
2025-05-19 11:34:54,460 - DEBUG - Instalando Apache en s2
2025-05-19 11:34:54,736 - CRITICAL - Error al configurar el servidor s2: Command '['lxc', 'exec', 's2', '--', 'apt', 'install', '-y', 'apache2']' returned non-zero exit status 100.
2025-05-19 11:34:54,736 - INFO - Servidor s2 añadido a la red correctamente
2025-05-19 11:34:54,736 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 11:34:54,737 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:34:54,737 - INFO - Nuevo número de servidores: 2
2025-05-19 11:43:31,752 - INFO - Orden recibida: delete_last_server
2025-05-19 11:43:31,753 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:43:31,753 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:43:31,753 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:43:31,753 - INFO - Buscando último servidor para eliminar...
2025-05-19 11:43:31,849 - INFO - Eliminando servidor: s2
2025-05-19 11:43:31,849 - DEBUG - Eliminando contenedor s2
2025-05-19 11:43:33,804 - INFO - Contenedor eliminado: s2
2025-05-19 11:43:33,805 - INFO - Servidor s2 eliminado correctamente.
2025-05-19 11:43:33,805 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 11:43:33,806 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:43:33,807 - INFO - Nuevo número de servidores: 1
2025-05-19 11:43:36,437 - INFO - Orden recibida: enlarge
2025-05-19 11:43:36,437 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:43:36,437 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:43:36,437 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:43:36,437 - INFO - Buscando servidor libre para añadir...
2025-05-19 11:43:36,437 - INFO - Buscando servidor libre para crear...
2025-05-19 11:43:36,437 - DEBUG - Verificando si existe el contenedor s1
2025-05-19 11:43:36,455 - DEBUG - Verificando si existe el contenedor s2
2025-05-19 11:43:36,465 - INFO - Creando nuevo servidor disponible: s2
2025-05-19 11:43:36,465 - DEBUG - Intentando crear el contenedor s2
2025-05-19 11:43:48,585 - INFO - Contenedor s2 creado con éxito.
2025-05-19 11:43:48,585 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 11:43:48,738 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 11:43:48,738 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 11:43:48,770 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 11:43:48,770 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-19 11:43:48,770 - CRITICAL - Error crítico al añadir el servidor: name 'load_num_servers' is not defined
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 178, in enlarge
    name = VM_NAMES["servidores"][load_num_servers()]
                                  ^^^^^^^^^^^^^^^^
NameError: name 'load_num_servers' is not defined
2025-05-19 11:43:48,774 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 11:43:48,777 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:43:48,777 - INFO - Nuevo número de servidores: 2
2025-05-19 11:44:12,455 - INFO - Orden recibida: delete_last_server
2025-05-19 11:44:12,456 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:44:12,456 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:44:12,456 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:44:12,456 - INFO - Buscando último servidor para eliminar...
2025-05-19 11:44:12,504 - INFO - Eliminando servidor: s2
2025-05-19 11:44:12,504 - DEBUG - Eliminando contenedor s2
2025-05-19 11:44:13,862 - INFO - Contenedor eliminado: s2
2025-05-19 11:44:13,862 - INFO - Servidor s2 eliminado correctamente.
2025-05-19 11:44:13,862 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 11:44:13,864 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:44:13,864 - INFO - Nuevo número de servidores: 1
2025-05-19 11:44:16,186 - INFO - Orden recibida: enlarge
2025-05-19 11:44:16,186 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:44:16,186 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:44:16,187 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 11:44:16,187 - INFO - Buscando servidor libre para añadir...
2025-05-19 11:44:16,187 - INFO - Buscando servidor libre para crear...
2025-05-19 11:44:16,187 - DEBUG - Verificando si existe el contenedor s1
2025-05-19 11:44:16,207 - DEBUG - Verificando si existe el contenedor s2
2025-05-19 11:44:16,228 - INFO - Creando nuevo servidor disponible: s2
2025-05-19 11:44:16,228 - DEBUG - Intentando crear el contenedor s2
2025-05-19 11:44:28,242 - INFO - Contenedor s2 creado con éxito.
2025-05-19 11:44:28,242 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 11:44:28,332 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-19 11:44:28,332 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 11:44:28,390 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-19 11:44:28,390 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-19 11:44:28,391 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:44:28,391 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 11:44:28,391 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-19 11:44:28,763 - INFO - Contenedor iniciado: s2
2025-05-19 11:44:33,763 - INFO - Iniciando configuración del servidor web s2
2025-05-19 11:44:33,764 - DEBUG - Actualizando paquetes en s2
2025-05-19 11:44:57,222 - DEBUG - Instalando Apache en s2
2025-05-19 11:45:48,122 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-19 11:45:48,250 - DEBUG - Transfiriendo aplicación web
2025-05-19 11:45:48,270 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-19 11:45:48,344 - DEBUG - Ejecutando instalación Node.js
2025-05-19 11:48:47,200 - DEBUG - Reiniciando servidor
2025-05-19 11:48:51,626 - DEBUG - Iniciando servidor Node.js con forever
2025-05-19 11:48:52,420 - INFO - Servidor web s2 configurado con éxito.
2025-05-19 11:48:52,420 - WARNING - Ya existen 5  servidores. No se puede añadir más.
2025-05-19 11:48:52,420 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 11:48:52,422 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:48:52,422 - INFO - Nuevo número de servidores: 2
2025-05-19 11:53:32,230 - INFO - Orden recibida: delete_last_server
2025-05-19 11:53:32,230 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 11:53:32,231 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 11:53:32,231 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 11:53:32,231 - INFO - Buscando último servidor para eliminar...
2025-05-19 11:53:32,322 - INFO - Eliminando servidor: s2
2025-05-19 11:53:32,322 - DEBUG - Eliminando contenedor s2
2025-05-19 11:53:35,683 - INFO - Contenedor eliminado: s2
2025-05-19 11:53:35,683 - INFO - Servidor s2 eliminado correctamente.
2025-05-19 11:53:35,683 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-19 11:53:35,684 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-19 11:53:35,684 - INFO - Nuevo número de servidores: 1
2025-05-19 12:06:21,378 - INFO - Orden recibida: enlarge
2025-05-19 12:06:21,378 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:06:21,379 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 12:06:21,379 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-19 12:06:21,379 - INFO - Buscando servidor libre para añadir...
2025-05-19 12:06:21,388 - INFO - Buscando servidor libre para crear...
2025-05-19 12:06:21,389 - DEBUG - Verificando si existe el contenedor s1
2025-05-19 12:06:21,407 - DEBUG - Verificando si existe el contenedor s2
2025-05-19 12:06:21,420 - INFO - Creando nuevo servidor disponible: s2
2025-05-19 12:06:21,420 - DEBUG - Intentando crear el contenedor s2
2025-05-19 12:06:21,449 - ERROR - Error al crear el contenedor s2: Command '['lxc', 'init', 'servidor', 's2']' returned non-zero exit status 1.
2025-05-19 12:06:21,449 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-19 12:06:21,476 - ERROR - Error al conectar s2 a lxdbr0: Command '['lxc', 'network', 'attach', 'lxdbr0', 's2', 'eth0']' returned non-zero exit status 1.
2025-05-19 12:06:21,477 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-19 12:06:21,488 - ERROR - No se pudo configurar la red del contenedor s2: Command '['lxc', 'config', 'device', 'set', 's2', 'eth0', 'ipv4.address', '134.3.0.12']' returned non-zero exit status 1.
2025-05-19 12:06:21,488 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-19 12:06:21,488 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:06:21,488 - INFO - Número de servidores 1 cargados correctamente.
2025-05-19 12:06:21,488 - INFO - Solicitado arrancar servidor: s2
2025-05-19 12:06:21,499 - WARNING - El contenedor s2 no existe.
2025-05-19 12:06:21,499 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-19 12:06:21,500 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-19 12:06:21,500 - INFO - Nuevo número de servidores: 2
2025-05-19 12:07:25,044 - INFO - Orden recibida: list
2025-05-19 12:07:25,044 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:07:25,044 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 12:07:25,044 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 12:07:25,044 - INFO - Listando contenedores
2025-05-19 12:07:25,069 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 12:07:28,717 - INFO - Orden recibida: enlarge
2025-05-19 12:07:28,717 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:07:28,717 - INFO - Número de servidores 2 cargados correctamente.
2025-05-19 12:07:28,717 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-19 12:07:28,717 - INFO - Buscando servidor libre para añadir...
2025-05-19 12:07:28,726 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 188, in enlarge
    subprocess.run(["lxc", "publish", "s1", "--", "alias", "servidor"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
2025-05-19 12:07:28,732 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-19 12:07:28,734 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-19 12:07:28,734 - INFO - Nuevo número de servidores: 3
2025-05-19 12:19:01,962 - INFO - Orden recibida: list
2025-05-19 12:19:01,962 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:19:01,963 - INFO - Número de servidores 3 cargados correctamente.
2025-05-19 12:19:01,963 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-19 12:19:01,963 - INFO - Listando contenedores
2025-05-19 12:19:02,006 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-19 12:23:34,279 - INFO - Orden recibida: delete
2025-05-19 12:23:34,279 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-19 12:23:34,280 - INFO - Número de servidores 3 cargados correctamente.
2025-05-19 12:23:34,280 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-19 12:23:34,280 - INFO - Eliminando toda la infraestructura
2025-05-19 12:23:34,280 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-19 12:23:34,405 - INFO - Imagen local eliminada con éxito.
2025-05-19 12:23:34,405 - DEBUG - Eliminando contenedor s1
2025-05-19 12:23:37,082 - INFO - Contenedor eliminado: s1
2025-05-19 12:23:37,083 - DEBUG - Eliminando contenedor s2
2025-05-19 12:23:37,094 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-19 12:23:37,094 - DEBUG - Eliminando contenedor s3
2025-05-19 12:23:37,105 - ERROR - Error al eliminar el contenedor s3: Command '['lxc', 'delete', 's3', '--force']' returned non-zero exit status 1.
2025-05-19 12:23:37,105 - DEBUG - Eliminando contenedor cl
2025-05-19 12:23:38,892 - INFO - Contenedor eliminado: cl
2025-05-19 12:23:38,892 - DEBUG - Eliminando contenedor lb
2025-05-19 12:23:40,998 - INFO - Contenedor eliminado: lb
2025-05-19 12:23:40,998 - DEBUG - Eliminando contenedor db
2025-05-19 12:23:42,930 - INFO - Contenedor eliminado: db
2025-05-19 12:23:42,930 - DEBUG - Contenedores eliminados correctamente
2025-05-19 12:23:42,930 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-19 12:23:43,322 - INFO - Bridge eliminado: lxdbr1
2025-05-19 12:23:43,322 - INFO - Eliminación completada.
2025-05-20 08:42:00,673 - INFO - Orden recibida: create
2025-05-20 08:42:00,674 - INFO - Número de servidores especificado: 1
2025-05-20 08:42:00,674 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-20 08:42:00,674 - DEBUG - Parámetro recibido n_servers=1
2025-05-20 08:42:00,674 - DEBUG - Creando imagen base...
2025-05-20 08:42:00,674 - DEBUG - Verificando si la imagen ya está importada...
2025-05-20 08:42:00,699 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-20 08:42:06,928 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-20 08:42:06,929 - DEBUG - Configurando y creando bridges...
2025-05-20 08:42:07,761 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-20 08:42:11,304 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-20 08:42:11,304 - DEBUG - Creando bridge lxdbr1
2025-05-20 08:42:12,964 - INFO - Bridge creado: lxdbr1
2025-05-20 08:42:13,872 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-20 08:42:17,469 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-20 08:42:17,469 - DEBUG - Creando contenedores de servidores...
2025-05-20 08:42:17,469 - DEBUG - Intentando crear el contenedor s1
2025-05-20 08:42:27,197 - INFO - Contenedor s1 creado con éxito.
2025-05-20 08:42:27,197 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-20 08:42:27,261 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-20 08:42:27,261 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-20 08:42:27,293 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-20 08:42:27,293 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-20 08:42:27,294 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-20 08:42:27,294 - INFO - Número de servidores guardados correctamente
2025-05-20 08:42:27,295 - DEBUG - Creando balanceador...
2025-05-20 08:42:27,295 - DEBUG - Intentando crear el contenedor lb
2025-05-20 08:42:37,263 - INFO - Contenedor lb creado con éxito.
2025-05-20 08:42:37,263 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-20 08:42:37,310 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-20 08:42:37,310 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-20 08:42:37,341 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-20 08:42:37,341 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-20 08:42:37,393 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-20 08:42:37,393 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-20 08:42:37,426 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-20 08:42:37,426 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-20 08:42:37,995 - INFO - Contenedor iniciado: lb
2025-05-20 08:42:37,995 - DEBUG - Iniciando cambio de netplan en lb
2025-05-20 08:42:37,995 - DEBUG - Desactivando cloud-init en lb
2025-05-20 08:42:38,046 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-20 08:42:38,107 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-20 08:42:38,107 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-20 08:42:38,176 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-20 08:42:40,254 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-20 08:42:40,254 - DEBUG - Verificando estado antes de detener lb
2025-05-20 08:42:41,741 - INFO - Contenedor parado: lb
2025-05-20 08:42:41,741 - INFO - Balanceador configurado correctamente
2025-05-20 08:42:41,741 - DEBUG - Creando cliente...
2025-05-20 08:42:41,741 - DEBUG - Intentando crear el contenedor cl
2025-05-20 08:42:51,680 - INFO - Contenedor cl creado con éxito.
2025-05-20 08:42:51,680 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-20 08:42:51,735 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-20 08:42:51,735 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-20 08:42:51,766 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-20 08:42:51,766 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-20 08:42:52,311 - INFO - Contenedor iniciado: cl
2025-05-20 08:42:52,311 - DEBUG - Iniciando cambio de netplan en cl
2025-05-20 08:42:52,311 - DEBUG - Desactivando cloud-init en cl
2025-05-20 08:42:52,363 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-20 08:42:52,421 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-20 08:42:52,421 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-20 08:42:52,481 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-20 08:42:54,435 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-20 08:42:54,435 - DEBUG - Verificando estado antes de detener cl
2025-05-20 08:42:55,856 - INFO - Contenedor parado: cl
2025-05-20 08:42:55,856 - INFO - Cliente configurado correctamente
2025-05-20 08:42:55,856 - DEBUG - Intentando crear el contenedor db
2025-05-20 08:43:05,844 - INFO - Contenedor db creado con éxito.
2025-05-20 08:43:05,844 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-20 08:43:06,013 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-20 08:43:06,013 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-20 08:43:06,079 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-20 08:43:06,079 - INFO - Infraestructura creada correctamente.
2025-05-20 08:43:46,363 - INFO - Orden recibida: configure
2025-05-20 08:43:46,363 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:43:46,364 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:43:46,364 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:43:46,364 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:43:46,364 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:43:46,376 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:43:46,377 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:43:46,389 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-20 08:43:46,389 - WARNING - El contenedor db no está en estado RUNNING
2025-05-20 08:43:46,389 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-20 08:43:46,389 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-20 08:43:46,389 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-20 08:43:51,645 - INFO - Orden recibida: start
2025-05-20 08:43:51,645 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:43:51,645 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:43:51,646 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:43:51,646 - INFO - Iniciando todos los contenedores
2025-05-20 08:43:51,646 - DEBUG - Arrancando servidor: s1
2025-05-20 08:43:51,646 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 08:43:51,980 - INFO - Contenedor iniciado: s1
2025-05-20 08:43:51,980 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-20 08:43:52,433 - INFO - Contenedor iniciado: cl
2025-05-20 08:43:52,433 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-20 08:43:52,888 - INFO - Contenedor iniciado: lb
2025-05-20 08:43:52,888 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-20 08:43:53,194 - INFO - Contenedor iniciado: db
2025-05-20 08:43:53,194 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-20 08:43:53,200 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 08:43:53,208 - INFO - Consola del contenedor cl abierta correctamente
2025-05-20 08:43:53,217 - INFO - Consola del contenedor lb abierta correctamente
2025-05-20 08:43:53,223 - INFO - Consola del contenedor db abierta correctamente
2025-05-20 08:43:57,451 - INFO - Orden recibida: list
2025-05-20 08:43:57,451 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:43:57,451 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:43:57,451 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:43:57,451 - INFO - Listando contenedores
2025-05-20 08:43:57,474 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-20 08:44:02,682 - INFO - Orden recibida: configure
2025-05-20 08:44:02,682 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:44:02,682 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:44:02,682 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:44:02,682 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:44:02,682 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:44:02,721 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:44:02,722 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:44:02,738 - INFO - Iniciando configuración de la infraestructura...
2025-05-20 08:44:02,738 - INFO - Configurando base de datos MongoDB en: db
2025-05-20 08:44:02,738 - INFO - Iniciando instalación de MongoDB en db
2025-05-20 08:44:20,773 - DEBUG - Instalando MongoDB
2025-05-20 08:45:03,575 - DEBUG - Modificando bind_ip de MongoDB
2025-05-20 08:45:03,632 - DEBUG - Reiniciando contenedor db
2025-05-20 08:45:08,219 - INFO - MongoDB configurado con éxito en db
2025-05-20 08:45:08,220 - INFO - Configuración de base de datos completada correctamente.
2025-05-20 08:45:08,220 - INFO - Configurando servidor web s1
2025-05-20 08:45:08,220 - INFO - Iniciando configuración del servidor web s1
2025-05-20 08:45:08,220 - DEBUG - Actualizando paquetes en s1
2025-05-20 08:45:23,117 - DEBUG - Instalando Apache en s1
2025-05-20 08:45:48,493 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 08:45:48,576 - DEBUG - Transfiriendo aplicación web
2025-05-20 08:45:48,599 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 08:45:48,677 - DEBUG - Ejecutando instalación Node.js
2025-05-20 08:48:11,461 - DEBUG - Reiniciando servidor
2025-05-20 08:48:15,945 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 08:48:16,579 - INFO - Servidor web s1 configurado con éxito.
2025-05-20 08:48:16,579 - INFO - Configurando balanceador lb
2025-05-20 08:48:16,579 - INFO - Instalando haproxy en el balanceador
2025-05-20 08:51:15,169 - INFO - Orden recibida: configure
2025-05-20 08:51:15,169 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:51:15,170 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:51:15,170 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:51:15,170 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:51:15,170 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:51:15,183 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:51:15,183 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:51:15,196 - INFO - Iniciando configuración de la infraestructura...
2025-05-20 08:51:15,196 - INFO - Configurando base de datos MongoDB en: db
2025-05-20 08:51:15,196 - INFO - Iniciando instalación de MongoDB en db
2025-05-20 08:51:20,265 - DEBUG - Instalando MongoDB
2025-05-20 08:51:21,087 - DEBUG - Modificando bind_ip de MongoDB
2025-05-20 08:51:21,121 - DEBUG - Reiniciando contenedor db
2025-05-20 08:51:25,764 - INFO - MongoDB configurado con éxito en db
2025-05-20 08:51:25,764 - INFO - Configuración de base de datos completada correctamente.
2025-05-20 08:51:25,764 - INFO - Configurando servidor web s1
2025-05-20 08:51:25,764 - INFO - Iniciando configuración del servidor web s1
2025-05-20 08:51:25,764 - DEBUG - Actualizando paquetes en s1
2025-05-20 08:51:29,609 - DEBUG - Instalando Apache en s1
2025-05-20 08:51:30,343 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 08:51:30,427 - DEBUG - Transfiriendo aplicación web
2025-05-20 08:51:30,452 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 08:51:31,034 - DEBUG - Ejecutando instalación Node.js
2025-05-20 08:51:58,663 - DEBUG - Reiniciando servidor
2025-05-20 08:52:03,188 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 08:52:03,903 - INFO - Servidor web s1 configurado con éxito.
2025-05-20 08:52:03,904 - INFO - Configurando balanceador lb
2025-05-20 08:52:03,904 - INFO - Instalando haproxy en el balanceador
2025-05-20 08:52:19,717 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-20 08:52:19,717 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-20 08:52:19,756 - DEBUG - Validando archivo haproxy.cfg
2025-05-20 08:52:19,808 - DEBUG - Iniciando servicio de haproxy
2025-05-20 08:52:20,820 - INFO - Haproxy instalado y configurado correctamente.
2025-05-20 08:52:20,820 - INFO - Balanceador configurado correctamente.
2025-05-20 08:52:58,319 - INFO - Orden recibida: list
2025-05-20 08:52:58,319 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:52:58,319 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:52:58,319 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:52:58,319 - INFO - Listando contenedores
2025-05-20 08:52:58,349 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-20 08:53:16,181 - INFO - Orden recibida: enlarge
2025-05-20 08:53:16,181 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:53:16,181 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:53:16,181 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:53:16,181 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-20 08:53:16,188 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 188, in enlarge
    publish_image(contenedor=VM_NAMES["servidores"][0], alias="servidor")
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 57, in publish_image
    subprocess.run(["lxc", "publish", contenedor, "--", "alias", alias], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
2025-05-20 08:53:16,194 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 08:53:16,195 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 08:53:16,195 - INFO - Nuevo número de servidores: 2
2025-05-20 08:59:03,796 - INFO - Orden recibida: enlarge
2025-05-20 08:59:03,796 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:59:03,796 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:59:03,796 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:59:03,796 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-20 08:59:03,797 - INFO - Parando contenedor s1 antes de publicar
2025-05-20 08:59:08,199 - DEBUG - Eliminando imagen previa con alias 'servidor' si existe
2025-05-20 08:59:08,213 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-20 08:59:08,222 - CRITICAL - Error al publicar imagen del contenedor s1: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 64, in publish_image
    subprocess.run(["lxc", "publish", contenedor, "--", "alias", alias], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
2025-05-20 08:59:08,224 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 188, in enlarge
    publish_image(contenedor=VM_NAMES["servidores"][0], alias="servidor")
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 64, in publish_image
    subprocess.run(["lxc", "publish", contenedor, "--", "alias", alias], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'publish', 's1', '--', 'alias', 'servidor']' returned non-zero exit status 1.
2025-05-20 08:59:08,226 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 08:59:08,228 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 08:59:08,228 - INFO - Nuevo número de servidores: 2
2025-05-20 08:59:31,525 - INFO - Orden recibida: enlarge
2025-05-20 08:59:31,525 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:59:31,526 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 08:59:31,526 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 08:59:31,526 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-20 08:59:31,526 - INFO - Parando contenedor s1 antes de publicar
2025-05-20 08:59:31,544 - CRITICAL - Error al publicar imagen del contenedor s1: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 58, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-20 08:59:31,547 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 188, in enlarge
    publish_image(contenedor=VM_NAMES["servidores"][0], alias="servidor")
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 58, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-20 08:59:31,547 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-20 08:59:31,549 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-20 08:59:31,549 - INFO - Nuevo número de servidores: 3
2025-05-20 08:59:47,050 - INFO - Orden recibida: enlarge
2025-05-20 08:59:47,050 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 08:59:47,050 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 08:59:47,051 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 08:59:47,051 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-20 08:59:47,051 - INFO - Parando contenedor s1 antes de publicar
2025-05-20 08:59:47,066 - CRITICAL - Error al publicar imagen del contenedor s1: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 58, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-20 08:59:47,070 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 188, in enlarge
    publish_image(contenedor=VM_NAMES["servidores"][0], alias="servidor")
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 58, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-20 08:59:47,070 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 08:59:47,075 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 08:59:47,075 - INFO - Nuevo número de servidores: 2
2025-05-20 09:02:13,863 - INFO - Orden recibida: start_server
2025-05-20 09:02:13,864 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:02:13,864 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:02:13,864 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 09:02:13,864 - INFO - Iniciando servidor individual: s1
2025-05-20 09:02:13,864 - INFO - Solicitado arrancar servidor: s1
2025-05-20 09:02:13,896 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 09:02:14,226 - INFO - Contenedor iniciado: s1
2025-05-20 09:02:14,227 - INFO - Servidor s1 corriendo correctamente.
2025-05-20 09:02:14,228 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 09:02:20,651 - INFO - Orden recibida: list
2025-05-20 09:02:20,651 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:02:20,651 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:02:20,651 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 09:02:20,651 - INFO - Listando contenedores
2025-05-20 09:02:20,681 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-20 09:06:11,095 - INFO - Orden recibida: configure
2025-05-20 09:06:11,095 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:06:11,096 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:06:11,096 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 09:06:11,096 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:06:11,096 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:06:11,149 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:06:11,149 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:06:11,171 - INFO - Iniciando configuración de la infraestructura...
2025-05-20 09:06:11,172 - INFO - Configurando base de datos MongoDB en: db
2025-05-20 09:06:11,172 - INFO - Iniciando instalación de MongoDB en db
2025-05-20 09:06:15,475 - DEBUG - Instalando MongoDB
2025-05-20 09:06:16,312 - DEBUG - Modificando bind_ip de MongoDB
2025-05-20 09:06:16,405 - DEBUG - Reiniciando contenedor db
2025-05-20 09:06:21,063 - INFO - MongoDB configurado con éxito en db
2025-05-20 09:06:21,063 - INFO - Configuración de base de datos completada correctamente.
2025-05-20 09:06:21,063 - INFO - Configurando servidor web s1
2025-05-20 09:06:21,063 - INFO - Iniciando configuración del servidor web s1
2025-05-20 09:06:21,063 - DEBUG - Actualizando paquetes en s1
2025-05-20 09:06:25,215 - DEBUG - Instalando Apache en s1
2025-05-20 09:06:26,014 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 09:06:26,123 - DEBUG - Transfiriendo aplicación web
2025-05-20 09:06:26,168 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 09:06:26,347 - DEBUG - Ejecutando instalación Node.js
2025-05-20 09:07:04,789 - DEBUG - Reiniciando servidor
2025-05-20 09:07:09,269 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 09:07:10,041 - INFO - Servidor web s1 configurado con éxito.
2025-05-20 09:07:10,041 - INFO - Configurando balanceador lb
2025-05-20 09:07:10,041 - INFO - Instalando haproxy en el balanceador
2025-05-20 09:09:05,608 - INFO - Orden recibida: configure
2025-05-20 09:09:05,608 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:09:05,609 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:09:05,609 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 09:09:05,609 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:09:05,609 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:09:05,623 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:09:05,623 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:09:05,635 - INFO - Iniciando configuración de la infraestructura...
2025-05-20 09:09:05,635 - INFO - Configurando base de datos MongoDB en: db
2025-05-20 09:09:05,635 - INFO - Iniciando instalación de MongoDB en db
2025-05-20 09:09:09,093 - DEBUG - Instalando MongoDB
2025-05-20 09:09:09,932 - DEBUG - Modificando bind_ip de MongoDB
2025-05-20 09:09:09,985 - DEBUG - Reiniciando contenedor db
2025-05-20 09:09:14,669 - INFO - MongoDB configurado con éxito en db
2025-05-20 09:09:14,669 - INFO - Configuración de base de datos completada correctamente.
2025-05-20 09:09:14,669 - INFO - Configurando servidor web s1
2025-05-20 09:09:14,669 - INFO - Iniciando configuración del servidor web s1
2025-05-20 09:09:14,669 - DEBUG - Actualizando paquetes en s1
2025-05-20 09:09:18,482 - DEBUG - Instalando Apache en s1
2025-05-20 09:09:19,225 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 09:09:19,316 - DEBUG - Transfiriendo aplicación web
2025-05-20 09:09:19,367 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 09:09:19,428 - DEBUG - Ejecutando instalación Node.js
2025-05-20 09:09:48,417 - DEBUG - Reiniciando servidor
2025-05-20 09:09:52,920 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 09:09:53,537 - INFO - Servidor web s1 configurado con éxito.
2025-05-20 09:09:53,537 - INFO - Configurando balanceador lb
2025-05-20 09:09:53,537 - INFO - Instalando haproxy en el balanceador
2025-05-20 09:09:57,889 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-20 09:09:57,889 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-20 09:09:57,940 - DEBUG - Validando archivo haproxy.cfg
2025-05-20 09:09:58,000 - DEBUG - Iniciando servicio de haproxy
2025-05-20 09:09:59,119 - INFO - Haproxy instalado y configurado correctamente.
2025-05-20 09:09:59,119 - INFO - Balanceador configurado correctamente.
2025-05-20 09:12:07,781 - INFO - Orden recibida: create_server
2025-05-20 09:12:07,781 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:12:07,782 - INFO - Número de servidores 1 cargados correctamente.
2025-05-20 09:12:07,782 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-20 09:12:07,782 - INFO - Buscando servidor libre para crear...
2025-05-20 09:12:07,782 - DEBUG - Verificando si existe el contenedor s1
2025-05-20 09:12:07,800 - DEBUG - Verificando si existe el contenedor s2
2025-05-20 09:12:07,812 - INFO - Creando nuevo servidor disponible: s2
2025-05-20 09:12:07,812 - DEBUG - Intentando crear el contenedor s2
2025-05-20 09:12:18,163 - INFO - Contenedor s2 creado con éxito.
2025-05-20 09:12:18,163 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-20 09:12:18,290 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-20 09:12:18,290 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-20 09:12:18,344 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-20 09:12:18,344 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-20 09:12:18,345 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 09:12:18,347 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 09:12:18,348 - INFO - Nuevo número de servidores: 2
2025-05-20 09:12:44,171 - INFO - Orden recibida: start_server
2025-05-20 09:12:44,171 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:12:44,171 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:12:44,171 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:12:44,172 - INFO - Iniciando servidor individual: s2
2025-05-20 09:12:44,172 - INFO - Solicitado arrancar servidor: s2
2025-05-20 09:12:44,192 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-20 09:12:44,533 - INFO - Contenedor iniciado: s2
2025-05-20 09:12:44,635 - INFO - Servidor s2 corriendo correctamente.
2025-05-20 09:12:44,636 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 09:12:52,760 - INFO - Orden recibida: config_server
2025-05-20 09:12:52,760 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:12:52,760 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:12:52,760 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:12:52,760 - ERROR - Falta el nombre del servidor en config_server
2025-05-20 09:12:57,327 - INFO - Orden recibida: config_server
2025-05-20 09:12:57,327 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:12:57,328 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:12:57,328 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:12:57,328 - INFO - Configurando el servidor infividual s2
2025-05-20 09:12:57,328 - INFO - Iniciando configuración del servidor web s2
2025-05-20 09:12:57,328 - DEBUG - Actualizando paquetes en s2
2025-05-20 09:13:12,601 - DEBUG - Instalando Apache en s2
2025-05-20 09:13:41,256 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 09:13:41,436 - DEBUG - Transfiriendo aplicación web
2025-05-20 09:13:41,467 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 09:13:41,552 - DEBUG - Ejecutando instalación Node.js
2025-05-20 09:16:07,544 - DEBUG - Reiniciando servidor
2025-05-20 09:16:12,342 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 09:16:13,077 - INFO - Servidor web s2 configurado con éxito.
2025-05-20 09:26:00,539 - INFO - Orden recibida: stop_server
2025-05-20 09:26:00,540 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:26:00,541 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:26:00,541 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:26:00,542 - INFO - Deteniendo servidor individual: s2
2025-05-20 09:26:00,542 - INFO - Solicitado parar servidor: s2
2025-05-20 09:26:00,589 - DEBUG - Verificando estado antes de detener s2
2025-05-20 09:26:04,941 - INFO - Contenedor parado: s2
2025-05-20 09:26:04,941 - INFO - Servidor s2 detenido correctamente.
2025-05-20 09:26:09,669 - INFO - Orden recibida: start_server
2025-05-20 09:26:09,669 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:26:09,670 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:26:09,670 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:26:09,670 - INFO - Iniciando servidor individual: s2
2025-05-20 09:26:09,670 - INFO - Solicitado arrancar servidor: s2
2025-05-20 09:26:09,685 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-20 09:26:10,033 - INFO - Contenedor iniciado: s2
2025-05-20 09:26:11,236 - INFO - Servidor s2 corriendo correctamente.
2025-05-20 09:26:11,237 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 09:30:20,931 - INFO - Orden recibida: stop
2025-05-20 09:30:20,931 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:30:20,932 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:30:20,932 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:30:20,932 - INFO - Parando todos los contenedores
2025-05-20 09:30:20,932 - DEBUG - Verificando estado antes de detener s1
2025-05-20 09:30:25,108 - INFO - Contenedor parado: s1
2025-05-20 09:30:25,108 - DEBUG - Verificando estado antes de detener s2
2025-05-20 09:30:29,373 - INFO - Contenedor parado: s2
2025-05-20 09:30:29,373 - DEBUG - Verificando estado antes de detener cl
2025-05-20 09:30:33,928 - INFO - Contenedor parado: cl
2025-05-20 09:30:33,928 - DEBUG - Verificando estado antes de detener lb
2025-05-20 09:30:38,558 - INFO - Contenedor parado: lb
2025-05-20 09:30:38,559 - DEBUG - Verificando estado antes de detener db
2025-05-20 09:30:58,026 - INFO - Contenedor parado: db
2025-05-20 09:30:58,026 - INFO - Todos los contenedores han sido parados
2025-05-20 09:31:02,802 - INFO - Orden recibida: start
2025-05-20 09:31:02,803 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:31:02,803 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:31:02,803 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:31:02,803 - INFO - Iniciando todos los contenedores
2025-05-20 09:31:02,803 - DEBUG - Arrancando servidor: s1
2025-05-20 09:31:02,803 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 09:31:03,135 - INFO - Contenedor iniciado: s1
2025-05-20 09:31:03,136 - ERROR - Error al iniciar contenedores: name 'servidor' is not defined
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 117, in start_all
    result = subprocess.run(["lxc", "exec", servidor, "--", "test", "-f", "/root/app/rest_server.js"], stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)
                                            ^^^^^^^^
NameError: name 'servidor' is not defined
2025-05-20 09:31:03,156 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 09:31:03,158 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 09:31:03,160 - INFO - Consola del contenedor cl abierta correctamente
2025-05-20 09:31:03,169 - INFO - Consola del contenedor lb abierta correctamente
2025-05-20 09:31:03,178 - INFO - Consola del contenedor db abierta correctamente
2025-05-20 09:32:21,048 - INFO - Orden recibida: start
2025-05-20 09:32:21,048 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:32:21,049 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:32:21,049 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:32:21,049 - INFO - Iniciando todos los contenedores
2025-05-20 09:32:21,049 - DEBUG - Arrancando servidor: s1
2025-05-20 09:32:21,049 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 09:32:21,406 - INFO - Contenedor iniciado: s1
2025-05-20 09:32:21,468 - INFO - Reiniciando app en s1
2025-05-20 09:32:21,468 - ERROR - Error al iniciar contenedores: name 'start_app' is not defined
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes.py", line 120, in start_all
    start_app(name=VM_NAMES["servidores"][i])
    ^^^^^^^^^
NameError: name 'start_app' is not defined
2025-05-20 09:32:21,471 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 09:32:21,477 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 09:32:21,489 - INFO - Consola del contenedor cl abierta correctamente
2025-05-20 09:32:21,492 - INFO - Consola del contenedor lb abierta correctamente
2025-05-20 09:32:21,498 - INFO - Consola del contenedor db abierta correctamente
2025-05-20 09:32:55,763 - INFO - Orden recibida: start
2025-05-20 09:32:55,763 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 09:32:55,764 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 09:32:55,764 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 09:32:55,764 - INFO - Iniciando todos los contenedores
2025-05-20 09:32:55,764 - DEBUG - Arrancando servidor: s1
2025-05-20 09:32:55,764 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 09:32:56,068 - INFO - Contenedor iniciado: s1
2025-05-20 09:32:56,122 - INFO - Reiniciando app en s1
2025-05-20 09:32:57,341 - DEBUG - Arrancando servidor: s2
2025-05-20 09:32:57,342 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-20 09:32:57,620 - INFO - Contenedor iniciado: s2
2025-05-20 09:32:57,672 - INFO - Reiniciando app en s2
2025-05-20 09:32:59,036 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-20 09:32:59,441 - INFO - Contenedor iniciado: cl
2025-05-20 09:32:59,442 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-20 09:32:59,916 - INFO - Contenedor iniciado: lb
2025-05-20 09:32:59,916 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-20 09:33:00,525 - INFO - Contenedor iniciado: db
2025-05-20 09:33:00,525 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-20 09:33:00,529 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 09:33:00,535 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 09:33:00,537 - INFO - Consola del contenedor cl abierta correctamente
2025-05-20 09:33:00,544 - INFO - Consola del contenedor lb abierta correctamente
2025-05-20 09:33:00,552 - INFO - Consola del contenedor db abierta correctamente
2025-05-20 18:35:22,363 - INFO - Orden recibida: create
2025-05-20 18:35:22,364 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-20 18:35:22,364 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-20 18:35:22,364 - DEBUG - Parámetro recibido n_servers=2
2025-05-20 18:35:22,364 - DEBUG - Creando imagen base...
2025-05-20 18:35:22,364 - DEBUG - Verificando si la imagen ya está importada...
2025-05-20 18:35:22,408 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-20 18:35:28,165 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-20 18:35:28,166 - DEBUG - Configurando y creando bridges...
2025-05-20 18:35:29,063 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-20 18:35:32,601 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-20 18:35:32,601 - DEBUG - Creando bridge lxdbr1
2025-05-20 18:35:34,271 - INFO - Bridge creado: lxdbr1
2025-05-20 18:35:35,155 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-20 18:35:38,867 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-20 18:35:38,868 - DEBUG - Creando contenedores de servidores...
2025-05-20 18:35:38,868 - DEBUG - Intentando crear el contenedor s1
2025-05-20 18:35:48,247 - INFO - Contenedor s1 creado con éxito.
2025-05-20 18:35:48,247 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-20 18:35:48,296 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-20 18:35:48,297 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-20 18:35:48,323 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-20 18:35:48,323 - DEBUG - Intentando crear el contenedor s2
2025-05-20 18:35:58,665 - INFO - Contenedor s2 creado con éxito.
2025-05-20 18:35:58,665 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-20 18:35:58,722 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-20 18:35:58,722 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-20 18:35:58,779 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-20 18:35:58,779 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 18:35:58,781 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 18:35:58,781 - INFO - Número de servidores guardados correctamente
2025-05-20 18:35:58,781 - DEBUG - Creando balanceador...
2025-05-20 18:35:58,781 - DEBUG - Intentando crear el contenedor lb
2025-05-20 18:36:08,839 - INFO - Contenedor lb creado con éxito.
2025-05-20 18:36:08,839 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-20 18:36:09,191 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-20 18:36:09,191 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-20 18:36:09,278 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-20 18:36:09,278 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-20 18:36:09,332 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-20 18:36:09,333 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-20 18:36:09,366 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-20 18:36:09,366 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-20 18:36:09,844 - INFO - Contenedor iniciado: lb
2025-05-20 18:36:09,846 - DEBUG - Iniciando cambio de netplan en lb
2025-05-20 18:36:09,846 - DEBUG - Desactivando cloud-init en lb
2025-05-20 18:36:09,885 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-20 18:36:09,917 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-20 18:36:09,917 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-20 18:36:09,963 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-20 18:36:12,335 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-20 18:36:12,339 - DEBUG - Verificando estado antes de detener lb
2025-05-20 18:36:13,903 - INFO - Contenedor parado: lb
2025-05-20 18:36:13,903 - INFO - Balanceador configurado correctamente
2025-05-20 18:36:13,903 - DEBUG - Creando cliente...
2025-05-20 18:36:13,904 - DEBUG - Intentando crear el contenedor cl
2025-05-20 18:36:24,256 - INFO - Contenedor cl creado con éxito.
2025-05-20 18:36:24,256 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-20 18:36:24,613 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-20 18:36:24,613 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-20 18:36:24,756 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-20 18:36:24,756 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-20 18:36:25,255 - INFO - Contenedor iniciado: cl
2025-05-20 18:36:25,256 - DEBUG - Iniciando cambio de netplan en cl
2025-05-20 18:36:25,256 - DEBUG - Desactivando cloud-init en cl
2025-05-20 18:36:25,303 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-20 18:36:25,380 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-20 18:36:25,380 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-20 18:36:25,435 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-20 18:36:27,342 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-20 18:36:27,342 - DEBUG - Verificando estado antes de detener cl
2025-05-20 18:36:30,005 - INFO - Contenedor parado: cl
2025-05-20 18:36:30,005 - INFO - Cliente configurado correctamente
2025-05-20 18:36:30,005 - DEBUG - Intentando crear el contenedor db
2025-05-20 18:36:40,116 - INFO - Contenedor db creado con éxito.
2025-05-20 18:36:40,116 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-20 18:36:40,174 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-20 18:36:40,174 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-20 18:36:40,203 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-20 18:36:40,204 - INFO - Infraestructura creada correctamente.
2025-05-20 18:37:11,155 - INFO - Orden recibida: start
2025-05-20 18:37:11,155 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:37:11,156 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:37:11,157 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 18:37:11,157 - INFO - Iniciando todos los contenedores
2025-05-20 18:37:11,157 - DEBUG - Arrancando servidor: s1
2025-05-20 18:37:11,157 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-20 18:37:12,010 - INFO - Contenedor iniciado: s1
2025-05-20 18:37:14,368 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-20 18:37:14,368 - DEBUG - Arrancando servidor: s2
2025-05-20 18:37:14,368 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-20 18:37:14,865 - INFO - Contenedor iniciado: s2
2025-05-20 18:37:16,108 - DEBUG - No se encontró la app en s2, no se reinicia.
2025-05-20 18:37:16,108 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-20 18:37:16,560 - INFO - Contenedor iniciado: cl
2025-05-20 18:37:16,560 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-20 18:37:16,950 - INFO - Contenedor iniciado: lb
2025-05-20 18:37:16,950 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-20 18:37:17,300 - INFO - Contenedor iniciado: db
2025-05-20 18:37:17,300 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-20 18:37:17,306 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-20 18:37:17,307 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-20 18:37:17,308 - INFO - Consola del contenedor cl abierta correctamente
2025-05-20 18:37:17,309 - INFO - Consola del contenedor lb abierta correctamente
2025-05-20 18:37:17,312 - INFO - Consola del contenedor db abierta correctamente
2025-05-20 18:37:26,172 - INFO - Orden recibida: list
2025-05-20 18:37:26,172 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:37:26,172 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:37:26,172 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 18:37:26,172 - INFO - Listando contenedores
2025-05-20 18:37:26,228 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-20 18:38:02,780 - INFO - Orden recibida: list
2025-05-20 18:38:02,781 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:38:02,781 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:38:02,781 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 18:38:02,781 - INFO - Listando contenedores
2025-05-20 18:38:02,815 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-20 18:38:09,149 - INFO - Orden recibida: configure
2025-05-20 18:38:09,150 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:38:09,150 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:38:09,150 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 18:38:09,150 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:38:09,150 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:38:09,166 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 18:38:09,166 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 18:38:09,190 - INFO - Iniciando configuración de la infraestructura...
2025-05-20 18:38:09,191 - INFO - Configurando base de datos MongoDB en: db
2025-05-20 18:38:09,191 - INFO - Iniciando instalación de MongoDB en db
2025-05-20 18:38:32,983 - DEBUG - Instalando MongoDB
2025-05-20 18:39:31,663 - DEBUG - Modificando bind_ip de MongoDB
2025-05-20 18:39:31,770 - DEBUG - Reiniciando contenedor db
2025-05-20 18:39:36,525 - INFO - MongoDB configurado con éxito en db
2025-05-20 18:39:36,525 - INFO - Configuración de base de datos completada correctamente.
2025-05-20 18:39:36,525 - INFO - Configurando servidor web s1
2025-05-20 18:39:36,525 - INFO - Iniciando configuración del servidor web s1
2025-05-20 18:39:36,525 - DEBUG - Actualizando paquetes en s1
2025-05-20 18:39:54,689 - DEBUG - Instalando Apache en s1
2025-05-20 18:40:24,707 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 18:40:25,067 - DEBUG - Transfiriendo aplicación web
2025-05-20 18:40:25,086 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 18:40:25,255 - DEBUG - Ejecutando instalación Node.js
2025-05-20 18:42:54,230 - DEBUG - Reiniciando servidor
2025-05-20 18:42:58,908 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 18:42:59,741 - INFO - Servidor web s1 configurado con éxito.
2025-05-20 18:42:59,741 - INFO - Configurando servidor web s2
2025-05-20 18:42:59,741 - INFO - Iniciando configuración del servidor web s2
2025-05-20 18:42:59,741 - DEBUG - Actualizando paquetes en s2
2025-05-20 18:43:20,192 - DEBUG - Instalando Apache en s2
2025-05-20 18:43:47,301 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-20 18:43:47,400 - DEBUG - Transfiriendo aplicación web
2025-05-20 18:43:47,415 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-20 18:43:47,906 - DEBUG - Ejecutando instalación Node.js
2025-05-20 18:46:08,219 - DEBUG - Reiniciando servidor
2025-05-20 18:46:13,296 - DEBUG - Iniciando servidor Node.js con forever
2025-05-20 18:46:13,889 - INFO - Servidor web s2 configurado con éxito.
2025-05-20 18:46:13,889 - INFO - Configurando balanceador lb
2025-05-20 18:46:13,889 - INFO - Instalando haproxy en el balanceador
2025-05-20 18:46:46,310 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-20 18:46:46,310 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-20 18:46:46,380 - DEBUG - Validando archivo haproxy.cfg
2025-05-20 18:46:46,464 - DEBUG - Iniciando servicio de haproxy
2025-05-20 18:46:47,585 - INFO - Haproxy instalado y configurado correctamente.
2025-05-20 18:46:47,585 - INFO - Balanceador configurado correctamente.
2025-05-20 19:10:50,308 - INFO - Orden recibida: create_server
2025-05-20 19:10:50,309 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:10:50,309 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 19:10:50,309 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 19:10:50,309 - INFO - Buscando servidor libre para crear...
2025-05-20 19:10:50,309 - DEBUG - Verificando si existe el contenedor s1
2025-05-20 19:10:50,359 - DEBUG - Verificando si existe el contenedor s2
2025-05-20 19:10:50,380 - DEBUG - Verificando si existe el contenedor s3
2025-05-20 19:10:50,390 - INFO - Creando nuevo servidor disponible: s3
2025-05-20 19:10:50,391 - DEBUG - Intentando crear el contenedor s3
2025-05-20 19:11:00,246 - INFO - Contenedor s3 creado con éxito.
2025-05-20 19:11:00,247 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-20 19:11:00,298 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-20 19:11:00,298 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-20 19:11:00,333 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-20 19:11:00,333 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-20 19:11:00,333 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-20 19:11:00,334 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-20 19:11:00,334 - INFO - Nuevo número de servidores: 3
2025-05-20 19:11:07,777 - INFO - Orden recibida: start_server
2025-05-20 19:11:07,777 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:11:07,778 - INFO - Número de servidores 3 cargados correctamente.
2025-05-20 19:11:07,778 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-20 19:11:07,778 - INFO - Iniciando servidor individual: s3
2025-05-20 19:11:07,778 - INFO - Solicitado arrancar servidor: s3
2025-05-20 19:11:07,794 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-20 19:11:08,649 - INFO - Contenedor iniciado: s3
2025-05-20 19:11:08,966 - INFO - Servidor s3 corriendo correctamente.
2025-05-20 19:11:08,967 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-20 19:11:24,898 - INFO - Orden recibida: delete_last_server
2025-05-20 19:11:24,898 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:11:24,898 - INFO - Número de servidores 3 cargados correctamente.
2025-05-20 19:11:24,899 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-20 19:11:24,899 - INFO - Buscando último servidor para eliminar...
2025-05-20 19:11:24,944 - INFO - Eliminando servidor: s3
2025-05-20 19:11:24,944 - DEBUG - Eliminando contenedor s3
2025-05-20 19:11:26,798 - INFO - Contenedor eliminado: s3
2025-05-20 19:11:26,798 - INFO - Servidor s3 eliminado correctamente.
2025-05-20 19:11:26,798 - INFO - Reconfigurando el balanceador
2025-05-20 19:11:26,799 - CRITICAL - Error al eliminar servidor: name 'setup_haproxy' is not defined
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 89, in delete_last_server
    setup_haproxy()
    ^^^^^^^^^^^^^
NameError: name 'setup_haproxy' is not defined
2025-05-20 19:11:26,802 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 19:11:26,804 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 19:11:26,804 - INFO - Nuevo número de servidores: 2
2025-05-20 19:11:54,063 - INFO - Orden recibida: create_server
2025-05-20 19:11:54,064 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:11:54,065 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 19:11:54,065 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 19:11:54,065 - INFO - Buscando servidor libre para crear...
2025-05-20 19:11:54,065 - DEBUG - Verificando si existe el contenedor s1
2025-05-20 19:11:54,093 - DEBUG - Verificando si existe el contenedor s2
2025-05-20 19:11:54,115 - DEBUG - Verificando si existe el contenedor s3
2025-05-20 19:11:54,130 - INFO - Creando nuevo servidor disponible: s3
2025-05-20 19:11:54,130 - DEBUG - Intentando crear el contenedor s3
2025-05-20 19:12:03,933 - INFO - Contenedor s3 creado con éxito.
2025-05-20 19:12:03,933 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-20 19:12:04,048 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-20 19:12:04,048 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-20 19:12:04,102 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-20 19:12:04,102 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-20 19:12:04,102 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-20 19:12:04,104 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-20 19:12:04,104 - INFO - Nuevo número de servidores: 3
2025-05-20 19:12:06,797 - INFO - Orden recibida: start_server
2025-05-20 19:12:06,797 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:12:06,797 - INFO - Número de servidores 3 cargados correctamente.
2025-05-20 19:12:06,797 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-20 19:12:06,797 - INFO - Iniciando servidor individual: s3
2025-05-20 19:12:06,798 - INFO - Solicitado arrancar servidor: s3
2025-05-20 19:12:06,818 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-20 19:12:07,155 - INFO - Contenedor iniciado: s3
2025-05-20 19:12:07,275 - INFO - Servidor s3 corriendo correctamente.
2025-05-20 19:12:07,276 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-20 19:13:08,186 - INFO - Orden recibida: delete_last_server
2025-05-20 19:13:08,186 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:13:08,186 - INFO - Número de servidores 3 cargados correctamente.
2025-05-20 19:13:08,186 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-20 19:13:08,186 - INFO - Buscando último servidor para eliminar...
2025-05-20 19:13:08,390 - INFO - Eliminando servidor: s3
2025-05-20 19:13:08,390 - DEBUG - Eliminando contenedor s3
2025-05-20 19:13:10,148 - INFO - Contenedor eliminado: s3
2025-05-20 19:13:10,148 - INFO - Servidor s3 eliminado correctamente.
2025-05-20 19:13:10,148 - INFO - Reconfigurando el balanceador
2025-05-20 19:13:10,212 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-20 19:13:10,212 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-20 19:13:10,259 - DEBUG - Validando archivo haproxy.cfg
2025-05-20 19:13:10,364 - DEBUG - Iniciando servicio de haproxy
2025-05-20 19:13:10,551 - INFO - Haproxy instalado y configurado correctamente.
2025-05-20 19:13:10,551 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-20 19:13:10,553 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-20 19:13:10,553 - INFO - Nuevo número de servidores: 2
2025-05-20 19:17:43,341 - INFO - Orden recibida: delete
2025-05-20 19:17:43,341 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-20 19:17:43,342 - INFO - Número de servidores 2 cargados correctamente.
2025-05-20 19:17:43,342 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-20 19:17:43,342 - INFO - Eliminando toda la infraestructura
2025-05-20 19:17:43,342 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-20 19:17:43,446 - INFO - Imagen local eliminada con éxito.
2025-05-20 19:17:43,446 - DEBUG - Eliminando contenedor s1
2025-05-20 19:17:46,165 - INFO - Contenedor eliminado: s1
2025-05-20 19:17:46,165 - DEBUG - Eliminando contenedor s2
2025-05-20 19:17:49,283 - INFO - Contenedor eliminado: s2
2025-05-20 19:17:49,283 - DEBUG - Eliminando contenedor cl
2025-05-20 19:17:51,247 - INFO - Contenedor eliminado: cl
2025-05-20 19:17:51,247 - DEBUG - Eliminando contenedor lb
2025-05-20 19:17:53,242 - INFO - Contenedor eliminado: lb
2025-05-20 19:17:53,242 - DEBUG - Eliminando contenedor db
2025-05-20 19:17:55,154 - INFO - Contenedor eliminado: db
2025-05-20 19:17:55,154 - DEBUG - Contenedores eliminados correctamente
2025-05-20 19:17:55,154 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-20 19:17:55,470 - INFO - Bridge eliminado: lxdbr1
2025-05-20 19:17:55,470 - INFO - Eliminación completada.
2025-05-21 16:03:22,689 - INFO - Orden recibida: create
2025-05-21 16:03:22,689 - INFO - Número de servidores especificado: 3
2025-05-21 16:03:22,690 - INFO - Iniciando creación de infraestructura con 3 servidores
2025-05-21 16:03:22,690 - DEBUG - Parámetro recibido n_servers=3
2025-05-21 16:03:22,690 - DEBUG - Creando imagen base...
2025-05-21 16:03:22,690 - DEBUG - Verificando si la imagen ya está importada...
2025-05-21 16:03:22,718 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-21 16:03:28,672 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-21 16:03:28,672 - DEBUG - Configurando y creando bridges...
2025-05-21 16:03:29,530 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-21 16:03:32,887 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-21 16:03:32,887 - DEBUG - Creando bridge lxdbr1
2025-05-21 16:03:34,503 - INFO - Bridge creado: lxdbr1
2025-05-21 16:03:35,397 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-21 16:03:38,754 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-21 16:03:38,755 - DEBUG - Creando contenedores de servidores...
2025-05-21 16:03:38,755 - DEBUG - Intentando crear el contenedor s1
2025-05-21 16:03:48,238 - INFO - Contenedor s1 creado con éxito.
2025-05-21 16:03:48,239 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-21 16:03:48,285 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-21 16:03:48,286 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-21 16:03:48,312 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-21 16:03:48,312 - DEBUG - Intentando crear el contenedor s2
2025-05-21 16:03:58,265 - INFO - Contenedor s2 creado con éxito.
2025-05-21 16:03:58,265 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-21 16:03:58,347 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-21 16:03:58,348 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-21 16:03:58,410 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-21 16:03:58,410 - DEBUG - Intentando crear el contenedor s3
2025-05-21 16:04:08,665 - INFO - Contenedor s3 creado con éxito.
2025-05-21 16:04:08,666 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-21 16:04:08,711 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-21 16:04:08,712 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-21 16:04:08,745 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-21 16:04:08,745 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-21 16:04:08,746 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-21 16:04:08,746 - INFO - Número de servidores guardados correctamente
2025-05-21 16:04:08,746 - DEBUG - Creando balanceador...
2025-05-21 16:04:08,746 - DEBUG - Intentando crear el contenedor lb
2025-05-21 16:04:18,738 - INFO - Contenedor lb creado con éxito.
2025-05-21 16:04:18,738 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-21 16:04:18,790 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-21 16:04:18,790 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-21 16:04:19,024 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-21 16:04:19,024 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-21 16:04:19,618 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-21 16:04:19,618 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-21 16:04:19,684 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-21 16:04:19,685 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-21 16:04:20,146 - INFO - Contenedor iniciado: lb
2025-05-21 16:04:20,146 - DEBUG - Iniciando cambio de netplan en lb
2025-05-21 16:04:20,147 - DEBUG - Desactivando cloud-init en lb
2025-05-21 16:04:20,201 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-21 16:04:20,247 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-21 16:04:20,247 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-21 16:04:20,307 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-21 16:04:24,291 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-21 16:04:24,291 - DEBUG - Verificando estado antes de detener lb
2025-05-21 16:04:25,715 - INFO - Contenedor parado: lb
2025-05-21 16:04:25,715 - INFO - Balanceador configurado correctamente
2025-05-21 16:04:25,715 - DEBUG - Creando cliente...
2025-05-21 16:04:25,715 - DEBUG - Intentando crear el contenedor cl
2025-05-21 16:04:35,201 - INFO - Contenedor cl creado con éxito.
2025-05-21 16:04:35,201 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-21 16:04:35,276 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-21 16:04:35,276 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-21 16:04:35,350 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-21 16:04:35,350 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-21 16:04:36,449 - INFO - Contenedor iniciado: cl
2025-05-21 16:04:36,449 - DEBUG - Iniciando cambio de netplan en cl
2025-05-21 16:04:36,449 - DEBUG - Desactivando cloud-init en cl
2025-05-21 16:04:36,504 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-21 16:04:36,560 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-21 16:04:36,561 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-21 16:04:36,626 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-21 16:04:40,631 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-21 16:04:40,631 - DEBUG - Verificando estado antes de detener cl
2025-05-21 16:04:41,976 - INFO - Contenedor parado: cl
2025-05-21 16:04:41,976 - INFO - Cliente configurado correctamente
2025-05-21 16:04:41,976 - DEBUG - Intentando crear el contenedor db
2025-05-21 16:04:51,418 - INFO - Contenedor db creado con éxito.
2025-05-21 16:04:51,419 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-21 16:04:51,514 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-21 16:04:51,514 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-21 16:04:51,571 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-21 16:04:51,571 - INFO - Infraestructura creada correctamente.
2025-05-21 16:05:02,934 - INFO - Orden recibida: configure
2025-05-21 16:05:02,934 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:02,935 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:02,935 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:05:02,935 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:02,935 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:02,952 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:02,952 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:02,969 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-21 16:05:02,970 - WARNING - El contenedor db no está en estado RUNNING
2025-05-21 16:05:02,970 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-21 16:05:02,970 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-21 16:05:02,970 - WARNING - El contenedor s2 no está en estado RUNNING
2025-05-21 16:05:02,970 - WARNING - El contenedor s3 no está en estado RUNNING
2025-05-21 16:05:02,970 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-21 16:05:19,012 - INFO - Orden recibida: start
2025-05-21 16:05:19,012 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:19,012 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:19,012 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:05:19,012 - INFO - Iniciando todos los contenedores
2025-05-21 16:05:19,012 - DEBUG - Arrancando servidor: s1
2025-05-21 16:05:19,012 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-21 16:05:19,294 - INFO - Contenedor iniciado: s1
2025-05-21 16:05:19,345 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-21 16:05:19,345 - DEBUG - Arrancando servidor: s2
2025-05-21 16:05:19,345 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-21 16:05:19,568 - INFO - Contenedor iniciado: s2
2025-05-21 16:05:19,598 - DEBUG - No se encontró la app en s2, no se reinicia.
2025-05-21 16:05:19,598 - DEBUG - Arrancando servidor: s3
2025-05-21 16:05:19,598 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-21 16:05:19,869 - INFO - Contenedor iniciado: s3
2025-05-21 16:05:19,964 - DEBUG - No se encontró la app en s3, no se reinicia.
2025-05-21 16:05:19,965 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-21 16:05:20,361 - INFO - Contenedor iniciado: cl
2025-05-21 16:05:20,361 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-21 16:05:20,836 - INFO - Contenedor iniciado: lb
2025-05-21 16:05:20,836 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-21 16:05:21,315 - INFO - Contenedor iniciado: db
2025-05-21 16:05:21,315 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-21 16:05:21,321 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-21 16:05:21,322 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-21 16:05:21,324 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-21 16:05:21,326 - INFO - Consola del contenedor cl abierta correctamente
2025-05-21 16:05:21,329 - INFO - Consola del contenedor lb abierta correctamente
2025-05-21 16:05:21,330 - INFO - Consola del contenedor db abierta correctamente
2025-05-21 16:05:54,078 - INFO - Orden recibida: configure
2025-05-21 16:05:54,078 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:54,078 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:54,079 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:05:54,079 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:54,079 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:54,159 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:05:54,159 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:05:54,174 - INFO - Iniciando configuración de la infraestructura...
2025-05-21 16:05:54,174 - INFO - Configurando base de datos MongoDB en: db
2025-05-21 16:05:54,174 - INFO - Iniciando instalación de MongoDB en db
2025-05-21 16:06:11,869 - DEBUG - Instalando MongoDB
2025-05-21 16:06:56,456 - DEBUG - Modificando bind_ip de MongoDB
2025-05-21 16:06:56,549 - DEBUG - Reiniciando contenedor db
2025-05-21 16:08:28,417 - INFO - MongoDB configurado con éxito en db
2025-05-21 16:08:28,417 - INFO - Configuración de base de datos completada correctamente.
2025-05-21 16:08:28,417 - INFO - Configurando servidor web s1
2025-05-21 16:08:28,417 - INFO - Iniciando configuración del servidor web s1
2025-05-21 16:08:28,417 - DEBUG - Actualizando paquetes en s1
2025-05-21 16:08:46,823 - DEBUG - Instalando Apache en s1
2025-05-21 16:09:26,181 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-21 16:09:26,364 - DEBUG - Transfiriendo aplicación web
2025-05-21 16:09:26,390 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-21 16:09:26,686 - DEBUG - Ejecutando instalación Node.js
2025-05-21 16:11:52,753 - DEBUG - Reiniciando servidor
2025-05-21 16:11:57,426 - DEBUG - Iniciando servidor Node.js con forever
2025-05-21 16:11:59,337 - INFO - Servidor web s1 configurado con éxito.
2025-05-21 16:11:59,337 - INFO - Configurando servidor web s2
2025-05-21 16:11:59,337 - INFO - Iniciando configuración del servidor web s2
2025-05-21 16:11:59,337 - DEBUG - Actualizando paquetes en s2
2025-05-21 16:12:19,212 - DEBUG - Instalando Apache en s2
2025-05-21 16:12:45,900 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-21 16:12:46,303 - DEBUG - Transfiriendo aplicación web
2025-05-21 16:12:46,326 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-21 16:12:46,614 - DEBUG - Ejecutando instalación Node.js
2025-05-21 16:15:04,365 - DEBUG - Reiniciando servidor
2025-05-21 16:15:08,832 - DEBUG - Iniciando servidor Node.js con forever
2025-05-21 16:15:09,509 - INFO - Servidor web s2 configurado con éxito.
2025-05-21 16:15:09,509 - INFO - Configurando servidor web s3
2025-05-21 16:15:09,509 - INFO - Iniciando configuración del servidor web s3
2025-05-21 16:15:09,509 - DEBUG - Actualizando paquetes en s3
2025-05-21 16:15:25,452 - DEBUG - Instalando Apache en s3
2025-05-21 16:15:50,366 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-21 16:15:50,786 - DEBUG - Transfiriendo aplicación web
2025-05-21 16:15:50,812 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-21 16:15:51,043 - DEBUG - Ejecutando instalación Node.js
2025-05-21 16:18:16,315 - DEBUG - Reiniciando servidor
2025-05-21 16:18:21,069 - DEBUG - Iniciando servidor Node.js con forever
2025-05-21 16:18:23,345 - INFO - Servidor web s3 configurado con éxito.
2025-05-21 16:18:23,345 - INFO - Configurando balanceador lb
2025-05-21 16:18:23,345 - INFO - Instalando haproxy en el balanceador
2025-05-21 16:18:51,700 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-21 16:18:51,700 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-21 16:18:51,803 - DEBUG - Validando archivo haproxy.cfg
2025-05-21 16:18:51,883 - DEBUG - Iniciando servicio de haproxy
2025-05-21 16:18:52,030 - INFO - Haproxy instalado y configurado correctamente.
2025-05-21 16:18:52,030 - INFO - Balanceador configurado correctamente.
2025-05-21 16:23:38,134 - INFO - Orden recibida: stop_server
2025-05-21 16:23:38,134 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:23:38,135 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:23:38,135 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:23:38,135 - INFO - Deteniendo servidor individual: s3
2025-05-21 16:23:38,135 - INFO - Solicitado parar servidor: s3
2025-05-21 16:23:38,165 - DEBUG - Verificando estado antes de detener s3
2025-05-21 16:23:42,719 - INFO - Contenedor parado: s3
2025-05-21 16:23:42,719 - INFO - Servidor s3 detenido correctamente.
2025-05-21 16:24:44,386 - INFO - Orden recibida: start__server
2025-05-21 16:24:44,386 - ERROR - Orden no válida: start__server
2025-05-21 16:24:49,920 - INFO - Orden recibida: start_server
2025-05-21 16:24:49,920 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:24:49,920 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:24:49,920 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:24:49,920 - INFO - Iniciando servidor individual: s3
2025-05-21 16:24:49,920 - INFO - Solicitado arrancar servidor: s3
2025-05-21 16:24:49,944 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-21 16:24:50,235 - INFO - Contenedor iniciado: s3
2025-05-21 16:24:51,913 - INFO - Servidor s3 corriendo correctamente.
2025-05-21 16:24:51,914 - INFO - Consola del contenedor s3 abierta correctamente
2025-05-21 16:31:38,111 - INFO - Orden recibida: stop_server
2025-05-21 16:31:38,111 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 16:31:38,111 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 16:31:38,111 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 16:31:38,111 - INFO - Deteniendo servidor individual: s3
2025-05-21 16:31:38,111 - INFO - Solicitado parar servidor: s3
2025-05-21 16:31:38,136 - DEBUG - Verificando estado antes de detener s3
2025-05-21 16:31:42,346 - INFO - Contenedor parado: s3
2025-05-21 16:31:42,436 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-21 16:31:42,436 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-21 16:31:42,484 - DEBUG - Validando archivo haproxy.cfg
2025-05-21 16:31:42,580 - DEBUG - Iniciando servicio de haproxy
2025-05-21 16:31:42,713 - INFO - Haproxy instalado y configurado correctamente.
2025-05-21 16:31:42,713 - INFO - Servidor s3 detenido correctamente.
2025-05-21 17:48:45,594 - INFO - Orden recibida: configure_remote
2025-05-21 17:48:45,594 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 17:48:45,594 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 17:48:45,594 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 17:49:22,429 - INFO - Orden recibida: configure_remote
2025-05-21 17:49:22,429 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 17:49:22,429 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 17:49:22,429 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 17:50:18,077 - INFO - Orden recibida: configure_remote
2025-05-21 17:50:18,078 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 17:50:18,078 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 17:50:18,078 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 17:50:18,079 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es → IP: 127.0.1.1
2025-05-21 17:50:18,079 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-21 17:50:57,233 - INFO - Configurando bridge remoto
2025-05-21 17:50:57,241 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'network', 'set', 'remotolxdbr0:', 'ipv4.address', '134.3.0.1/24']' returned non-zero exit status 1.
2025-05-21 17:51:36,158 - INFO - Orden recibida: configure_remote
2025-05-21 17:51:36,158 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-21 17:51:36,158 - INFO - Número de servidores 3 cargados correctamente.
2025-05-21 17:51:36,158 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-21 17:51:36,159 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es → IP: 127.0.1.1
2025-05-21 17:51:36,159 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-21 17:51:43,742 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'remote', 'add', 'remoto', '127.0.1.1:8443', '--password', 'mypass', '--accept-certificate']' returned non-zero exit status 1.
2025-05-22 09:04:19,139 - INFO - Orden recibida: create
2025-05-22 09:04:19,139 - INFO - Número de servidores especificado: 1
2025-05-22 09:04:19,139 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-22 09:04:19,139 - DEBUG - Parámetro recibido n_servers=1
2025-05-22 09:04:19,139 - DEBUG - Creando imagen base...
2025-05-22 09:04:19,139 - DEBUG - Verificando si la imagen ya está importada...
2025-05-22 09:04:20,477 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-22 09:04:26,425 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-22 09:04:26,426 - DEBUG - Configurando y creando bridges...
2025-05-22 09:04:27,286 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-22 09:04:30,663 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-22 09:04:30,663 - DEBUG - Creando bridge lxdbr1
2025-05-22 09:04:32,275 - INFO - Bridge creado: lxdbr1
2025-05-22 09:04:33,170 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-22 09:04:36,603 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-22 09:04:36,603 - DEBUG - Creando contenedores de servidores...
2025-05-22 09:04:36,603 - DEBUG - Intentando crear el contenedor s1
2025-05-22 09:04:46,054 - INFO - Contenedor s1 creado con éxito.
2025-05-22 09:04:46,054 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-22 09:04:46,102 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-22 09:04:46,102 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-22 09:04:46,130 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-22 09:04:46,130 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-22 09:04:46,131 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-22 09:04:46,131 - INFO - Número de servidores guardados correctamente
2025-05-22 09:04:46,131 - DEBUG - Creando balanceador...
2025-05-22 09:04:46,131 - DEBUG - Intentando crear el contenedor lb
2025-05-22 09:04:55,849 - INFO - Contenedor lb creado con éxito.
2025-05-22 09:04:55,849 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-22 09:04:55,919 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-22 09:04:55,919 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-22 09:04:56,004 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-22 09:04:56,004 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-22 09:04:56,115 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-22 09:04:56,116 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-22 09:04:56,170 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-22 09:04:56,170 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-22 09:04:56,847 - INFO - Contenedor iniciado: lb
2025-05-22 09:04:56,847 - DEBUG - Iniciando cambio de netplan en lb
2025-05-22 09:04:56,847 - DEBUG - Desactivando cloud-init en lb
2025-05-22 09:04:56,898 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-22 09:04:56,962 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-22 09:04:56,962 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-22 09:04:57,005 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-22 09:05:01,886 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-22 09:05:01,886 - DEBUG - Verificando estado antes de detener lb
2025-05-22 09:05:03,358 - INFO - Contenedor parado: lb
2025-05-22 09:05:03,358 - INFO - Balanceador configurado correctamente
2025-05-22 09:05:03,359 - DEBUG - Creando cliente...
2025-05-22 09:05:03,359 - DEBUG - Intentando crear el contenedor cl
2025-05-22 09:05:12,818 - INFO - Contenedor cl creado con éxito.
2025-05-22 09:05:12,818 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-22 09:05:12,883 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-22 09:05:12,883 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-22 09:05:12,959 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-22 09:05:12,960 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-22 09:05:13,543 - INFO - Contenedor iniciado: cl
2025-05-22 09:05:13,543 - DEBUG - Iniciando cambio de netplan en cl
2025-05-22 09:05:13,544 - DEBUG - Desactivando cloud-init en cl
2025-05-22 09:05:13,601 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-22 09:05:13,658 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-22 09:05:13,658 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-22 09:05:14,041 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-22 09:05:18,490 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-22 09:05:18,491 - DEBUG - Verificando estado antes de detener cl
2025-05-22 09:05:20,926 - INFO - Contenedor parado: cl
2025-05-22 09:05:20,926 - INFO - Cliente configurado correctamente
2025-05-22 09:05:20,926 - DEBUG - Intentando crear el contenedor db
2025-05-22 09:05:30,426 - INFO - Contenedor db creado con éxito.
2025-05-22 09:05:30,427 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-22 09:05:30,479 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-22 09:05:30,479 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-22 09:05:30,523 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-22 09:05:30,524 - INFO - Infraestructura creada correctamente.
2025-05-22 09:08:44,692 - INFO - Orden recibida: configure
2025-05-22 09:08:44,692 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:08:44,693 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:08:44,693 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 09:08:44,693 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:08:44,694 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:08:44,718 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:08:44,719 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:08:44,743 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-22 09:08:44,744 - WARNING - El contenedor db no está en estado RUNNING
2025-05-22 09:08:44,744 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-22 09:08:44,744 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-22 09:08:44,744 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-22 09:08:53,945 - INFO - Orden recibida: start
2025-05-22 09:08:53,945 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:08:53,945 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:08:53,945 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 09:08:53,945 - INFO - Iniciando todos los contenedores
2025-05-22 09:08:53,946 - DEBUG - Arrancando servidor: s1
2025-05-22 09:08:53,946 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-22 09:08:54,211 - INFO - Contenedor iniciado: s1
2025-05-22 09:08:54,255 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-22 09:08:54,255 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-22 09:08:54,607 - INFO - Contenedor iniciado: cl
2025-05-22 09:08:54,607 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-22 09:08:55,049 - INFO - Contenedor iniciado: lb
2025-05-22 09:08:55,049 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-22 09:08:55,412 - INFO - Contenedor iniciado: db
2025-05-22 09:08:55,412 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-22 09:08:55,418 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-22 09:08:55,429 - INFO - Consola del contenedor cl abierta correctamente
2025-05-22 09:08:55,436 - INFO - Consola del contenedor lb abierta correctamente
2025-05-22 09:08:55,446 - INFO - Consola del contenedor db abierta correctamente
2025-05-22 09:09:24,411 - INFO - Orden recibida: configure
2025-05-22 09:09:24,412 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:09:24,412 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:09:24,412 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 09:09:24,412 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:09:24,412 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:09:24,436 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:09:24,436 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:09:24,451 - INFO - Iniciando configuración de la infraestructura...
2025-05-22 09:09:24,451 - INFO - Configurando base de datos MongoDB en: db
2025-05-22 09:09:24,451 - INFO - Iniciando instalación de MongoDB en db
2025-05-22 09:09:42,430 - DEBUG - Instalando MongoDB
2025-05-22 09:10:12,255 - DEBUG - Modificando bind_ip de MongoDB
2025-05-22 09:10:12,296 - DEBUG - Reiniciando contenedor db
2025-05-22 09:10:16,790 - INFO - MongoDB configurado con éxito en db
2025-05-22 09:10:16,790 - INFO - Configuración de base de datos completada correctamente.
2025-05-22 09:10:16,790 - INFO - Configurando servidor web s1
2025-05-22 09:10:16,791 - INFO - Iniciando configuración del servidor web s1
2025-05-22 09:10:16,791 - DEBUG - Actualizando paquetes en s1
2025-05-22 09:10:54,840 - DEBUG - Instalando Apache en s1
2025-05-22 09:11:23,143 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-22 09:11:23,236 - DEBUG - Transfiriendo aplicación web
2025-05-22 09:11:23,253 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-22 09:11:23,317 - DEBUG - Ejecutando instalación Node.js
2025-05-22 09:13:47,048 - DEBUG - Reiniciando servidor
2025-05-22 09:13:51,587 - DEBUG - Iniciando servidor Node.js con forever
2025-05-22 09:13:52,318 - INFO - Servidor web s1 configurado con éxito.
2025-05-22 09:13:52,318 - INFO - Configurando balanceador lb
2025-05-22 09:13:52,318 - INFO - Instalando haproxy en el balanceador
2025-05-22 09:14:15,787 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-22 09:14:15,787 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-22 09:14:15,886 - DEBUG - Validando archivo haproxy.cfg
2025-05-22 09:14:15,953 - DEBUG - Iniciando servicio de haproxy
2025-05-22 09:14:16,059 - INFO - Haproxy instalado y configurado correctamente.
2025-05-22 09:14:16,059 - INFO - Balanceador configurado correctamente.
2025-05-22 09:18:03,503 - INFO - Orden recibida: configure_remote
2025-05-22 09:18:03,503 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:18:03,504 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:18:03,504 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 09:18:03,520 - INFO - Nombre remoto detectado: l018.lab.dit.upm.es → IP: 127.0.1.1
2025-05-22 09:18:03,520 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 09:18:44,437 - INFO - Configurando bridge remoto
2025-05-22 09:18:44,546 - INFO - Creando contenedor remoto con MongoDB
2025-05-22 09:18:44,561 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'exec', 'remote:db', '--', 'bash', '-c', "echo 'nameserver 8.8.8.8' > /etc/resolv.conf"]' returned non-zero exit status 1.
2025-05-22 09:22:36,302 - INFO - Orden recibida: configure_remote
2025-05-22 09:22:36,302 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 09:22:36,303 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 09:22:36,303 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 09:22:36,304 - INFO - Nombre remoto detectado: l018.lab.dit.upm.es → IP: 127.0.1.1
2025-05-22 09:22:36,304 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 09:24:36,137 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'remote', 'add', 'remoto', '127.0.1.1:8443', '--password', 'mypass', '--accept-certificate']' returned non-zero exit status 1.
2025-05-22 10:03:48,613 - INFO - Orden recibida: configure_remote
2025-05-22 10:03:48,613 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:03:48,614 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:03:48,614 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:03:48,614 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-22 10:04:03,096 - INFO - Orden recibida: configure_remote
2025-05-22 10:04:03,096 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:04:03,096 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:04:03,096 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:04:03,096 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:04:03,116 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:04:03,117 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:04:24,863 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'config', 'set', 'core.https_address', '138.4.31.18', ':8443']' returned non-zero exit status 1.
2025-05-22 10:07:25,854 - INFO - Orden recibida: configure_remote
2025-05-22 10:07:25,854 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:07:25,854 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:07:25,855 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:07:25,855 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:07:25,857 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:07:25,857 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:09:32,815 - INFO - Orden recibida: configure_remote
2025-05-22 10:09:32,815 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:09:32,815 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:09:32,816 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:09:32,816 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:09:32,818 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:09:32,818 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:10:26,371 - INFO - Orden recibida: configure_remote
2025-05-22 10:10:26,371 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:10:26,372 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:10:26,372 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:10:26,372 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:10:26,374 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:10:26,374 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:10:36,432 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'remote', 'add', 'remoto', '138.4.31.19:8443', '--password', 'mypass', '--accept-certificate']' returned non-zero exit status 1.
2025-05-22 10:17:38,773 - INFO - Orden recibida: configure_remote
2025-05-22 10:17:38,773 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:17:38,774 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:17:38,774 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:17:38,774 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:17:38,776 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:17:38,776 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:19:38,067 - INFO - Orden recibida: configure_remote
2025-05-22 10:19:38,067 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:19:38,067 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:19:38,067 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:19:38,068 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:19:38,070 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:19:38,070 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:26:45,261 - INFO - Orden recibida: configure_remote
2025-05-22 10:26:45,261 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:26:45,262 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:26:45,262 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:26:45,262 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:26:45,264 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:26:45,265 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:26:54,781 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'remote', 'delete', 'remoto']' returned non-zero exit status 1.
2025-05-22 10:27:46,231 - INFO - Orden recibida: configure_remote
2025-05-22 10:27:46,231 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:27:46,231 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:27:46,231 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:27:46,232 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:27:46,233 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:27:46,234 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:27:54,580 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'remote', 'add', 'remoto', '138.4.31.19:8443', '--password', 'mypass', '--accept-certificate']' returned non-zero exit status 1.
2025-05-22 10:28:32,797 - INFO - Orden recibida: configure_remote
2025-05-22 10:28:32,797 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:28:32,797 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:28:32,798 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:28:32,798 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:28:32,800 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:28:32,800 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:28:58,877 - INFO - Configurando bridge remoto
2025-05-22 10:28:59,857 - INFO - Creando contenedor remoto con MongoDB
2025-05-22 10:28:59,890 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'exec', 'remote:db', '--', 'bash', '-c', "echo 'nameserver 8.8.8.8' | sudo tee /etc/resolv.conf"]' returned non-zero exit status 1.
2025-05-22 10:55:08,892 - INFO - Orden recibida: configure_remote
2025-05-22 10:55:08,892 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:55:08,893 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:55:08,893 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:55:08,893 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:55:08,895 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:55:08,895 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:55:27,108 - INFO - Configurando bridge remoto
2025-05-22 10:57:55,557 - INFO - Orden recibida: configure_remote
2025-05-22 10:57:55,557 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:57:55,558 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:57:55,558 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:57:55,558 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:57:55,560 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:57:55,560 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:58:06,036 - INFO - Configurando bridge remoto
2025-05-22 10:58:06,316 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 10:59:30,660 - INFO - Orden recibida: configure_remote
2025-05-22 10:59:30,660 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 10:59:30,660 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 10:59:30,660 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 10:59:30,660 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 10:59:30,663 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 10:59:30,663 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 10:59:47,706 - INFO - Configurando bridge remoto
2025-05-22 11:00:33,461 - INFO - Base de datos copiada al equipo remoto
2025-05-22 11:00:33,462 - INFO - Configurando proxy para acceso a MongoDB
2025-05-22 11:01:38,985 - INFO - Orden recibida: configure_remote
2025-05-22 11:01:38,985 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 11:01:38,985 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 11:01:38,985 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 11:01:38,986 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 11:01:38,988 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 11:01:38,988 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 11:01:50,286 - INFO - Configurando bridge remoto
2025-05-22 11:01:50,560 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 11:09:18,808 - INFO - Orden recibida: configure_remote
2025-05-22 11:09:18,808 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 11:09:18,809 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 11:09:18,809 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 11:09:18,809 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 11:09:18,812 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 11:09:18,812 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 11:09:29,466 - INFO - Configurando bridge remoto
2025-05-22 11:09:29,848 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 11:11:28,207 - INFO - Orden recibida: configure_remote
2025-05-22 11:11:28,207 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 11:11:28,208 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 11:11:28,208 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 11:11:28,208 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-22 11:11:28,210 - INFO - Nombre remoto detectado: l019.lab.dit.upm.es → IP: 138.4.31.19
2025-05-22 11:11:28,210 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 11:11:36,468 - INFO - Configurando bridge remoto
2025-05-22 11:14:20,905 - INFO - Orden recibida: configure_remote
2025-05-22 11:14:20,905 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 11:14:20,906 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 11:14:20,906 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 11:14:20,906 - INFO - Desplegando base de datos remota en el equipo l020
2025-05-22 11:14:20,908 - INFO - Nombre remoto detectado: l020.lab.dit.upm.es → IP: 138.4.31.20
2025-05-22 11:14:20,908 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 11:14:35,530 - INFO - Configurando bridge remoto
2025-05-22 11:15:22,255 - INFO - Base de datos copiada al equipo remoto
2025-05-22 11:15:22,255 - INFO - Configurando proxy para acceso a MongoDB
2025-05-22 11:15:22,361 - INFO - Base de datos remota desplegada correctamente
2025-05-22 17:04:51,292 - INFO - Orden recibida: list
2025-05-22 17:04:51,292 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:04:51,292 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:04:51,292 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:04:51,293 - INFO - Listando contenedores
2025-05-22 17:04:51,328 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-22 17:05:18,222 - INFO - Orden recibida: configure_remote
2025-05-22 17:05:18,222 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:05:18,222 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:05:18,222 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:05:18,222 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-22 17:05:24,856 - INFO - Orden recibida: configure_remote
2025-05-22 17:05:24,856 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:05:24,856 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:05:24,856 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:05:24,856 - INFO - Desplegando base de datos remota en el equipo db
2025-05-22 17:05:24,871 - ERROR - No se pudo obtener la IP remota: [Errno -5] No address associated with hostname
2025-05-22 17:05:24,872 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:05:24,970 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', 'None', 'lxc config set core.https_address None:8443']' returned non-zero exit status 255.
2025-05-22 17:05:32,940 - INFO - Orden recibida: configure_remote
2025-05-22 17:05:32,940 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:05:32,941 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:05:32,941 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:05:32,941 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-22 17:05:32,943 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es → IP: 138.4.31.22
2025-05-22 17:05:32,943 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:06:24,790 - INFO - Configurando bridge remoto
2025-05-22 17:06:25,834 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 17:09:22,186 - INFO - Orden recibida: list
2025-05-22 17:09:22,186 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:09:22,187 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:09:22,187 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:09:22,187 - INFO - Listando contenedores
2025-05-22 17:09:22,226 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-22 17:09:27,476 - INFO - Orden recibida: enlarge
2025-05-22 17:09:27,476 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:09:27,476 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:09:27,476 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-22 17:09:27,476 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-22 17:09:27,476 - INFO - Parando contenedor s1 antes de publicar
2025-05-22 17:09:31,678 - DEBUG - Eliminando imagen previa con alias 'servidor' si existe
2025-05-22 17:09:31,692 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-22 17:11:35,253 - INFO - Imagen publicada correctamente.
2025-05-22 17:11:35,255 - INFO - Buscando servidor libre para crear...
2025-05-22 17:11:35,255 - DEBUG - Verificando si existe el contenedor s1
2025-05-22 17:11:35,302 - DEBUG - Verificando si existe el contenedor s2
2025-05-22 17:11:35,319 - DEBUG - Verificando si existe el contenedor s3
2025-05-22 17:11:35,330 - INFO - Creando nuevo servidor disponible: s3
2025-05-22 17:11:35,330 - DEBUG - Intentando crear el contenedor s3
2025-05-22 17:11:57,034 - INFO - Contenedor s3 creado con éxito.
2025-05-22 17:11:57,034 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-22 17:11:57,115 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-22 17:11:57,115 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-22 17:11:57,162 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-22 17:11:57,163 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-22 17:11:57,163 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:11:57,164 - INFO - Número de servidores 1 cargados correctamente.
2025-05-22 17:11:57,164 - INFO - Solicitado arrancar servidor: s2
2025-05-22 17:11:57,185 - INFO - Servidor s2 ya está corriendo.
2025-05-22 17:12:00,186 - INFO - Iniciando configuración del servidor web s2
2025-05-22 17:12:00,186 - DEBUG - Actualizando paquetes en s2
2025-05-22 17:12:05,627 - DEBUG - Instalando Apache en s2
2025-05-22 17:12:06,941 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-22 17:12:07,079 - DEBUG - Transfiriendo aplicación web
2025-05-22 17:12:07,105 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-22 17:12:07,386 - DEBUG - Ejecutando instalación Node.js
2025-05-22 17:12:53,690 - DEBUG - Reiniciando servidor
2025-05-22 17:12:58,404 - DEBUG - Iniciando servidor Node.js con forever
2025-05-22 17:12:59,366 - INFO - Servidor web s2 configurado con éxito.
2025-05-22 17:12:59,366 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-22 17:12:59,368 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-22 17:12:59,368 - INFO - Nuevo número de servidores: 2
2025-05-22 17:20:53,821 - INFO - Orden recibida: delete_last_server
2025-05-22 17:20:53,822 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:20:53,822 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:20:53,822 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:20:53,822 - INFO - Buscando último servidor para eliminar...
2025-05-22 17:20:53,860 - INFO - Eliminando servidor: s3
2025-05-22 17:20:53,860 - DEBUG - Eliminando contenedor s3
2025-05-22 17:20:55,610 - INFO - Contenedor eliminado: s3
2025-05-22 17:20:55,610 - INFO - Servidor s3 eliminado correctamente.
2025-05-22 17:20:55,610 - INFO - Reconfigurando el balanceador
2025-05-22 17:20:55,697 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-22 17:20:55,697 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-22 17:20:55,741 - DEBUG - Validando archivo haproxy.cfg
2025-05-22 17:20:55,921 - DEBUG - Iniciando servicio de haproxy
2025-05-22 17:20:56,162 - INFO - Haproxy instalado y configurado correctamente.
2025-05-22 17:20:56,162 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-22 17:20:56,165 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-22 17:20:56,165 - INFO - Nuevo número de servidores: 2
2025-05-22 17:21:28,786 - INFO - Orden recibida: enlarge
2025-05-22 17:21:28,786 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:21:28,787 - INFO - Número de servidores 2 cargados correctamente.
2025-05-22 17:21:28,787 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-22 17:21:28,787 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-22 17:21:28,787 - INFO - Parando contenedor s1 antes de publicar
2025-05-22 17:21:28,802 - CRITICAL - Error al publicar imagen del contenedor s1: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 59, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-22 17:21:28,809 - CRITICAL - Error crítico al añadir el servidor: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/ordenes_opcionales.py", line 194, in enlarge
    publish_image(contenedor=VM_NAMES["servidores"][0], alias="servidor")
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 59, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-22 17:21:28,810 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-22 17:21:28,812 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-22 17:21:28,812 - INFO - Nuevo número de servidores: 3
2025-05-22 17:24:21,852 - INFO - Orden recibida: enlarge
2025-05-22 17:24:21,852 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:24:21,852 - INFO - Número de servidores 2 cargados correctamente.
2025-05-22 17:24:21,853 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-22 17:24:21,853 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-22 17:24:21,853 - INFO - Parando contenedor s1 antes de publicar
2025-05-22 17:24:21,885 - CRITICAL - Error al publicar imagen del contenedor s1: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/javier.sanmayoral/arso/p2/practica2_arso/utils/image.py", line 59, in publish_image
    subprocess.run(["lxc", "stop", contenedor], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'stop', 's1']' returned non-zero exit status 1.
2025-05-22 17:24:21,892 - INFO - Buscando servidor libre para crear...
2025-05-22 17:24:21,892 - DEBUG - Verificando si existe el contenedor s1
2025-05-22 17:24:21,927 - DEBUG - Verificando si existe el contenedor s2
2025-05-22 17:24:21,944 - DEBUG - Verificando si existe el contenedor s3
2025-05-22 17:24:21,956 - INFO - Creando nuevo servidor disponible: s3
2025-05-22 17:24:21,957 - DEBUG - Intentando crear el contenedor s3
2025-05-22 17:24:43,553 - INFO - Contenedor s3 creado con éxito.
2025-05-22 17:24:43,553 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-22 17:24:43,712 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-22 17:24:43,713 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-22 17:24:43,806 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-22 17:24:43,806 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-22 17:24:43,806 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:24:43,806 - INFO - Número de servidores 2 cargados correctamente.
2025-05-22 17:24:43,807 - INFO - Solicitado arrancar servidor: s3
2025-05-22 17:24:43,821 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-22 17:24:44,423 - INFO - Contenedor iniciado: s3
2025-05-22 17:24:45,927 - INFO - Servidor s3 corriendo correctamente.
2025-05-22 17:24:46,017 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-22 17:24:46,017 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-22 17:24:46,106 - DEBUG - Validando archivo haproxy.cfg
2025-05-22 17:24:46,157 - DEBUG - Iniciando servicio de haproxy
2025-05-22 17:24:46,266 - INFO - Haproxy instalado y configurado correctamente.
2025-05-22 17:24:46,266 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-22 17:24:46,267 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-22 17:24:46,267 - INFO - Nuevo número de servidores: 3
2025-05-22 17:25:08,214 - INFO - Orden recibida: list
2025-05-22 17:25:08,214 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:25:08,215 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:25:08,215 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:25:08,215 - INFO - Listando contenedores
2025-05-22 17:25:08,257 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-22 17:25:16,195 - INFO - Orden recibida: start_server
2025-05-22 17:25:16,195 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:25:16,195 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:25:16,195 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:25:16,195 - INFO - Iniciando servidor individual: s1
2025-05-22 17:25:16,195 - INFO - Solicitado arrancar servidor: s1
2025-05-22 17:25:16,210 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-22 17:25:16,567 - INFO - Contenedor iniciado: s1
2025-05-22 17:25:17,829 - INFO - Servidor s1 corriendo correctamente.
2025-05-22 17:25:17,830 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-22 17:25:55,523 - INFO - Orden recibida: list
2025-05-22 17:25:55,524 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:25:55,524 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:25:55,524 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:25:55,524 - INFO - Listando contenedores
2025-05-22 17:25:55,556 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-22 17:28:33,811 - INFO - Orden recibida: stop_server
2025-05-22 17:28:33,812 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:28:33,812 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:28:33,812 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:28:33,812 - INFO - Deteniendo servidor individual: s1
2025-05-22 17:28:33,812 - INFO - Solicitado parar servidor: s1
2025-05-22 17:28:33,830 - DEBUG - Verificando estado antes de detener s1
2025-05-22 17:28:38,166 - INFO - Contenedor parado: s1
2025-05-22 17:28:38,252 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-22 17:28:38,252 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-22 17:28:38,295 - DEBUG - Validando archivo haproxy.cfg
2025-05-22 17:28:38,360 - DEBUG - Iniciando servicio de haproxy
2025-05-22 17:28:38,502 - INFO - Haproxy instalado y configurado correctamente.
2025-05-22 17:28:38,502 - INFO - Servidor s1 detenido correctamente.
2025-05-22 17:28:42,136 - INFO - Orden recibida: enlarge
2025-05-22 17:28:42,136 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:28:42,136 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:28:42,136 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-22 17:28:42,136 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-22 17:28:42,137 - DEBUG - Comprobando estado de s1...
2025-05-22 17:28:42,152 - INFO - Contenedor s1 ya está detenido.
2025-05-22 17:28:42,152 - DEBUG - Eliminando imagen previa con alias 'servidor' si existe
2025-05-22 17:28:42,302 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-22 17:31:00,621 - INFO - Imagen publicada correctamente.
2025-05-22 17:31:00,621 - INFO - Buscando servidor libre para crear...
2025-05-22 17:31:00,622 - DEBUG - Verificando si existe el contenedor s1
2025-05-22 17:31:00,642 - DEBUG - Verificando si existe el contenedor s2
2025-05-22 17:31:00,660 - DEBUG - Verificando si existe el contenedor s3
2025-05-22 17:31:00,679 - DEBUG - Verificando si existe el contenedor s4
2025-05-22 17:31:00,693 - INFO - Creando nuevo servidor disponible: s4
2025-05-22 17:31:00,693 - DEBUG - Intentando crear el contenedor s4
2025-05-22 17:31:22,996 - INFO - Contenedor s4 creado con éxito.
2025-05-22 17:31:22,996 - DEBUG - Conectando s4 al bridge lxdbr0 usando eth0
2025-05-22 17:31:23,223 - INFO - Conectado s4 al bridge lxdbr0 por eth0
2025-05-22 17:31:23,223 - DEBUG - Configurando red para s4: iface=eth0, ip=134.3.0.14
2025-05-22 17:31:23,432 - INFO - Contenedor s4 conectado a eth0 con IP 134.3.0.14
2025-05-22 17:31:23,432 - INFO - Servidor s4 creado correctamente con IP 134.3.0.14 
2025-05-22 17:31:23,432 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:31:23,433 - INFO - Número de servidores 3 cargados correctamente.
2025-05-22 17:31:23,433 - INFO - Solicitado arrancar servidor: s4
2025-05-22 17:31:23,482 - DEBUG - Iniciando verificación de estado del contenedor s4
2025-05-22 17:31:23,968 - INFO - Contenedor iniciado: s4
2025-05-22 17:31:25,290 - INFO - Servidor s4 corriendo correctamente.
2025-05-22 17:31:25,376 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-22 17:31:25,376 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-22 17:31:25,463 - DEBUG - Validando archivo haproxy.cfg
2025-05-22 17:31:25,723 - DEBUG - Iniciando servicio de haproxy
2025-05-22 17:31:25,852 - INFO - Haproxy instalado y configurado correctamente.
2025-05-22 17:31:25,853 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-22 17:31:25,854 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-22 17:31:25,854 - INFO - Nuevo número de servidores: 4
2025-05-22 17:32:22,504 - INFO - Orden recibida: list
2025-05-22 17:32:22,504 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:32:22,504 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:32:22,504 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:32:22,504 - INFO - Listando contenedores
2025-05-22 17:32:22,529 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-22 17:32:29,182 - INFO - Orden recibida: start_server
2025-05-22 17:32:29,182 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:32:29,182 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:32:29,182 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:32:29,183 - INFO - Iniciando servidor individual: s1
2025-05-22 17:32:29,183 - INFO - Solicitado arrancar servidor: s1
2025-05-22 17:32:29,197 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-22 17:32:29,529 - INFO - Contenedor iniciado: s1
2025-05-22 17:32:31,253 - INFO - Servidor s1 corriendo correctamente.
2025-05-22 17:32:31,254 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-22 17:34:21,569 - INFO - Orden recibida: configure_remote
2025-05-22 17:34:21,569 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:34:21,570 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:34:21,570 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:34:21,570 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-22 17:34:21,572 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es → IP: 138.4.31.22
2025-05-22 17:34:21,572 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:34:39,233 - INFO - Configurando bridge remoto
2025-05-22 17:34:39,486 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 17:43:01,471 - INFO - Orden recibida: configure_remote
2025-05-22 17:43:01,471 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:43:01,472 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:43:01,472 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:43:01,472 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-22 17:43:01,472 - INFO - IP local detectada: 138.4.31.23
2025-05-22 17:43:01,474 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es cuya IP: 138.4.31.22
2025-05-22 17:43:01,474 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:43:08,345 - INFO - Conectando al LXD remoto desde local
2025-05-22 17:43:08,620 - INFO - Configurando bridge remoto
2025-05-22 17:43:08,889 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'copy', 'db', 'remoto:db']' returned non-zero exit status 1.
2025-05-22 17:45:15,387 - INFO - Orden recibida: configure_remote
2025-05-22 17:45:15,387 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:45:15,389 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:45:15,389 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:45:15,390 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-22 17:45:15,390 - INFO - IP local detectada: 138.4.31.23
2025-05-22 17:45:15,392 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es cuya IP: 138.4.31.22
2025-05-22 17:45:15,392 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:45:22,697 - INFO - Conectando al LXD remoto desde local
2025-05-22 17:45:22,956 - INFO - Configurando bridge remoto
2025-05-22 17:46:15,706 - INFO - Orden recibida: configure_remote
2025-05-22 17:46:15,706 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:46:15,706 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:46:15,706 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:46:15,706 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-22 17:46:15,706 - INFO - IP local detectada: 138.4.31.23
2025-05-22 17:46:15,708 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es cuya IP: 138.4.31.22
2025-05-22 17:46:15,708 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-22 17:46:22,438 - INFO - Conectando al LXD remoto desde local
2025-05-22 17:46:22,697 - INFO - Configurando bridge remoto
2025-05-22 17:46:22,900 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-22 17:46:22,900 - DEBUG - Verificando estado antes de detener db
2025-05-22 17:46:39,431 - INFO - Contenedor parado: db
2025-05-22 17:47:42,927 - INFO - Base de datos copiada al equipo remoto
2025-05-22 17:47:42,927 - INFO - Configurando proxy para acceso a MongoDB
2025-05-22 17:47:43,035 - INFO - Base de datos remota desplegada correctamente
2025-05-22 17:51:03,590 - INFO - Orden recibida: list
2025-05-22 17:51:03,590 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-22 17:51:03,591 - INFO - Número de servidores 4 cargados correctamente.
2025-05-22 17:51:03,591 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-22 17:51:03,591 - INFO - Listando contenedores
2025-05-22 17:51:03,650 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-23 14:08:45,053 - INFO - Orden recibida: create
2025-05-23 14:08:45,053 - INFO - Número de servidores especificado: 1
2025-05-23 14:08:45,054 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-23 14:08:45,054 - DEBUG - Parámetro recibido n_servers=1
2025-05-23 14:08:45,054 - DEBUG - Creando imagen base...
2025-05-23 14:08:45,054 - DEBUG - Verificando si la imagen ya está importada...
2025-05-23 14:08:45,119 - WARNING - La imagen ubuntu2004 ya está disponible.
2025-05-23 14:08:45,119 - DEBUG - Configurando y creando bridges...
2025-05-23 14:08:45,191 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-23 14:08:45,285 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-23 14:08:45,286 - DEBUG - Creando bridge lxdbr1
2025-05-23 14:08:45,302 - WARNING - El bridge lxdbr1 ya existe.
2025-05-23 14:08:45,335 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-23 14:08:45,398 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-23 14:08:45,398 - DEBUG - Creando contenedores de servidores...
2025-05-23 14:08:45,399 - DEBUG - Intentando crear el contenedor s1
2025-05-23 14:08:45,415 - WARNING - El contenedor s1 ya existe.
2025-05-23 14:08:45,415 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 14:08:45,429 - WARNING - El contenedor s1 ya está conectado a lxdbr0 por eth0
2025-05-23 14:08:45,429 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 14:08:45,468 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-23 14:08:45,468 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-23 14:08:45,473 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-23 14:08:45,473 - INFO - Número de servidores guardados correctamente
2025-05-23 14:08:45,473 - DEBUG - Creando balanceador...
2025-05-23 14:08:45,473 - DEBUG - Intentando crear el contenedor lb
2025-05-23 14:08:45,491 - WARNING - El contenedor lb ya existe.
2025-05-23 14:08:45,491 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-23 14:08:45,506 - WARNING - El contenedor lb ya está conectado a lxdbr0 por eth0
2025-05-23 14:08:45,506 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-23 14:08:45,540 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-23 14:08:45,540 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-23 14:08:45,585 - WARNING - El contenedor lb ya está conectado a lxdbr1 por eth1
2025-05-23 14:08:45,585 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-23 14:08:45,616 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-23 14:08:45,616 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 14:08:45,634 - INFO - Contenedor lb ya está en ejecución.
2025-05-23 14:08:45,635 - DEBUG - Iniciando cambio de netplan en lb
2025-05-23 14:08:45,635 - DEBUG - Desactivando cloud-init en lb
2025-05-23 14:08:45,716 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-23 14:08:45,829 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-23 14:08:45,830 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-23 14:08:45,918 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-23 14:08:50,856 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-23 14:08:50,857 - DEBUG - Verificando estado antes de detener lb
2025-05-23 14:08:52,548 - INFO - Contenedor parado: lb
2025-05-23 14:08:52,548 - INFO - Balanceador configurado correctamente
2025-05-23 14:08:52,548 - DEBUG - Creando cliente...
2025-05-23 14:08:52,548 - DEBUG - Intentando crear el contenedor cl
2025-05-23 14:08:52,567 - WARNING - El contenedor cl ya existe.
2025-05-23 14:08:52,567 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-23 14:08:52,581 - WARNING - El contenedor cl ya está conectado a lxdbr1 por eth1
2025-05-23 14:08:52,581 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-23 14:08:52,616 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-23 14:08:52,616 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 14:08:52,631 - INFO - Contenedor cl ya está en ejecución.
2025-05-23 14:08:52,631 - DEBUG - Iniciando cambio de netplan en cl
2025-05-23 14:08:52,631 - DEBUG - Desactivando cloud-init en cl
2025-05-23 14:08:52,683 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-23 14:08:52,729 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-23 14:08:52,729 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-23 14:08:52,788 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-23 14:08:57,783 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-23 14:08:57,783 - DEBUG - Verificando estado antes de detener cl
2025-05-23 14:08:59,265 - INFO - Contenedor parado: cl
2025-05-23 14:08:59,265 - INFO - Cliente configurado correctamente
2025-05-23 14:08:59,265 - DEBUG - Intentando crear el contenedor db
2025-05-23 14:08:59,286 - WARNING - El contenedor db ya existe.
2025-05-23 14:08:59,286 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-23 14:08:59,301 - WARNING - El contenedor db ya está conectado a lxdbr0 por eth0
2025-05-23 14:08:59,301 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-23 14:08:59,334 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-23 14:08:59,334 - INFO - Infraestructura creada correctamente.
2025-05-23 14:09:05,731 - INFO - Orden recibida: start
2025-05-23 14:09:05,731 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:09:05,732 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:09:05,732 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:09:05,732 - INFO - Iniciando todos los contenedores
2025-05-23 14:09:05,732 - DEBUG - Arrancando servidor: s1
2025-05-23 14:09:05,732 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 14:09:05,775 - INFO - Contenedor s1 ya está en ejecución.
2025-05-23 14:09:05,832 - INFO - Reiniciando app en s1
2025-05-23 14:09:06,943 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 14:09:07,287 - INFO - Contenedor iniciado: cl
2025-05-23 14:09:07,287 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 14:09:07,697 - INFO - Contenedor iniciado: lb
2025-05-23 14:09:07,697 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 14:09:07,729 - INFO - Contenedor db ya está en ejecución.
2025-05-23 14:09:07,729 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 14:09:07,730 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 14:09:07,746 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 14:09:07,751 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 14:09:07,752 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 14:09:14,196 - INFO - Orden recibida: configure
2025-05-23 14:09:14,196 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:09:14,197 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:09:14,197 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:09:14,197 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:09:14,197 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:09:14,244 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:09:14,244 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:09:14,267 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 14:09:14,267 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 14:09:14,267 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 14:09:20,808 - DEBUG - Instalando MongoDB
2025-05-23 14:09:21,831 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 14:09:21,891 - DEBUG - Reiniciando contenedor db
2025-05-23 14:09:26,526 - INFO - MongoDB configurado con éxito en db
2025-05-23 14:09:26,527 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 14:09:26,527 - INFO - Configurando servidor web s1
2025-05-23 14:09:26,527 - INFO - Iniciando configuración del servidor web s1
2025-05-23 14:09:26,527 - DEBUG - Actualizando paquetes en s1
2025-05-23 14:09:34,909 - DEBUG - Instalando Apache en s1
2025-05-23 14:10:00,503 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 14:10:00,676 - DEBUG - Transfiriendo aplicación web
2025-05-23 14:10:00,737 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 14:10:01,263 - DEBUG - Ejecutando instalación Node.js
2025-05-23 14:10:41,874 - DEBUG - Reiniciando servidor
2025-05-23 14:10:46,565 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 14:10:47,319 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 14:10:47,319 - INFO - Configurando balanceador lb
2025-05-23 14:10:47,319 - INFO - Instalando haproxy en el balanceador
2025-05-23 14:10:56,783 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 14:10:56,784 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 14:10:56,840 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 14:10:56,931 - DEBUG - Iniciando servicio de haproxy
2025-05-23 14:10:57,098 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 14:10:57,098 - INFO - Balanceador configurado correctamente.
2025-05-23 14:43:04,085 - INFO - Orden recibida: create
2025-05-23 14:43:04,085 - INFO - Número de servidores especificado: 1
2025-05-23 14:43:04,085 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-23 14:43:04,085 - DEBUG - Parámetro recibido n_servers=1
2025-05-23 14:43:04,085 - DEBUG - Creando imagen base...
2025-05-23 14:43:04,085 - DEBUG - Verificando si la imagen ya está importada...
2025-05-23 14:43:05,397 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-23 14:43:11,120 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-23 14:43:11,120 - DEBUG - Configurando y creando bridges...
2025-05-23 14:43:12,008 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-23 14:43:15,404 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-23 14:43:15,404 - DEBUG - Creando bridge lxdbr1
2025-05-23 14:43:17,025 - INFO - Bridge creado: lxdbr1
2025-05-23 14:43:17,889 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-23 14:43:21,325 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-23 14:43:21,325 - DEBUG - Creando contenedores de servidores...
2025-05-23 14:43:21,325 - DEBUG - Intentando crear el contenedor s1
2025-05-23 14:43:30,920 - INFO - Contenedor s1 creado con éxito.
2025-05-23 14:43:30,921 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 14:43:30,972 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-23 14:43:30,972 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 14:43:31,003 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-23 14:43:31,004 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-23 14:43:31,005 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-23 14:43:31,005 - INFO - Número de servidores guardados correctamente
2025-05-23 14:43:31,005 - DEBUG - Creando balanceador...
2025-05-23 14:43:31,005 - DEBUG - Intentando crear el contenedor lb
2025-05-23 14:43:40,917 - INFO - Contenedor lb creado con éxito.
2025-05-23 14:43:40,917 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-23 14:43:40,968 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-23 14:43:40,969 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-23 14:43:40,999 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-23 14:43:40,999 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-23 14:43:41,046 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-23 14:43:41,046 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-23 14:43:41,075 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-23 14:43:41,075 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 14:43:41,504 - INFO - Contenedor iniciado: lb
2025-05-23 14:43:41,505 - DEBUG - Iniciando cambio de netplan en lb
2025-05-23 14:43:41,505 - DEBUG - Desactivando cloud-init en lb
2025-05-23 14:43:41,658 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-23 14:43:41,738 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-23 14:43:41,738 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-23 14:43:41,798 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-23 14:43:44,090 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-23 14:43:44,090 - DEBUG - Verificando estado antes de detener lb
2025-05-23 14:43:45,524 - INFO - Contenedor parado: lb
2025-05-23 14:43:45,525 - INFO - Balanceador configurado correctamente
2025-05-23 14:43:45,525 - DEBUG - Creando cliente...
2025-05-23 14:43:45,525 - DEBUG - Intentando crear el contenedor cl
2025-05-23 14:43:55,229 - INFO - Contenedor cl creado con éxito.
2025-05-23 14:43:55,229 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-23 14:43:55,275 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-23 14:43:55,275 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-23 14:43:55,306 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-23 14:43:55,306 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 14:43:55,728 - INFO - Contenedor iniciado: cl
2025-05-23 14:43:55,728 - DEBUG - Iniciando cambio de netplan en cl
2025-05-23 14:43:55,728 - DEBUG - Desactivando cloud-init en cl
2025-05-23 14:43:55,873 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-23 14:43:55,955 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-23 14:43:55,955 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-23 14:43:56,006 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-23 14:43:57,899 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-23 14:43:57,899 - DEBUG - Verificando estado antes de detener cl
2025-05-23 14:43:59,331 - INFO - Contenedor parado: cl
2025-05-23 14:43:59,331 - INFO - Cliente configurado correctamente
2025-05-23 14:43:59,331 - DEBUG - Intentando crear el contenedor db
2025-05-23 14:44:09,012 - INFO - Contenedor db creado con éxito.
2025-05-23 14:44:09,012 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-23 14:44:09,058 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-23 14:44:09,058 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-23 14:44:09,090 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-23 14:44:09,090 - INFO - Infraestructura creada correctamente.
2025-05-23 14:44:14,604 - INFO - Orden recibida: start
2025-05-23 14:44:14,604 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:44:14,605 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:44:14,605 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:44:14,605 - INFO - Iniciando todos los contenedores
2025-05-23 14:44:14,605 - DEBUG - Arrancando servidor: s1
2025-05-23 14:44:14,605 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 14:44:14,963 - INFO - Contenedor iniciado: s1
2025-05-23 14:44:15,007 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-23 14:44:15,007 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 14:44:15,502 - INFO - Contenedor iniciado: cl
2025-05-23 14:44:15,503 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 14:44:15,906 - INFO - Contenedor iniciado: lb
2025-05-23 14:44:15,906 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 14:44:16,350 - INFO - Contenedor iniciado: db
2025-05-23 14:44:16,350 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 14:44:16,355 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 14:44:16,357 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 14:44:16,360 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 14:44:16,362 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 14:44:19,813 - INFO - Orden recibida: start
2025-05-23 14:44:19,813 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:44:19,813 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:44:19,813 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:44:19,813 - INFO - Iniciando todos los contenedores
2025-05-23 14:44:19,813 - DEBUG - Arrancando servidor: s1
2025-05-23 14:44:19,813 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 14:44:19,834 - INFO - Contenedor s1 ya está en ejecución.
2025-05-23 14:44:19,909 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-23 14:44:19,909 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 14:44:19,928 - INFO - Contenedor cl ya está en ejecución.
2025-05-23 14:44:19,928 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 14:44:19,949 - INFO - Contenedor lb ya está en ejecución.
2025-05-23 14:44:19,949 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 14:44:19,978 - INFO - Contenedor db ya está en ejecución.
2025-05-23 14:44:19,979 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 14:44:19,979 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 14:44:19,990 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 14:44:20,002 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 14:44:20,022 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 14:44:33,058 - INFO - Orden recibida: configure
2025-05-23 14:44:33,058 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:44:33,058 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:44:33,058 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:44:33,058 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:44:33,059 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:44:33,072 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:44:33,072 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:44:33,086 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 14:44:33,086 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 14:44:33,087 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 14:44:52,438 - DEBUG - Instalando MongoDB
2025-05-23 14:45:33,181 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 14:45:33,228 - DEBUG - Reiniciando contenedor db
2025-05-23 14:45:37,591 - INFO - MongoDB configurado con éxito en db
2025-05-23 14:45:37,592 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 14:45:37,592 - INFO - Configurando servidor web s1
2025-05-23 14:45:37,592 - INFO - Iniciando configuración del servidor web s1
2025-05-23 14:45:37,592 - DEBUG - Actualizando paquetes en s1
2025-05-23 14:45:50,516 - DEBUG - Instalando Apache en s1
2025-05-23 14:46:18,211 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 14:46:18,285 - DEBUG - Transfiriendo aplicación web
2025-05-23 14:46:18,299 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 14:46:18,365 - DEBUG - Ejecutando instalación Node.js
2025-05-23 14:48:37,104 - DEBUG - Reiniciando servidor
2025-05-23 14:48:41,639 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 14:48:42,517 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 14:48:42,517 - INFO - Configurando balanceador lb
2025-05-23 14:48:42,517 - INFO - Instalando haproxy en el balanceador
2025-05-23 14:49:07,872 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 14:49:07,872 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 14:49:07,913 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 14:49:07,958 - DEBUG - Iniciando servicio de haproxy
2025-05-23 14:49:08,078 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 14:49:08,078 - INFO - Balanceador configurado correctamente.
2025-05-23 14:50:34,496 - INFO - Orden recibida: enlarge
2025-05-23 14:50:34,497 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:50:34,497 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:50:34,497 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 14:50:34,498 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 14:50:34,498 - DEBUG - Comprobando estado de s1...
2025-05-23 14:50:34,516 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 14:50:34,516 - DEBUG - Verificando estado antes de detener s1
2025-05-23 14:50:38,728 - INFO - Contenedor parado: s1
2025-05-23 14:50:38,728 - DEBUG - Eliminando imagen previa con alias 'servidor' si existe
2025-05-23 14:50:38,740 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-23 14:52:28,270 - INFO - Imagen publicada correctamente.
2025-05-23 14:52:28,271 - INFO - Buscando servidor libre para crear...
2025-05-23 14:52:28,271 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 14:52:28,309 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 14:52:28,323 - INFO - Creando nuevo servidor disponible: s2
2025-05-23 14:52:28,323 - DEBUG - Intentando crear el contenedor s2
2025-05-23 14:52:49,939 - INFO - Contenedor s2 creado con éxito.
2025-05-23 14:52:49,939 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 14:52:50,210 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 14:52:50,211 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 14:52:50,306 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 14:52:50,306 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-23 14:52:50,306 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:52:50,308 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 14:52:50,308 - INFO - Solicitado arrancar servidor: s2
2025-05-23 14:52:50,322 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 14:52:50,951 - INFO - Contenedor iniciado: s2
2025-05-23 14:52:54,748 - INFO - Servidor s2 corriendo correctamente.
2025-05-23 14:52:54,822 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 14:52:54,822 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 14:52:55,125 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 14:52:57,541 - DEBUG - Iniciando servicio de haproxy
2025-05-23 14:52:59,418 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 14:52:59,418 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-23 14:52:59,420 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-23 14:52:59,420 - INFO - Nuevo número de servidores: 2
2025-05-23 14:58:15,778 - INFO - Orden recibida: enlarge
2025-05-23 14:58:15,778 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 14:58:15,779 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 14:58:15,779 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 14:58:15,779 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 14:58:15,779 - DEBUG - Comprobando estado de s1...
2025-05-23 14:58:15,808 - INFO - Contenedor s1 ya está detenido.
2025-05-23 14:58:15,809 - DEBUG - Eliminando imagen previa con alias 'servidor' si existe
2025-05-23 14:58:15,966 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-23 15:00:09,361 - INFO - Imagen publicada correctamente.
2025-05-23 15:00:09,361 - INFO - Buscando servidor libre para crear...
2025-05-23 15:00:09,361 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 15:00:09,381 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 15:00:09,396 - DEBUG - Verificando si existe el contenedor s3
2025-05-23 15:00:09,406 - INFO - Creando nuevo servidor disponible: s3
2025-05-23 15:00:09,406 - DEBUG - Intentando crear el contenedor s3
2025-05-23 15:00:30,776 - INFO - Contenedor s3 creado con éxito.
2025-05-23 15:00:30,776 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-23 15:00:30,868 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-23 15:00:30,868 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-23 15:00:30,895 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-23 15:00:30,895 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-23 15:00:30,895 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:00:30,896 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 15:00:30,896 - INFO - Solicitado arrancar servidor: s3
2025-05-23 15:00:30,914 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-23 15:00:31,216 - INFO - Contenedor iniciado: s3
2025-05-23 15:00:34,091 - INFO - Servidor s3 corriendo correctamente.
2025-05-23 15:00:34,091 - INFO - Solicitado arrancar servidor: s1
2025-05-23 15:00:34,111 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 15:00:34,526 - INFO - Contenedor iniciado: s1
2025-05-23 15:00:38,635 - INFO - Servidor s1 corriendo correctamente.
2025-05-23 15:00:38,729 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 15:00:38,729 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 15:00:38,816 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 15:00:38,870 - DEBUG - Iniciando servicio de haproxy
2025-05-23 15:00:39,002 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 15:00:39,002 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-23 15:00:39,004 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-23 15:00:39,004 - INFO - Nuevo número de servidores: 3
2025-05-23 15:07:27,829 - INFO - Orden recibida: enlarge
2025-05-23 15:07:27,829 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:07:27,830 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 15:07:27,830 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 15:07:27,830 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 15:07:27,830 - DEBUG - Comprobando estado de s1...
2025-05-23 15:07:27,846 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 15:07:27,846 - DEBUG - Verificando estado antes de detener s1
2025-05-23 15:07:32,081 - INFO - Contenedor parado: s1
2025-05-23 15:07:32,081 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 15:07:32,094 - INFO - La imagen servidor ya está disponible.
2025-05-23 15:07:32,094 - INFO - Buscando servidor libre para crear...
2025-05-23 15:07:32,094 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 15:07:32,111 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 15:07:32,131 - DEBUG - Verificando si existe el contenedor s3
2025-05-23 15:07:32,154 - DEBUG - Verificando si existe el contenedor s4
2025-05-23 15:07:32,166 - INFO - Creando nuevo servidor disponible: s4
2025-05-23 15:07:32,166 - DEBUG - Intentando crear el contenedor s4
2025-05-23 15:07:56,068 - INFO - Contenedor s4 creado con éxito.
2025-05-23 15:07:56,068 - DEBUG - Conectando s4 al bridge lxdbr0 usando eth0
2025-05-23 15:07:56,164 - INFO - Conectado s4 al bridge lxdbr0 por eth0
2025-05-23 15:07:56,164 - DEBUG - Configurando red para s4: iface=eth0, ip=134.3.0.14
2025-05-23 15:07:56,205 - INFO - Contenedor s4 conectado a eth0 con IP 134.3.0.14
2025-05-23 15:07:56,205 - INFO - Servidor s4 creado correctamente con IP 134.3.0.14 
2025-05-23 15:07:56,205 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:07:56,205 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 15:07:56,205 - INFO - Solicitado arrancar servidor: s4
2025-05-23 15:07:56,221 - DEBUG - Iniciando verificación de estado del contenedor s4
2025-05-23 15:07:56,528 - INFO - Contenedor iniciado: s4
2025-05-23 15:08:00,015 - INFO - Servidor s4 corriendo correctamente.
2025-05-23 15:08:00,015 - INFO - Solicitado arrancar servidor: s1
2025-05-23 15:08:00,031 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 15:08:00,452 - INFO - Contenedor iniciado: s1
2025-05-23 15:08:05,625 - INFO - Servidor s1 corriendo correctamente.
2025-05-23 15:08:05,732 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 15:08:05,732 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 15:08:06,186 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 15:08:06,356 - DEBUG - Iniciando servicio de haproxy
2025-05-23 15:08:06,567 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 15:08:06,567 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-23 15:08:06,578 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-23 15:08:06,578 - INFO - Nuevo número de servidores: 4
2025-05-23 15:09:48,920 - INFO - Orden recibida: configure_remote
2025-05-23 15:09:48,920 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:09:48,921 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:09:48,921 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:09:48,921 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-23 15:09:59,544 - INFO - Orden recibida: configure_remote
2025-05-23 15:09:59,544 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:09:59,544 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:09:59,544 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:09:59,544 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-23 15:09:59,548 - INFO - IP local detectada: 138.4.31.24
2025-05-23 15:09:59,554 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-23 15:12:09,735 - INFO - Orden recibida: configure_remote
2025-05-23 15:12:09,735 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:12:09,736 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:12:09,736 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:12:09,736 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-23 15:12:09,736 - INFO - IP local detectada: 138.4.31.24
2025-05-23 15:12:09,739 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-23 15:12:28,688 - INFO - Orden recibida: configure_remote
2025-05-23 15:12:28,688 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:12:28,688 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:12:28,689 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:12:28,689 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-23 15:12:28,689 - INFO - IP local detectada: 138.4.31.24
2025-05-23 15:12:28,691 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-23 15:12:28,691 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 15:12:31,799 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.25', 'lxc config set core.https_address 138.4.31.25:8443']' returned non-zero exit status 255.
2025-05-23 15:12:31,799 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:12:31,799 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:13:11,137 - INFO - Orden recibida: configure_remote
2025-05-23 15:13:11,137 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:13:11,138 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:13:11,138 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:13:11,138 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-23 15:13:11,138 - INFO - IP local detectada: 138.4.31.24
2025-05-23 15:13:11,140 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-23 15:13:11,140 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 15:13:14,233 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.25', 'lxc config set core.https_address 138.4.31.25:8443']' returned non-zero exit status 255.
2025-05-23 15:13:14,233 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:13:14,233 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:13:14,233 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.25...
2025-05-23 15:13:14,316 - ERROR - Error al cambiar la IP en los archivos del contenedor s1: Command '['lxc', 'exec', 's1', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/p2.2/practica2_arso/utils/server_web.py", line 88, in change_ip_files
    subprocess.run(["lxc", "exec", name, "--", "sed", "-i", f"s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})$/await mongoose.connect('mongodb:/{ip}//bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})", "/app/rest_server.js"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 's1', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
2025-05-23 15:13:14,325 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.25...
2025-05-23 15:13:14,425 - ERROR - Error al cambiar la IP en los archivos del contenedor s2: Command '['lxc', 'exec', 's2', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/p2.2/practica2_arso/utils/server_web.py", line 88, in change_ip_files
    subprocess.run(["lxc", "exec", name, "--", "sed", "-i", f"s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})$/await mongoose.connect('mongodb:/{ip}//bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})", "/app/rest_server.js"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 's2', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
2025-05-23 15:13:14,426 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.25...
2025-05-23 15:13:14,490 - ERROR - Error al cambiar la IP en los archivos del contenedor s3: Command '['lxc', 'exec', 's3', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/p2.2/practica2_arso/utils/server_web.py", line 88, in change_ip_files
    subprocess.run(["lxc", "exec", name, "--", "sed", "-i", f"s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})$/await mongoose.connect('mongodb:/{ip}//bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})", "/app/rest_server.js"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 's3', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
2025-05-23 15:13:14,490 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s4 a 138.4.31.25...
2025-05-23 15:13:14,535 - ERROR - Error al cambiar la IP en los archivos del contenedor s4: Command '['lxc', 'exec', 's4', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/home/enrique.galindo/arso/p2.2/practica2_arso/utils/server_web.py", line 88, in change_ip_files
    subprocess.run(["lxc", "exec", name, "--", "sed", "-i", f"s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})$/await mongoose.connect('mongodb:/{ip}//bio_bbdd',{{ useNewUrlParser: true, useUnifiedTopology: true }})", "/app/rest_server.js"], check=True)
  File "/usr/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['lxc', 'exec', 's4', '--', 'sed', '-i', "s/^await mongoose.connect('mongodb://134.3.0.20/bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })$/await mongoose.connect('mongodb:/138.4.31.25//bio_bbdd',{ useNewUrlParser: true, useUnifiedTopology: true })", '/app/rest_server.js']' returned non-zero exit status 1.
2025-05-23 15:14:53,479 - INFO - Orden recibida: configure_remote
2025-05-23 15:14:53,479 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:14:53,479 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:14:53,479 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:14:53,479 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-23 15:14:53,480 - INFO - IP local detectada: 138.4.31.24
2025-05-23 15:14:53,482 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-23 15:14:53,482 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 15:14:56,570 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.25', 'lxc config set core.https_address 138.4.31.25:8443']' returned non-zero exit status 255.
2025-05-23 15:14:56,571 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:14:56,571 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:14:56,571 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.25...
2025-05-23 15:14:56,695 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 15:14:56,695 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.25...
2025-05-23 15:14:56,781 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 15:14:56,781 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.25...
2025-05-23 15:14:56,890 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 15:14:56,891 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s4 a 138.4.31.25...
2025-05-23 15:14:56,995 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 15:15:31,715 - INFO - Orden recibida: enlarge
2025-05-23 15:15:31,715 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:15:31,716 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:15:31,716 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 15:15:31,716 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 15:15:31,716 - DEBUG - Comprobando estado de s1...
2025-05-23 15:15:31,738 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 15:15:31,738 - DEBUG - Verificando estado antes de detener s1
2025-05-23 15:15:35,904 - INFO - Contenedor parado: s1
2025-05-23 15:15:35,904 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 15:15:35,920 - INFO - La imagen servidor ya está disponible.
2025-05-23 15:15:35,920 - INFO - Buscando servidor libre para crear...
2025-05-23 15:15:35,921 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 15:15:35,942 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 15:15:35,961 - DEBUG - Verificando si existe el contenedor s3
2025-05-23 15:15:35,984 - DEBUG - Verificando si existe el contenedor s4
2025-05-23 15:15:36,002 - DEBUG - Verificando si existe el contenedor s5
2025-05-23 15:15:36,013 - INFO - Creando nuevo servidor disponible: s5
2025-05-23 15:15:36,013 - DEBUG - Intentando crear el contenedor s5
2025-05-23 15:15:58,443 - INFO - Contenedor s5 creado con éxito.
2025-05-23 15:15:58,443 - DEBUG - Conectando s5 al bridge lxdbr0 usando eth0
2025-05-23 15:15:58,683 - INFO - Conectado s5 al bridge lxdbr0 por eth0
2025-05-23 15:15:58,683 - DEBUG - Configurando red para s5: iface=eth0, ip=134.3.0.15
2025-05-23 15:15:58,986 - INFO - Contenedor s5 conectado a eth0 con IP 134.3.0.15
2025-05-23 15:15:58,986 - INFO - Servidor s5 creado correctamente con IP 134.3.0.15 
2025-05-23 15:15:58,987 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 15:15:58,988 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 15:15:58,988 - INFO - Solicitado arrancar servidor: s5
2025-05-23 15:15:59,017 - DEBUG - Iniciando verificación de estado del contenedor s5
2025-05-23 15:15:59,400 - INFO - Contenedor iniciado: s5
2025-05-23 15:16:04,075 - INFO - Servidor s5 corriendo correctamente.
2025-05-23 15:16:04,076 - INFO - Solicitado arrancar servidor: s1
2025-05-23 15:16:04,098 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 15:16:04,462 - INFO - Contenedor iniciado: s1
2025-05-23 15:16:09,269 - INFO - Servidor s1 corriendo correctamente.
2025-05-23 15:16:09,363 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 15:16:09,363 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 15:16:09,656 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 15:16:09,868 - DEBUG - Iniciando servicio de haproxy
2025-05-23 15:16:10,587 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 15:16:10,587 - DEBUG - Intentando guardar el número de servidores: 5
2025-05-23 15:16:10,589 - INFO - Número de servidores 5 guardados correctamente en static/files/num_serves.txt.
2025-05-23 15:16:10,589 - INFO - Nuevo número de servidores: 5
2025-05-23 17:53:35,642 - INFO - Orden recibida: create
2025-05-23 17:53:35,642 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-23 17:53:35,643 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-23 17:53:35,643 - DEBUG - Parámetro recibido n_servers=2
2025-05-23 17:53:35,643 - DEBUG - Creando imagen base...
2025-05-23 17:53:35,643 - DEBUG - Verificando si la imagen ya está importada...
2025-05-23 17:53:35,662 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-23 17:53:41,341 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-23 17:53:41,341 - DEBUG - Configurando y creando bridges...
2025-05-23 17:53:42,184 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-23 17:53:45,538 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-23 17:53:45,538 - DEBUG - Creando bridge lxdbr1
2025-05-23 17:53:47,157 - INFO - Bridge creado: lxdbr1
2025-05-23 17:53:48,014 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-23 17:53:51,441 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-23 17:53:51,441 - DEBUG - Creando contenedores de servidores...
2025-05-23 17:53:51,441 - DEBUG - Intentando crear el contenedor s1
2025-05-23 17:54:01,135 - INFO - Contenedor s1 creado con éxito.
2025-05-23 17:54:01,135 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 17:54:01,185 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-23 17:54:01,185 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 17:54:01,217 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-23 17:54:01,217 - DEBUG - Intentando crear el contenedor s2
2025-05-23 17:54:11,093 - INFO - Contenedor s2 creado con éxito.
2025-05-23 17:54:11,093 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 17:54:11,166 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 17:54:11,166 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 17:54:11,198 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 17:54:11,198 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-23 17:54:11,204 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-23 17:54:11,205 - INFO - Número de servidores guardados correctamente
2025-05-23 17:54:11,205 - DEBUG - Creando balanceador...
2025-05-23 17:54:11,205 - DEBUG - Intentando crear el contenedor lb
2025-05-23 17:54:21,091 - INFO - Contenedor lb creado con éxito.
2025-05-23 17:54:21,091 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-23 17:54:21,138 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-23 17:54:21,138 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-23 17:54:21,167 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-23 17:54:21,167 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-23 17:54:21,211 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-23 17:54:21,211 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-23 17:54:21,239 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-23 17:54:21,239 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 17:54:21,651 - INFO - Contenedor iniciado: lb
2025-05-23 17:54:21,651 - DEBUG - Iniciando cambio de netplan en lb
2025-05-23 17:54:21,651 - DEBUG - Desactivando cloud-init en lb
2025-05-23 17:54:21,785 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-23 17:54:21,846 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-23 17:54:21,846 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-23 17:54:21,892 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-23 17:54:23,860 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-23 17:54:23,860 - DEBUG - Verificando estado antes de detener lb
2025-05-23 17:54:25,267 - INFO - Contenedor parado: lb
2025-05-23 17:54:25,267 - INFO - Balanceador configurado correctamente
2025-05-23 17:54:25,267 - DEBUG - Creando cliente...
2025-05-23 17:54:25,267 - DEBUG - Intentando crear el contenedor cl
2025-05-23 17:54:34,844 - INFO - Contenedor cl creado con éxito.
2025-05-23 17:54:34,844 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-23 17:54:34,909 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-23 17:54:34,910 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-23 17:54:34,994 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-23 17:54:34,994 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 17:54:35,514 - INFO - Contenedor iniciado: cl
2025-05-23 17:54:35,514 - DEBUG - Iniciando cambio de netplan en cl
2025-05-23 17:54:35,514 - DEBUG - Desactivando cloud-init en cl
2025-05-23 17:54:35,577 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-23 17:54:35,633 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-23 17:54:35,633 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-23 17:54:36,147 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-23 17:54:40,743 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-23 17:54:40,743 - DEBUG - Verificando estado antes de detener cl
2025-05-23 17:54:42,175 - INFO - Contenedor parado: cl
2025-05-23 17:54:42,175 - INFO - Cliente configurado correctamente
2025-05-23 17:54:42,175 - DEBUG - Intentando crear el contenedor db
2025-05-23 17:54:51,965 - INFO - Contenedor db creado con éxito.
2025-05-23 17:54:51,965 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-23 17:54:52,028 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-23 17:54:52,028 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-23 17:54:52,069 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-23 17:54:52,070 - INFO - Infraestructura creada correctamente.
2025-05-23 17:55:25,333 - INFO - Orden recibida: configure
2025-05-23 17:55:25,333 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:25,334 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:25,334 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 17:55:25,334 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:25,334 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:25,349 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:25,349 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:25,361 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-23 17:55:25,361 - WARNING - El contenedor db no está en estado RUNNING
2025-05-23 17:55:25,361 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-23 17:55:25,361 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-23 17:55:25,361 - WARNING - El contenedor s2 no está en estado RUNNING
2025-05-23 17:55:25,362 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-23 17:55:33,047 - INFO - Orden recibida: start
2025-05-23 17:55:33,047 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:33,047 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:33,047 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 17:55:33,047 - INFO - Iniciando todos los contenedores
2025-05-23 17:55:33,047 - DEBUG - Arrancando servidor: s1
2025-05-23 17:55:33,047 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 17:55:33,334 - INFO - Contenedor iniciado: s1
2025-05-23 17:55:33,377 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-23 17:55:33,377 - DEBUG - Arrancando servidor: s2
2025-05-23 17:55:33,377 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 17:55:33,629 - INFO - Contenedor iniciado: s2
2025-05-23 17:55:33,688 - DEBUG - No se encontró la app en s2, no se reinicia.
2025-05-23 17:55:33,688 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 17:55:34,115 - INFO - Contenedor iniciado: cl
2025-05-23 17:55:34,115 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 17:55:34,591 - INFO - Contenedor iniciado: lb
2025-05-23 17:55:34,591 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 17:55:35,140 - INFO - Contenedor iniciado: db
2025-05-23 17:55:35,141 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 17:55:35,146 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 17:55:35,150 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-23 17:55:35,164 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 17:55:35,176 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 17:55:35,187 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 17:55:39,172 - INFO - Orden recibida: configure
2025-05-23 17:55:39,172 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:39,172 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:39,173 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 17:55:39,173 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:39,173 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:39,219 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 17:55:39,220 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 17:55:39,279 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 17:55:39,279 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 17:55:39,279 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 17:55:59,780 - DEBUG - Instalando MongoDB
2025-05-23 17:57:07,055 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 17:57:07,210 - DEBUG - Reiniciando contenedor db
2025-05-23 17:58:38,795 - INFO - MongoDB configurado con éxito en db
2025-05-23 17:58:38,795 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 17:58:38,796 - INFO - Configurando servidor web s1
2025-05-23 17:58:38,796 - INFO - Iniciando configuración del servidor web s1
2025-05-23 17:58:38,796 - DEBUG - Actualizando paquetes en s1
2025-05-23 17:58:55,461 - DEBUG - Instalando Apache en s1
2025-05-23 17:59:23,128 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 17:59:23,381 - DEBUG - Transfiriendo aplicación web
2025-05-23 17:59:23,397 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 17:59:23,544 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:01:49,336 - DEBUG - Reiniciando servidor
2025-05-23 18:02:03,631 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:02:04,541 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 18:02:04,541 - INFO - Configurando servidor web s2
2025-05-23 18:02:04,541 - INFO - Iniciando configuración del servidor web s2
2025-05-23 18:02:04,541 - DEBUG - Actualizando paquetes en s2
2025-05-23 18:02:26,923 - DEBUG - Instalando Apache en s2
2025-05-23 18:03:02,789 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 18:03:02,922 - DEBUG - Transfiriendo aplicación web
2025-05-23 18:03:02,946 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 18:03:03,185 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:05:34,629 - DEBUG - Reiniciando servidor
2025-05-23 18:05:39,156 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:05:39,776 - INFO - Servidor web s2 configurado con éxito.
2025-05-23 18:05:39,776 - INFO - Configurando balanceador lb
2025-05-23 18:05:39,776 - INFO - Instalando haproxy en el balanceador
2025-05-23 18:09:46,268 - CRITICAL - Error en instalación de haproxy: Command '['lxc', 'exec', 'lb', '--', 'apt', 'install', '-y', 'haproxy']' returned non-zero exit status 130.
2025-05-23 18:09:46,400 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 18:09:46,400 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 18:09:51,523 - INFO - Orden recibida: list
2025-05-23 18:09:51,523 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:09:51,524 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:09:51,524 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:09:51,524 - INFO - Listando contenedores
2025-05-23 18:09:51,559 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-23 18:09:57,719 - INFO - Orden recibida: delete
2025-05-23 18:09:57,719 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:09:57,719 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:09:57,719 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:09:57,719 - INFO - Eliminando toda la infraestructura
2025-05-23 18:09:57,719 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-23 18:09:57,839 - INFO - Imagen local eliminada con éxito.
2025-05-23 18:09:57,840 - DEBUG - Eliminando contenedor s1
2025-05-23 18:10:00,915 - INFO - Contenedor eliminado: s1
2025-05-23 18:10:00,916 - DEBUG - Eliminando contenedor s2
2025-05-23 18:10:05,044 - INFO - Contenedor eliminado: s2
2025-05-23 18:10:05,045 - DEBUG - Eliminando contenedor cl
2025-05-23 18:10:07,187 - INFO - Contenedor eliminado: cl
2025-05-23 18:10:07,187 - DEBUG - Eliminando contenedor lb
2025-05-23 18:10:09,561 - INFO - Contenedor eliminado: lb
2025-05-23 18:10:09,561 - DEBUG - Eliminando contenedor db
2025-05-23 18:10:11,620 - INFO - Contenedor eliminado: db
2025-05-23 18:10:11,620 - DEBUG - Contenedores eliminados correctamente
2025-05-23 18:10:11,620 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-23 18:10:11,991 - INFO - Bridge eliminado: lxdbr1
2025-05-23 18:10:11,991 - INFO - Eliminación completada.
2025-05-23 18:10:16,701 - INFO - Orden recibida: configure
2025-05-23 18:10:16,701 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:10:16,701 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:10:16,701 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:10:16,701 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:10:16,701 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:10:16,713 - WARNING - Contenedor faltante: cl
2025-05-23 18:10:16,713 - ERROR - Primero debes hacer un create. La infraestructura no está creada correctamente.
2025-05-23 18:10:20,196 - INFO - Orden recibida: create
2025-05-23 18:10:20,197 - INFO - No se especificó número de servidores. Se usará el valor por defecto: 2
2025-05-23 18:10:20,197 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-23 18:10:20,197 - DEBUG - Parámetro recibido n_servers=2
2025-05-23 18:10:20,197 - DEBUG - Creando imagen base...
2025-05-23 18:10:20,197 - DEBUG - Verificando si la imagen ya está importada...
2025-05-23 18:10:20,209 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-23 18:10:25,549 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-23 18:10:25,549 - DEBUG - Configurando y creando bridges...
2025-05-23 18:10:25,577 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-23 18:10:25,643 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-23 18:10:25,643 - DEBUG - Creando bridge lxdbr1
2025-05-23 18:10:27,265 - INFO - Bridge creado: lxdbr1
2025-05-23 18:10:28,127 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-23 18:10:31,448 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-23 18:10:31,448 - DEBUG - Creando contenedores de servidores...
2025-05-23 18:10:31,448 - DEBUG - Intentando crear el contenedor s1
2025-05-23 18:10:41,179 - INFO - Contenedor s1 creado con éxito.
2025-05-23 18:10:41,179 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 18:10:41,228 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-23 18:10:41,228 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 18:10:41,262 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-23 18:10:41,262 - DEBUG - Intentando crear el contenedor s2
2025-05-23 18:10:51,295 - INFO - Contenedor s2 creado con éxito.
2025-05-23 18:10:51,295 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 18:10:51,362 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 18:10:51,362 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 18:10:51,394 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 18:10:51,394 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-23 18:10:51,395 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-23 18:10:51,396 - INFO - Número de servidores guardados correctamente
2025-05-23 18:10:51,396 - DEBUG - Creando balanceador...
2025-05-23 18:10:51,396 - DEBUG - Intentando crear el contenedor lb
2025-05-23 18:11:01,790 - INFO - Contenedor lb creado con éxito.
2025-05-23 18:11:01,790 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-23 18:11:02,373 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-23 18:11:02,373 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-23 18:11:02,517 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-23 18:11:02,517 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-23 18:11:02,757 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-23 18:11:02,757 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-23 18:11:02,934 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-23 18:11:02,934 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 18:11:03,473 - INFO - Contenedor iniciado: lb
2025-05-23 18:11:03,474 - DEBUG - Iniciando cambio de netplan en lb
2025-05-23 18:11:03,474 - DEBUG - Desactivando cloud-init en lb
2025-05-23 18:11:03,613 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-23 18:11:03,644 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-23 18:11:03,644 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-23 18:11:03,714 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-23 18:11:08,058 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-23 18:11:08,058 - DEBUG - Verificando estado antes de detener lb
2025-05-23 18:11:09,438 - INFO - Contenedor parado: lb
2025-05-23 18:11:09,438 - INFO - Balanceador configurado correctamente
2025-05-23 18:11:09,438 - DEBUG - Creando cliente...
2025-05-23 18:11:09,438 - DEBUG - Intentando crear el contenedor cl
2025-05-23 18:11:19,010 - INFO - Contenedor cl creado con éxito.
2025-05-23 18:11:19,011 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-23 18:11:19,471 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-23 18:11:19,471 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-23 18:11:19,667 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-23 18:11:19,667 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 18:11:20,401 - INFO - Contenedor iniciado: cl
2025-05-23 18:11:20,401 - DEBUG - Iniciando cambio de netplan en cl
2025-05-23 18:11:20,401 - DEBUG - Desactivando cloud-init en cl
2025-05-23 18:11:20,450 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-23 18:11:20,545 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-23 18:11:20,546 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-23 18:11:20,584 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-23 18:11:25,074 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-23 18:11:25,074 - DEBUG - Verificando estado antes de detener cl
2025-05-23 18:11:26,533 - INFO - Contenedor parado: cl
2025-05-23 18:11:26,533 - INFO - Cliente configurado correctamente
2025-05-23 18:11:26,533 - DEBUG - Intentando crear el contenedor db
2025-05-23 18:11:38,574 - INFO - Contenedor db creado con éxito.
2025-05-23 18:11:38,576 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-23 18:11:38,806 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-23 18:11:38,807 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-23 18:11:38,954 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-23 18:11:38,954 - INFO - Infraestructura creada correctamente.
2025-05-23 18:12:02,604 - INFO - Orden recibida: start
2025-05-23 18:12:02,604 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:12:02,604 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:12:02,604 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:12:02,604 - INFO - Iniciando todos los contenedores
2025-05-23 18:12:02,604 - DEBUG - Arrancando servidor: s1
2025-05-23 18:12:02,604 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:12:03,101 - INFO - Contenedor iniciado: s1
2025-05-23 18:12:03,313 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-23 18:12:03,314 - DEBUG - Arrancando servidor: s2
2025-05-23 18:12:03,314 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 18:12:03,614 - INFO - Contenedor iniciado: s2
2025-05-23 18:12:03,649 - DEBUG - No se encontró la app en s2, no se reinicia.
2025-05-23 18:12:03,650 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 18:12:04,024 - INFO - Contenedor iniciado: cl
2025-05-23 18:12:04,024 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 18:12:04,458 - INFO - Contenedor iniciado: lb
2025-05-23 18:12:04,459 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 18:12:04,819 - INFO - Contenedor iniciado: db
2025-05-23 18:12:04,819 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 18:12:04,822 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 18:12:04,825 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-23 18:12:04,831 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 18:12:04,834 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 18:12:04,839 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 18:12:08,314 - INFO - Orden recibida: configure
2025-05-23 18:12:08,314 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:12:08,315 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:12:08,315 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:12:08,315 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:12:08,315 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:12:08,380 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:12:08,380 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:12:08,402 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 18:12:08,402 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 18:12:08,402 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 18:12:26,497 - DEBUG - Instalando MongoDB
2025-05-23 18:13:29,128 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 18:13:29,202 - DEBUG - Reiniciando contenedor db
2025-05-23 18:13:33,635 - INFO - MongoDB configurado con éxito en db
2025-05-23 18:13:33,635 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 18:13:33,635 - INFO - Configurando servidor web base s1
2025-05-23 18:13:33,635 - INFO - Iniciando configuración del servidor web s1
2025-05-23 18:13:33,635 - DEBUG - Actualizando paquetes en s1
2025-05-23 18:13:48,968 - DEBUG - Instalando Apache en s1
2025-05-23 18:14:15,634 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 18:14:15,734 - DEBUG - Transfiriendo aplicación web
2025-05-23 18:14:15,747 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 18:14:16,136 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:16:31,507 - DEBUG - Reiniciando servidor
2025-05-23 18:16:36,037 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:16:36,702 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 18:16:36,703 - INFO - Creando imagen a partir del servidor base configurado
2025-05-23 18:16:36,703 - DEBUG - Comprobando estado de s1...
2025-05-23 18:16:36,723 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 18:16:36,723 - DEBUG - Verificando estado antes de detener s1
2025-05-23 18:16:38,249 - INFO - Contenedor parado: s1
2025-05-23 18:16:38,249 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 18:16:38,261 - INFO - La imagen servidor no existe. Se procederá crearla.
2025-05-23 18:16:38,261 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-23 18:18:31,281 - INFO - Imagen publicada correctamente.
2025-05-23 18:18:31,282 - INFO - Creando s2 desde imagen
2025-05-23 18:18:31,282 - DEBUG - Eliminando contenedor s2
2025-05-23 18:18:33,027 - INFO - Contenedor eliminado: s2
2025-05-23 18:18:33,027 - DEBUG - Intentando crear el contenedor s2
2025-05-23 18:18:54,583 - INFO - Contenedor s2 creado con éxito.
2025-05-23 18:18:54,583 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 18:18:54,718 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 18:18:54,718 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 18:18:54,809 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 18:18:54,835 - INFO - Configurando balanceador lb
2025-05-23 18:18:54,836 - INFO - Instalando haproxy en el balanceador
2025-05-23 18:19:24,977 - WARNING - No hay servidores configurados para HAProxy. Abortando configuración.
2025-05-23 18:19:24,977 - INFO - Balanceador configurado correctamente.
2025-05-23 18:21:20,338 - INFO - Orden recibida: configure
2025-05-23 18:21:20,338 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:21:20,339 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:21:20,339 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:21:20,339 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:21:20,339 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:21:20,390 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:21:20,391 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:21:20,417 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-23 18:21:20,417 - WARNING - El contenedor s2 no está en estado RUNNING
2025-05-23 18:21:20,417 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-23 18:23:35,774 - INFO - Orden recibida: start
2025-05-23 18:23:35,774 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:23:35,775 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:23:35,775 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:23:35,775 - INFO - Iniciando todos los contenedores
2025-05-23 18:23:35,775 - DEBUG - Arrancando servidor: s1
2025-05-23 18:23:35,775 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:23:36,348 - INFO - Contenedor iniciado: s1
2025-05-23 18:23:36,520 - INFO - Reiniciando app en s1
2025-05-23 18:23:38,332 - DEBUG - Arrancando servidor: s2
2025-05-23 18:23:38,332 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 18:23:38,726 - INFO - Contenedor iniciado: s2
2025-05-23 18:23:39,107 - INFO - Reiniciando app en s2
2025-05-23 18:23:46,914 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 18:23:46,935 - INFO - Contenedor cl ya está en ejecución.
2025-05-23 18:23:46,935 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 18:23:46,958 - INFO - Contenedor lb ya está en ejecución.
2025-05-23 18:23:46,958 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 18:23:46,981 - INFO - Contenedor db ya está en ejecución.
2025-05-23 18:23:46,981 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 18:23:46,991 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 18:23:46,996 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-23 18:23:47,001 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 18:23:47,023 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 18:23:47,033 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 18:23:57,563 - INFO - Orden recibida: configure
2025-05-23 18:23:57,563 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:23:57,563 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:23:57,563 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:23:57,563 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:23:57,564 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:23:57,588 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:23:57,588 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:23:57,605 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 18:23:57,606 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 18:23:57,606 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 18:24:03,569 - DEBUG - Instalando MongoDB
2025-05-23 18:24:05,636 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 18:24:05,688 - DEBUG - Reiniciando contenedor db
2025-05-23 18:24:10,580 - INFO - MongoDB configurado con éxito en db
2025-05-23 18:24:10,580 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 18:24:10,580 - INFO - Configurando servidor web base s1
2025-05-23 18:24:10,580 - INFO - Iniciando configuración del servidor web s1
2025-05-23 18:24:10,580 - DEBUG - Actualizando paquetes en s1
2025-05-23 18:24:14,852 - DEBUG - Instalando Apache en s1
2025-05-23 18:24:15,641 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 18:24:15,772 - DEBUG - Transfiriendo aplicación web
2025-05-23 18:24:15,811 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 18:24:16,030 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:24:54,230 - DEBUG - Reiniciando servidor
2025-05-23 18:24:58,737 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:24:59,367 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 18:24:59,368 - INFO - Creando imagen a partir del servidor base configurado
2025-05-23 18:24:59,368 - DEBUG - Comprobando estado de s1...
2025-05-23 18:24:59,405 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 18:24:59,405 - DEBUG - Verificando estado antes de detener s1
2025-05-23 18:25:00,924 - INFO - Contenedor parado: s1
2025-05-23 18:25:00,925 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 18:25:00,936 - INFO - La imagen servidor ya está disponible.
2025-05-23 18:25:00,936 - INFO - Creando s2 desde imagen
2025-05-23 18:25:00,936 - DEBUG - Eliminando contenedor s2
2025-05-23 18:25:03,458 - INFO - Contenedor eliminado: s2
2025-05-23 18:25:03,458 - DEBUG - Intentando crear el contenedor s2
2025-05-23 18:25:24,639 - INFO - Contenedor s2 creado con éxito.
2025-05-23 18:25:24,639 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 18:25:24,796 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 18:25:24,797 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 18:25:24,895 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 18:25:24,895 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 18:25:25,277 - INFO - Contenedor iniciado: s2
2025-05-23 18:25:26,441 - INFO - Iniciando el servidor s1
2025-05-23 18:25:26,441 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:25:26,697 - INFO - Contenedor iniciado: s1
2025-05-23 18:25:26,698 - INFO - Configurando balanceador lb
2025-05-23 18:25:26,698 - INFO - Instalando haproxy en el balanceador
2025-05-23 18:25:32,964 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 18:25:32,964 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 18:25:33,064 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 18:25:33,184 - DEBUG - Iniciando servicio de haproxy
2025-05-23 18:25:33,321 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 18:25:33,322 - INFO - Balanceador configurado correctamente.
2025-05-23 18:27:42,663 - INFO - Orden recibida: configure
2025-05-23 18:27:42,663 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:27:42,664 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:27:42,664 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:27:42,664 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:27:42,664 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:27:42,711 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:27:42,712 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:27:42,737 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 18:27:42,737 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 18:27:42,737 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 18:27:47,163 - DEBUG - Instalando MongoDB
2025-05-23 18:27:48,403 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 18:27:48,474 - DEBUG - Reiniciando contenedor db
2025-05-23 18:27:53,053 - INFO - MongoDB configurado con éxito en db
2025-05-23 18:27:53,053 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 18:27:53,053 - INFO - Configurando servidor web base s1
2025-05-23 18:27:53,053 - INFO - Iniciando configuración del servidor web s1
2025-05-23 18:27:53,053 - DEBUG - Actualizando paquetes en s1
2025-05-23 18:27:57,562 - DEBUG - Instalando Apache en s1
2025-05-23 18:27:58,754 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 18:27:58,872 - DEBUG - Transfiriendo aplicación web
2025-05-23 18:27:58,889 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 18:27:59,037 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:28:29,546 - DEBUG - Reiniciando servidor
2025-05-23 18:28:33,986 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:28:34,768 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 18:28:34,768 - INFO - Creando imagen a partir del servidor base configurado
2025-05-23 18:28:34,768 - DEBUG - Comprobando estado de s1...
2025-05-23 18:28:34,785 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 18:28:34,785 - DEBUG - Verificando estado antes de detener s1
2025-05-23 18:28:36,318 - INFO - Contenedor parado: s1
2025-05-23 18:28:36,318 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 18:28:36,331 - INFO - La imagen servidor ya está disponible.
2025-05-23 18:28:36,331 - INFO - Creando s2 desde imagen
2025-05-23 18:28:36,332 - DEBUG - Eliminando contenedor s2
2025-05-23 18:28:38,893 - INFO - Contenedor eliminado: s2
2025-05-23 18:28:38,893 - DEBUG - Intentando crear el contenedor s2
2025-05-23 18:28:59,894 - INFO - Contenedor s2 creado con éxito.
2025-05-23 18:28:59,894 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 18:29:00,111 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 18:29:00,111 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 18:29:00,288 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 18:29:00,289 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 18:29:00,679 - INFO - Contenedor iniciado: s2
2025-05-23 18:29:01,925 - INFO - Iniciando el servidor s1
2025-05-23 18:29:01,926 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:29:02,274 - INFO - Contenedor iniciado: s1
2025-05-23 18:29:05,101 - INFO - Configurando balanceador lb
2025-05-23 18:29:05,101 - INFO - Instalando haproxy en el balanceador
2025-05-23 18:29:11,723 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 18:29:11,723 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 18:29:11,957 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 18:29:12,054 - DEBUG - Iniciando servicio de haproxy
2025-05-23 18:29:14,089 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 18:29:14,089 - INFO - Balanceador configurado correctamente.
2025-05-23 18:29:55,954 - INFO - Orden recibida: enlarge
2025-05-23 18:29:55,954 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:29:55,954 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:29:55,954 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 18:29:55,954 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 18:29:55,954 - DEBUG - Comprobando estado de s1...
2025-05-23 18:29:55,970 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 18:29:55,970 - DEBUG - Verificando estado antes de detener s1
2025-05-23 18:30:00,290 - INFO - Contenedor parado: s1
2025-05-23 18:30:00,290 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 18:30:00,317 - INFO - La imagen servidor ya está disponible.
2025-05-23 18:30:00,317 - INFO - Buscando servidor libre para crear...
2025-05-23 18:30:00,318 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 18:30:00,345 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 18:30:00,366 - DEBUG - Verificando si existe el contenedor s3
2025-05-23 18:30:00,377 - INFO - Creando nuevo servidor disponible: s3
2025-05-23 18:30:00,377 - DEBUG - Intentando crear el contenedor s3
2025-05-23 18:30:21,629 - INFO - Contenedor s3 creado con éxito.
2025-05-23 18:30:21,629 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-23 18:30:21,834 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-23 18:30:21,834 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-23 18:30:21,972 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-23 18:30:21,972 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-23 18:30:21,972 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:30:21,972 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 18:30:21,972 - INFO - Solicitado arrancar servidor: s3
2025-05-23 18:30:21,989 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-23 18:30:22,962 - INFO - Contenedor iniciado: s3
2025-05-23 18:30:24,196 - INFO - Servidor s3 corriendo correctamente.
2025-05-23 18:30:24,196 - INFO - Solicitado arrancar servidor: s1
2025-05-23 18:30:24,219 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:30:24,518 - INFO - Contenedor iniciado: s1
2025-05-23 18:30:28,746 - INFO - Servidor s1 corriendo correctamente.
2025-05-23 18:30:28,854 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 18:30:28,854 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 18:30:28,964 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 18:30:29,033 - DEBUG - Iniciando servicio de haproxy
2025-05-23 18:30:29,514 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 18:30:29,515 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-23 18:30:29,516 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-23 18:30:29,516 - INFO - Nuevo número de servidores: 3
2025-05-23 18:30:57,281 - INFO - Orden recibida: list
2025-05-23 18:30:57,281 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:30:57,281 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:30:57,281 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:30:57,281 - INFO - Listando contenedores
2025-05-23 18:30:57,383 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-23 18:31:10,491 - INFO - Orden recibida: configure_remote
2025-05-23 18:31:10,491 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:31:10,491 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:31:10,492 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:31:10,492 - INFO - Desplegando base de datos remota en el equipo l023
2025-05-23 18:31:10,492 - INFO - IP local detectada: 138.4.31.22
2025-05-23 18:31:10,498 - INFO - Nombre remoto detectado: l023.lab.dit.upm.es cuya IP: 138.4.31.23
2025-05-23 18:31:10,498 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 18:31:35,624 - INFO - Conectando al LXD remoto desde local
2025-05-23 18:31:36,015 - INFO - Configurando bridge remoto
2025-05-23 18:31:37,042 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-23 18:31:37,043 - DEBUG - Verificando estado antes de detener db
2025-05-23 18:31:41,555 - INFO - Contenedor parado: db
2025-05-23 18:32:47,068 - INFO - Base de datos copiada al equipo remoto
2025-05-23 18:32:47,069 - INFO - Configurando proxy para acceso a MongoDB
2025-05-23 18:32:47,181 - INFO - Base de datos remota desplegada correctamente
2025-05-23 18:32:47,181 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:32:47,183 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:32:47,183 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.23...
2025-05-23 18:32:47,361 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:32:47,362 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.23...
2025-05-23 18:32:47,511 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:32:47,512 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.23...
2025-05-23 18:32:47,663 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:35:18,588 - INFO - Orden recibida: list
2025-05-23 18:35:18,588 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:35:18,589 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:35:18,589 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:35:18,589 - INFO - Listando contenedores
2025-05-23 18:35:18,616 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-23 18:42:47,640 - INFO - Orden recibida: configure_remote
2025-05-23 18:42:47,640 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:42:47,640 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:42:47,640 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:42:47,640 - INFO - Desplegando base de datos remota en el equipo l023
2025-05-23 18:42:47,640 - INFO - IP local detectada: 138.4.31.22
2025-05-23 18:42:47,642 - INFO - Nombre remoto detectado: l023.lab.dit.upm.es cuya IP: 138.4.31.23
2025-05-23 18:42:47,642 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 18:42:54,933 - INFO - Conectando al LXD remoto desde local
2025-05-23 18:42:55,200 - INFO - Configurando bridge remoto
2025-05-23 18:42:55,549 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-23 18:42:55,549 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:42:55,550 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:42:55,550 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.23...
2025-05-23 18:42:55,712 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:42:55,713 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.23...
2025-05-23 18:42:55,888 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:42:55,889 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.23...
2025-05-23 18:42:56,101 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:46:55,190 - INFO - Orden recibida: configure_remote
2025-05-23 18:46:55,190 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:46:55,191 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:46:55,191 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:46:55,191 - INFO - Desplegando base de datos remota en el equipo l023
2025-05-23 18:46:55,191 - INFO - IP local detectada: 138.4.31.22
2025-05-23 18:46:55,194 - INFO - Nombre remoto detectado: l023.lab.dit.upm.es cuya IP: 138.4.31.23
2025-05-23 18:46:55,194 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 18:47:05,582 - INFO - Conectando al LXD remoto desde local
2025-05-23 18:47:05,843 - INFO - Configurando bridge remoto
2025-05-23 18:47:06,031 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-23 18:47:06,031 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:47:06,031 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:47:06,031 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.23...
2025-05-23 18:47:06,204 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:47:06,204 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.23...
2025-05-23 18:47:06,345 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:47:06,345 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.23...
2025-05-23 18:47:06,457 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 18:51:38,734 - INFO - Orden recibida: delete
2025-05-23 18:51:38,734 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:51:38,735 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:51:38,735 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:51:38,735 - INFO - Eliminando toda la infraestructura
2025-05-23 18:51:38,735 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-23 18:51:38,824 - INFO - Imagen local eliminada con éxito.
2025-05-23 18:51:38,825 - DEBUG - Eliminando contenedor s1
2025-05-23 18:51:42,526 - INFO - Contenedor eliminado: s1
2025-05-23 18:51:42,527 - DEBUG - Eliminando contenedor s2
2025-05-23 18:51:45,623 - INFO - Contenedor eliminado: s2
2025-05-23 18:51:45,623 - DEBUG - Eliminando contenedor s3
2025-05-23 18:51:48,355 - INFO - Contenedor eliminado: s3
2025-05-23 18:51:48,355 - DEBUG - Eliminando contenedor cl
2025-05-23 18:52:10,661 - INFO - Orden recibida: create_server
2025-05-23 18:52:10,661 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:52:10,661 - INFO - Número de servidores 3 cargados correctamente.
2025-05-23 18:52:10,661 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-23 18:52:10,661 - INFO - Buscando servidor libre para crear...
2025-05-23 18:52:10,661 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 18:52:10,672 - INFO - Creando nuevo servidor disponible: s1
2025-05-23 18:52:10,672 - DEBUG - Intentando crear el contenedor s1
2025-05-23 18:52:10,699 - ERROR - Error al crear el contenedor s1: Command '['lxc', 'init', 'ubuntu2004', 's1']' returned non-zero exit status 1.
2025-05-23 18:52:10,699 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 18:52:10,731 - ERROR - Error al conectar s1 a lxdbr0: Command '['lxc', 'network', 'attach', 'lxdbr0', 's1', 'eth0']' returned non-zero exit status 1.
2025-05-23 18:52:10,731 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 18:52:10,746 - ERROR - No se pudo configurar la red del contenedor s1: Command '['lxc', 'config', 'device', 'set', 's1', 'eth0', 'ipv4.address', '134.3.0.11']' returned non-zero exit status 1.
2025-05-23 18:52:10,746 - INFO - Servidor s1 creado correctamente con IP 134.3.0.11 
2025-05-23 18:52:10,746 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-23 18:52:10,748 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-23 18:52:10,748 - INFO - Nuevo número de servidores: 4
2025-05-23 18:52:17,570 - INFO - Orden recibida: delete
2025-05-23 18:52:17,570 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:52:17,570 - INFO - Número de servidores 4 cargados correctamente.
2025-05-23 18:52:17,570 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-23 18:52:17,571 - INFO - Eliminando toda la infraestructura
2025-05-23 18:52:17,571 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-23 18:52:17,617 - ERROR - No se pudo eliminar la imagen ubuntu2004: Command '['lxc', 'image', 'delete', 'ubuntu2004']' returned non-zero exit status 1.
2025-05-23 18:52:17,617 - DEBUG - Eliminando contenedor s1
2025-05-23 18:52:17,664 - ERROR - Error al eliminar el contenedor s1: Command '['lxc', 'delete', 's1', '--force']' returned non-zero exit status 1.
2025-05-23 18:52:17,664 - DEBUG - Eliminando contenedor s2
2025-05-23 18:52:17,696 - ERROR - Error al eliminar el contenedor s2: Command '['lxc', 'delete', 's2', '--force']' returned non-zero exit status 1.
2025-05-23 18:52:17,696 - DEBUG - Eliminando contenedor s3
2025-05-23 18:52:17,720 - ERROR - Error al eliminar el contenedor s3: Command '['lxc', 'delete', 's3', '--force']' returned non-zero exit status 1.
2025-05-23 18:52:17,721 - DEBUG - Eliminando contenedor s4
2025-05-23 18:52:17,765 - ERROR - Error al eliminar el contenedor s4: Command '['lxc', 'delete', 's4', '--force']' returned non-zero exit status 1.
2025-05-23 18:52:17,765 - DEBUG - Eliminando contenedor cl
2025-05-23 18:52:19,519 - INFO - Contenedor eliminado: cl
2025-05-23 18:52:19,519 - DEBUG - Eliminando contenedor lb
2025-05-23 18:52:22,603 - INFO - Contenedor eliminado: lb
2025-05-23 18:52:22,603 - DEBUG - Eliminando contenedor db
2025-05-23 18:52:23,863 - INFO - Contenedor eliminado: db
2025-05-23 18:52:23,863 - DEBUG - Contenedores eliminados correctamente
2025-05-23 18:52:23,863 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-23 18:52:24,268 - INFO - Bridge eliminado: lxdbr1
2025-05-23 18:52:24,268 - INFO - Eliminación completada.
2025-05-23 18:52:33,144 - INFO - Orden recibida: create
2025-05-23 18:52:33,144 - INFO - Número de servidores especificado: 1
2025-05-23 18:52:33,144 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-23 18:52:33,144 - DEBUG - Parámetro recibido n_servers=1
2025-05-23 18:52:33,144 - DEBUG - Creando imagen base...
2025-05-23 18:52:33,144 - DEBUG - Verificando si la imagen ya está importada...
2025-05-23 18:52:33,202 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-23 18:52:38,641 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-23 18:52:38,641 - DEBUG - Configurando y creando bridges...
2025-05-23 18:52:38,671 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-23 18:52:38,731 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-23 18:52:38,731 - DEBUG - Creando bridge lxdbr1
2025-05-23 18:52:40,386 - INFO - Bridge creado: lxdbr1
2025-05-23 18:52:41,241 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-23 18:52:44,653 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-23 18:52:44,654 - DEBUG - Creando contenedores de servidores...
2025-05-23 18:52:44,654 - DEBUG - Intentando crear el contenedor s1
2025-05-23 18:52:54,210 - INFO - Contenedor s1 creado con éxito.
2025-05-23 18:52:54,210 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-23 18:52:54,422 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-23 18:52:54,422 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-23 18:52:55,414 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-23 18:52:55,415 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-23 18:52:55,416 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-23 18:52:55,416 - INFO - Número de servidores guardados correctamente
2025-05-23 18:52:55,416 - DEBUG - Creando balanceador...
2025-05-23 18:52:55,417 - DEBUG - Intentando crear el contenedor lb
2025-05-23 18:53:05,208 - INFO - Contenedor lb creado con éxito.
2025-05-23 18:53:05,208 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-23 18:53:05,305 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-23 18:53:05,305 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-23 18:53:05,377 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-23 18:53:05,378 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-23 18:53:05,484 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-23 18:53:05,485 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-23 18:53:05,572 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-23 18:53:05,572 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 18:53:06,020 - INFO - Contenedor iniciado: lb
2025-05-23 18:53:06,020 - DEBUG - Iniciando cambio de netplan en lb
2025-05-23 18:53:06,020 - DEBUG - Desactivando cloud-init en lb
2025-05-23 18:53:06,081 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-23 18:53:06,129 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-23 18:53:06,129 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-23 18:53:06,180 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-23 18:53:08,048 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-23 18:53:08,048 - DEBUG - Verificando estado antes de detener lb
2025-05-23 18:53:09,402 - INFO - Contenedor parado: lb
2025-05-23 18:53:09,402 - INFO - Balanceador configurado correctamente
2025-05-23 18:53:09,402 - DEBUG - Creando cliente...
2025-05-23 18:53:09,402 - DEBUG - Intentando crear el contenedor cl
2025-05-23 18:53:19,077 - INFO - Contenedor cl creado con éxito.
2025-05-23 18:53:19,077 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-23 18:53:19,145 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-23 18:53:19,145 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-23 18:53:19,177 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-23 18:53:19,177 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 18:53:19,577 - INFO - Contenedor iniciado: cl
2025-05-23 18:53:19,578 - DEBUG - Iniciando cambio de netplan en cl
2025-05-23 18:53:19,578 - DEBUG - Desactivando cloud-init en cl
2025-05-23 18:53:19,707 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-23 18:53:19,807 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-23 18:53:19,808 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-23 18:53:19,873 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-23 18:53:21,655 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-23 18:53:21,655 - DEBUG - Verificando estado antes de detener cl
2025-05-23 18:53:23,025 - INFO - Contenedor parado: cl
2025-05-23 18:53:23,025 - INFO - Cliente configurado correctamente
2025-05-23 18:53:23,025 - DEBUG - Intentando crear el contenedor db
2025-05-23 18:53:32,842 - INFO - Contenedor db creado con éxito.
2025-05-23 18:53:32,842 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-23 18:53:32,934 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-23 18:53:32,934 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-23 18:53:33,039 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-23 18:53:33,039 - INFO - Infraestructura creada correctamente.
2025-05-23 18:55:39,952 - INFO - Orden recibida: start
2025-05-23 18:55:39,953 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:55:39,953 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 18:55:39,953 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 18:55:39,954 - INFO - Iniciando todos los contenedores
2025-05-23 18:55:39,954 - DEBUG - Arrancando servidor: s1
2025-05-23 18:55:39,954 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:55:40,286 - INFO - Contenedor iniciado: s1
2025-05-23 18:55:40,333 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-23 18:55:40,340 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-23 18:55:40,844 - INFO - Contenedor iniciado: cl
2025-05-23 18:55:40,844 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-23 18:55:41,281 - INFO - Contenedor iniciado: lb
2025-05-23 18:55:41,281 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-23 18:55:41,645 - INFO - Contenedor iniciado: db
2025-05-23 18:55:41,645 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-23 18:55:41,647 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-23 18:55:41,648 - INFO - Consola del contenedor cl abierta correctamente
2025-05-23 18:55:41,651 - INFO - Consola del contenedor lb abierta correctamente
2025-05-23 18:55:41,653 - INFO - Consola del contenedor db abierta correctamente
2025-05-23 18:55:48,950 - INFO - Orden recibida: configure
2025-05-23 18:55:48,950 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:55:48,951 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 18:55:48,951 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 18:55:48,951 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:55:48,951 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 18:55:49,194 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 18:55:49,194 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 18:55:49,327 - INFO - Iniciando configuración de la infraestructura...
2025-05-23 18:55:49,327 - INFO - Configurando base de datos MongoDB en: db
2025-05-23 18:55:49,327 - INFO - Iniciando instalación de MongoDB en db
2025-05-23 18:56:04,160 - DEBUG - Instalando MongoDB
2025-05-23 18:56:49,948 - DEBUG - Modificando bind_ip de MongoDB
2025-05-23 18:56:50,021 - DEBUG - Reiniciando contenedor db
2025-05-23 18:56:54,411 - INFO - MongoDB configurado con éxito en db
2025-05-23 18:56:54,412 - INFO - Configuración de base de datos completada correctamente.
2025-05-23 18:56:54,412 - INFO - Configurando servidor web base s1
2025-05-23 18:56:54,412 - INFO - Iniciando configuración del servidor web s1
2025-05-23 18:56:54,412 - DEBUG - Actualizando paquetes en s1
2025-05-23 18:57:07,494 - DEBUG - Instalando Apache en s1
2025-05-23 18:57:32,704 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-23 18:57:32,829 - DEBUG - Transfiriendo aplicación web
2025-05-23 18:57:32,852 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-23 18:57:33,280 - DEBUG - Ejecutando instalación Node.js
2025-05-23 18:59:50,645 - DEBUG - Reiniciando servidor
2025-05-23 18:59:55,392 - DEBUG - Iniciando servidor Node.js con forever
2025-05-23 18:59:56,199 - INFO - Servidor web s1 configurado con éxito.
2025-05-23 18:59:56,199 - INFO - Creando imagen a partir del servidor base configurado
2025-05-23 18:59:56,199 - DEBUG - Comprobando estado de s1...
2025-05-23 18:59:56,223 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 18:59:56,223 - DEBUG - Verificando estado antes de detener s1
2025-05-23 18:59:57,787 - INFO - Contenedor parado: s1
2025-05-23 18:59:57,787 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 18:59:57,800 - INFO - La imagen servidor ya está disponible.
2025-05-23 18:59:57,800 - INFO - Iniciando el servidor s1
2025-05-23 18:59:57,800 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 18:59:58,100 - INFO - Contenedor iniciado: s1
2025-05-23 18:59:59,247 - INFO - Configurando balanceador lb
2025-05-23 18:59:59,247 - INFO - Instalando haproxy en el balanceador
2025-05-23 19:00:29,824 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 19:00:29,824 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 19:00:29,901 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 19:00:29,957 - DEBUG - Iniciando servicio de haproxy
2025-05-23 19:00:30,108 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 19:00:30,108 - INFO - Balanceador configurado correctamente.
2025-05-23 19:01:15,427 - INFO - Orden recibida: enlarge
2025-05-23 19:01:15,427 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 19:01:15,428 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 19:01:15,428 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-23 19:01:15,428 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-23 19:01:15,428 - DEBUG - Comprobando estado de s1...
2025-05-23 19:01:15,446 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-23 19:01:15,446 - DEBUG - Verificando estado antes de detener s1
2025-05-23 19:01:19,775 - INFO - Contenedor parado: s1
2025-05-23 19:01:19,776 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-23 19:01:19,789 - INFO - La imagen servidor ya está disponible.
2025-05-23 19:01:19,789 - INFO - Buscando servidor libre para crear...
2025-05-23 19:01:19,789 - DEBUG - Verificando si existe el contenedor s1
2025-05-23 19:01:19,804 - DEBUG - Verificando si existe el contenedor s2
2025-05-23 19:01:19,817 - INFO - Creando nuevo servidor disponible: s2
2025-05-23 19:01:19,817 - DEBUG - Intentando crear el contenedor s2
2025-05-23 19:01:42,310 - INFO - Contenedor s2 creado con éxito.
2025-05-23 19:01:42,310 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-23 19:01:42,595 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-23 19:01:42,595 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-23 19:01:42,697 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-23 19:01:42,697 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-23 19:01:42,697 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 19:01:42,697 - INFO - Número de servidores 1 cargados correctamente.
2025-05-23 19:01:42,697 - INFO - Solicitado arrancar servidor: s2
2025-05-23 19:01:42,710 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-23 19:01:43,406 - INFO - Contenedor iniciado: s2
2025-05-23 19:01:44,589 - INFO - Servidor s2 corriendo correctamente.
2025-05-23 19:01:44,589 - INFO - Solicitado arrancar servidor: s1
2025-05-23 19:01:44,614 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-23 19:01:44,889 - INFO - Contenedor iniciado: s1
2025-05-23 19:01:48,845 - INFO - Servidor s1 corriendo correctamente.
2025-05-23 19:01:48,955 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-23 19:01:48,955 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-23 19:01:49,346 - DEBUG - Validando archivo haproxy.cfg
2025-05-23 19:01:50,566 - DEBUG - Iniciando servicio de haproxy
2025-05-23 19:01:51,396 - INFO - Haproxy instalado y configurado correctamente.
2025-05-23 19:01:51,396 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-23 19:01:51,398 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-23 19:01:51,398 - INFO - Nuevo número de servidores: 2
2025-05-23 19:06:50,908 - INFO - Orden recibida: configure_remote
2025-05-23 19:06:50,908 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 19:06:50,909 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 19:06:50,909 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-23 19:06:50,909 - INFO - Desplegando base de datos remota en el equipo l020
2025-05-23 19:06:50,912 - INFO - IP local detectada: 138.4.31.22
2025-05-23 19:06:50,914 - INFO - Nombre remoto detectado: l020.lab.dit.upm.es cuya IP: 138.4.31.20
2025-05-23 19:06:50,915 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-23 19:07:06,104 - INFO - Conectando al LXD remoto desde local
2025-05-23 19:07:06,388 - INFO - Configurando bridge remoto
2025-05-23 19:07:06,589 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-23 19:07:06,589 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-23 19:07:06,590 - INFO - Número de servidores 2 cargados correctamente.
2025-05-23 19:07:06,590 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.20...
2025-05-23 19:07:06,729 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-23 19:07:07,749 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.20...
2025-05-23 19:07:07,896 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 15:56:29,524 - INFO - Orden recibida: create
2025-05-25 15:56:29,524 - INFO - Número de servidores especificado: 1
2025-05-25 15:56:29,524 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-25 15:56:29,524 - DEBUG - Parámetro recibido n_servers=1
2025-05-25 15:56:29,525 - DEBUG - Creando imagen base...
2025-05-25 15:56:29,525 - DEBUG - Verificando si la imagen ya está importada...
2025-05-25 15:56:29,538 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-25 15:56:35,494 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-25 15:56:35,494 - DEBUG - Configurando y creando bridges...
2025-05-25 15:56:36,418 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-25 15:56:39,779 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-25 15:56:39,779 - DEBUG - Creando bridge lxdbr1
2025-05-25 15:56:41,407 - INFO - Bridge creado: lxdbr1
2025-05-25 15:56:42,323 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-25 15:56:45,780 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-25 15:56:45,780 - DEBUG - Creando contenedores de servidores...
2025-05-25 15:56:45,780 - DEBUG - Intentando crear el contenedor s1
2025-05-25 15:56:55,358 - INFO - Contenedor s1 creado con éxito.
2025-05-25 15:56:55,358 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-25 15:56:55,422 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-25 15:56:55,422 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-25 15:56:55,452 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-25 15:56:55,453 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-25 15:56:55,454 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-25 15:56:55,454 - INFO - Número de servidores guardados correctamente
2025-05-25 15:56:55,454 - DEBUG - Creando balanceador...
2025-05-25 15:56:55,454 - DEBUG - Intentando crear el contenedor lb
2025-05-25 15:57:05,059 - INFO - Contenedor lb creado con éxito.
2025-05-25 15:57:05,059 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-25 15:57:05,103 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-25 15:57:05,104 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-25 15:57:05,132 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-25 15:57:05,132 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-25 15:57:05,174 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-25 15:57:05,174 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-25 15:57:05,201 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-25 15:57:05,201 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-25 15:57:05,585 - INFO - Contenedor iniciado: lb
2025-05-25 15:57:05,585 - DEBUG - Iniciando cambio de netplan en lb
2025-05-25 15:57:05,585 - DEBUG - Desactivando cloud-init en lb
2025-05-25 15:57:05,626 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-25 15:57:05,679 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-25 15:57:05,680 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-25 15:57:05,727 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-25 15:57:08,084 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-25 15:57:08,084 - DEBUG - Verificando estado antes de detener lb
2025-05-25 15:57:09,532 - INFO - Contenedor parado: lb
2025-05-25 15:57:09,532 - INFO - Balanceador configurado correctamente
2025-05-25 15:57:09,532 - DEBUG - Creando cliente...
2025-05-25 15:57:09,532 - DEBUG - Intentando crear el contenedor cl
2025-05-25 15:57:19,080 - INFO - Contenedor cl creado con éxito.
2025-05-25 15:57:19,080 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-25 15:57:19,138 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-25 15:57:19,138 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-25 15:57:19,170 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-25 15:57:19,170 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-25 15:57:19,590 - INFO - Contenedor iniciado: cl
2025-05-25 15:57:19,590 - DEBUG - Iniciando cambio de netplan en cl
2025-05-25 15:57:19,590 - DEBUG - Desactivando cloud-init en cl
2025-05-25 15:57:19,756 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-25 15:57:19,852 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-25 15:57:19,852 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-25 15:57:19,982 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-25 15:57:22,828 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-25 15:57:22,828 - DEBUG - Verificando estado antes de detener cl
2025-05-25 15:57:24,256 - INFO - Contenedor parado: cl
2025-05-25 15:57:24,256 - INFO - Cliente configurado correctamente
2025-05-25 15:57:24,256 - DEBUG - Intentando crear el contenedor db
2025-05-25 15:57:33,831 - INFO - Contenedor db creado con éxito.
2025-05-25 15:57:33,832 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-25 15:57:33,885 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-25 15:57:33,885 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-25 15:57:33,911 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-25 15:57:33,911 - INFO - Infraestructura creada correctamente.
2025-05-25 15:57:44,803 - INFO - Orden recibida: configure
2025-05-25 15:57:44,803 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:44,804 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:44,804 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 15:57:44,804 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:44,804 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:44,820 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:44,821 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:44,834 - WARNING - El contenedor cl no está en estado RUNNING
2025-05-25 15:57:44,834 - WARNING - El contenedor db no está en estado RUNNING
2025-05-25 15:57:44,834 - WARNING - El contenedor lb no está en estado RUNNING
2025-05-25 15:57:44,834 - WARNING - El contenedor s1 no está en estado RUNNING
2025-05-25 15:57:44,834 - ERROR - Todos los contenedores deben estar en estado RUNNING.
2025-05-25 15:57:50,229 - INFO - Orden recibida: start
2025-05-25 15:57:50,229 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:50,229 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:50,229 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 15:57:50,229 - INFO - Iniciando todos los contenedores
2025-05-25 15:57:50,229 - DEBUG - Arrancando servidor: s1
2025-05-25 15:57:50,229 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-25 15:57:50,555 - INFO - Contenedor iniciado: s1
2025-05-25 15:57:50,611 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-25 15:57:50,612 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-25 15:57:50,975 - INFO - Contenedor iniciado: cl
2025-05-25 15:57:50,975 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-25 15:57:51,397 - INFO - Contenedor iniciado: lb
2025-05-25 15:57:51,397 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-25 15:57:51,728 - INFO - Contenedor iniciado: db
2025-05-25 15:57:51,728 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-25 15:57:51,735 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-25 15:57:51,740 - INFO - Consola del contenedor cl abierta correctamente
2025-05-25 15:57:51,743 - INFO - Consola del contenedor lb abierta correctamente
2025-05-25 15:57:51,748 - INFO - Consola del contenedor db abierta correctamente
2025-05-25 15:57:57,245 - INFO - Orden recibida: configure
2025-05-25 15:57:57,245 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:57,245 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:57,246 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 15:57:57,246 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:57,246 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:57,267 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 15:57:57,267 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 15:57:57,316 - INFO - Iniciando configuración de la infraestructura...
2025-05-25 15:57:57,316 - INFO - Configurando base de datos MongoDB en: db
2025-05-25 15:57:57,316 - INFO - Iniciando instalación de MongoDB en db
2025-05-25 15:58:19,435 - DEBUG - Instalando MongoDB
2025-05-25 15:59:03,890 - DEBUG - Modificando bind_ip de MongoDB
2025-05-25 15:59:03,934 - DEBUG - Reiniciando contenedor db
2025-05-25 16:00:35,439 - INFO - MongoDB configurado con éxito en db
2025-05-25 16:00:35,440 - INFO - Configuración de base de datos completada correctamente.
2025-05-25 16:00:35,440 - INFO - Configurando servidor web base s1
2025-05-25 16:00:35,440 - INFO - Iniciando configuración del servidor web s1
2025-05-25 16:00:35,440 - DEBUG - Actualizando paquetes en s1
2025-05-25 16:00:49,059 - DEBUG - Instalando Apache en s1
2025-05-25 16:01:15,754 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-25 16:01:15,831 - DEBUG - Transfiriendo aplicación web
2025-05-25 16:01:15,847 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-25 16:01:15,938 - DEBUG - Ejecutando instalación Node.js
2025-05-25 16:03:43,220 - DEBUG - Reiniciando servidor
2025-05-25 16:03:47,848 - DEBUG - Iniciando servidor Node.js con forever
2025-05-25 16:03:48,630 - INFO - Servidor web s1 configurado con éxito.
2025-05-25 16:03:48,630 - INFO - Creando imagen a partir del servidor base configurado
2025-05-25 16:03:48,630 - DEBUG - Comprobando estado de s1...
2025-05-25 16:03:48,656 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-25 16:03:48,656 - DEBUG - Verificando estado antes de detener s1
2025-05-25 16:03:50,221 - INFO - Contenedor parado: s1
2025-05-25 16:03:50,221 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-25 16:03:50,233 - INFO - La imagen servidor no existe. Se procederá crearla.
2025-05-25 16:03:50,233 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-25 16:05:34,740 - INFO - Imagen publicada correctamente.
2025-05-25 16:05:34,740 - INFO - Iniciando el servidor s1
2025-05-25 16:05:34,741 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-25 16:05:35,104 - INFO - Contenedor iniciado: s1
2025-05-25 16:05:36,954 - INFO - Configurando balanceador lb
2025-05-25 16:05:36,954 - INFO - Instalando haproxy en el balanceador
2025-05-25 16:06:03,087 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-25 16:06:03,087 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-25 16:06:03,165 - DEBUG - Validando archivo haproxy.cfg
2025-05-25 16:06:03,280 - DEBUG - Iniciando servicio de haproxy
2025-05-25 16:06:03,441 - INFO - Haproxy instalado y configurado correctamente.
2025-05-25 16:06:03,441 - INFO - Balanceador configurado correctamente.
2025-05-25 16:06:38,508 - INFO - Orden recibida: list
2025-05-25 16:06:38,508 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:06:38,509 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:06:38,509 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:06:38,509 - INFO - Listando contenedores
2025-05-25 16:06:38,534 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-25 16:06:59,126 - INFO - Orden recibida: configure_remote
2025-05-25 16:06:59,126 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:06:59,126 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:06:59,126 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:07:59,521 - INFO - Orden recibida: configure_remote
2025-05-25 16:07:59,522 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:07:59,522 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:07:59,522 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:08:52,539 - INFO - Orden recibida: configure_remote
2025-05-25 16:08:52,539 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:08:52,539 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:08:52,539 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:08:52,539 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:09:16,180 - INFO - Orden recibida: configure_remote
2025-05-25 16:09:16,181 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:09:16,181 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:09:16,181 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:09:16,182 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:09:16,186 - INFO - Nombre remoto detectado: l021.lab.dit.upm.es → IP: 127.0.1.1
2025-05-25 16:09:16,186 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:10:13,711 - INFO - Orden recibida: configure_remote
2025-05-25 16:10:13,711 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:10:13,711 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:10:13,711 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:10:13,711 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-25 16:10:21,842 - INFO - Orden recibida: configure_remote
2025-05-25 16:10:21,842 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:10:21,842 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:10:21,842 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:10:21,842 - INFO - Desplegando base de datos remota en el equipo l170
2025-05-25 16:10:21,842 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:10:21,844 - INFO - Nombre remoto detectado: l170.lab.dit.upm.es cuya IP: 138.4.31.170
2025-05-25 16:10:21,845 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:10:24,912 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.170', 'lxc config set core.https_address 138.4.31.170:8443']' returned non-zero exit status 255.
2025-05-25 16:10:24,912 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:10:24,912 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:10:24,912 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.170...
2025-05-25 16:10:25,032 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 16:14:14,505 - INFO - Orden recibida: configure_remote
2025-05-25 16:14:14,505 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:14,506 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:14,506 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:14:14,506 - INFO - Desplegando base de datos remota en el equipo l110
2025-05-25 16:14:14,506 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:14:14,508 - INFO - Nombre remoto detectado: l110.lab.dit.upm.es cuya IP: 138.4.31.110
2025-05-25 16:14:14,509 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:14:17,586 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.110', 'lxc config set core.https_address 138.4.31.110:8443']' returned non-zero exit status 255.
2025-05-25 16:14:17,586 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:17,587 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:17,587 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.110...
2025-05-25 16:14:17,723 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 16:14:27,968 - INFO - Orden recibida: configure_remote
2025-05-25 16:14:27,968 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:27,968 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:27,969 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:14:27,969 - INFO - Desplegando base de datos remota en el equipo l025
2025-05-25 16:14:27,969 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:14:27,971 - INFO - Nombre remoto detectado: l025.lab.dit.upm.es cuya IP: 138.4.31.25
2025-05-25 16:14:27,971 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:14:31,058 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.25', 'lxc config set core.https_address 138.4.31.25:8443']' returned non-zero exit status 255.
2025-05-25 16:14:31,058 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:31,059 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:31,059 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.25...
2025-05-25 16:14:31,156 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 16:14:38,464 - INFO - Orden recibida: configure_remote
2025-05-25 16:14:38,464 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:38,464 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:38,464 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:14:38,465 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-25 16:14:38,465 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:14:38,467 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es cuya IP: 138.4.31.22
2025-05-25 16:14:38,467 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:14:45,251 - INFO - Conectando al LXD remoto desde local
2025-05-25 16:14:45,680 - INFO - Configurando bridge remoto
2025-05-25 16:14:45,773 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'network', 'set', 'remoto:lxdbr0', 'ipv4.address', '134.3.0.1/24']' returned non-zero exit status 1.
2025-05-25 16:14:45,774 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:14:45,774 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:14:45,774 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.22...
2025-05-25 16:14:45,872 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 16:48:25,927 - INFO - Orden recibida: list
2025-05-25 16:48:25,927 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:48:25,928 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:48:25,928 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:48:25,928 - INFO - Listando contenedores
2025-05-25 16:48:25,951 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-25 16:49:53,532 - INFO - Orden recibida: configure_remote
2025-05-25 16:49:53,532 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:49:53,533 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:49:53,533 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:49:53,533 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-25 16:49:53,533 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 16:49:53,588 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-25 16:49:53,588 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:49:53,588 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:51:10,341 - INFO - Orden recibida: configure_remote
2025-05-25 16:51:10,341 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:51:10,341 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:51:10,341 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:51:10,341 - INFO - Desplegando base de datos remota en el equipo l022
2025-05-25 16:51:10,341 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 16:51:10,401 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-25 16:51:10,402 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:51:10,402 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:51:10,472 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-25 16:51:10,515 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-25 16:51:10,515 - INFO - Validación de configuración completada correctamente.
2025-05-25 16:51:10,515 - INFO - IP local detectada: 138.4.31.21
2025-05-25 16:51:10,517 - INFO - Nombre remoto detectado: l022.lab.dit.upm.es cuya IP: 138.4.31.22
2025-05-25 16:51:10,517 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 16:51:17,047 - INFO - Conectando al LXD remoto desde local
2025-05-25 16:51:17,264 - INFO - Configurando bridge remoto
2025-05-25 16:51:17,353 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'network', 'set', 'remoto:lxdbr0', 'ipv4.address', '134.3.0.1/24']' returned non-zero exit status 1.
2025-05-25 16:51:17,353 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:51:17,353 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:51:17,353 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.22...
2025-05-25 16:51:17,474 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 16:52:15,281 - INFO - Orden recibida: list
2025-05-25 16:52:15,281 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:52:15,281 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:52:15,281 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:52:15,281 - INFO - Listando contenedores
2025-05-25 16:52:15,310 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-25 16:52:23,743 - INFO - Orden recibida: enlarge
2025-05-25 16:52:23,743 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:52:23,743 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:52:23,743 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-25 16:52:23,743 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-25 16:52:23,743 - DEBUG - Comprobando estado de s1...
2025-05-25 16:52:23,759 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-25 16:52:23,759 - DEBUG - Verificando estado antes de detener s1
2025-05-25 16:52:28,026 - INFO - Contenedor parado: s1
2025-05-25 16:52:28,026 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-25 16:52:28,050 - INFO - La imagen servidor ya está disponible.
2025-05-25 16:52:28,050 - INFO - Buscando servidor libre para crear...
2025-05-25 16:52:28,051 - DEBUG - Verificando si existe el contenedor s1
2025-05-25 16:52:28,073 - DEBUG - Verificando si existe el contenedor s2
2025-05-25 16:52:28,085 - INFO - Creando nuevo servidor disponible: s2
2025-05-25 16:52:28,085 - DEBUG - Intentando crear el contenedor s2
2025-05-25 16:52:49,620 - INFO - Contenedor s2 creado con éxito.
2025-05-25 16:52:49,620 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-25 16:52:49,713 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-25 16:52:49,713 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-25 16:52:49,746 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-25 16:52:49,746 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-25 16:52:49,746 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:52:49,747 - INFO - Número de servidores 1 cargados correctamente.
2025-05-25 16:52:49,747 - INFO - Solicitado arrancar servidor: s2
2025-05-25 16:52:49,766 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-25 16:52:50,136 - INFO - Contenedor iniciado: s2
2025-05-25 16:52:51,377 - INFO - Servidor s2 corriendo correctamente.
2025-05-25 16:52:51,377 - INFO - Solicitado arrancar servidor: s1
2025-05-25 16:52:51,399 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-25 16:52:51,713 - INFO - Contenedor iniciado: s1
2025-05-25 16:52:55,222 - INFO - Servidor s1 corriendo correctamente.
2025-05-25 16:52:55,325 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-25 16:52:55,325 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-25 16:52:55,418 - DEBUG - Validando archivo haproxy.cfg
2025-05-25 16:52:55,863 - DEBUG - Iniciando servicio de haproxy
2025-05-25 16:52:56,132 - INFO - Haproxy instalado y configurado correctamente.
2025-05-25 16:52:56,132 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-25 16:52:56,134 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-25 16:52:56,134 - INFO - Nuevo número de servidores: 2
2025-05-25 16:53:17,680 - INFO - Orden recibida: delete
2025-05-25 16:53:17,680 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:53:17,681 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:53:17,681 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 16:53:17,681 - INFO - Eliminando toda la infraestructura
2025-05-25 16:53:17,681 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-25 16:53:17,753 - INFO - Imagen local eliminada con éxito.
2025-05-25 16:53:17,753 - DEBUG - Eliminando contenedor s1
2025-05-25 16:53:20,385 - INFO - Contenedor eliminado: s1
2025-05-25 16:53:20,385 - DEBUG - Eliminando contenedor s2
2025-05-25 16:53:23,074 - INFO - Contenedor eliminado: s2
2025-05-25 16:53:23,074 - DEBUG - Eliminando contenedor cl
2025-05-25 16:53:25,026 - INFO - Contenedor eliminado: cl
2025-05-25 16:53:25,026 - DEBUG - Eliminando contenedor lb
2025-05-25 16:53:27,127 - INFO - Contenedor eliminado: lb
2025-05-25 16:53:27,128 - DEBUG - Eliminando contenedor db
2025-05-25 16:53:29,008 - INFO - Contenedor eliminado: db
2025-05-25 16:53:29,008 - DEBUG - Contenedores eliminados correctamente
2025-05-25 16:53:29,009 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-25 16:53:29,352 - INFO - Bridge eliminado: lxdbr1
2025-05-25 16:53:29,352 - INFO - Eliminación completada.
2025-05-25 16:53:36,164 - INFO - Orden recibida: create
2025-05-25 16:53:36,165 - INFO - Número de servidores especificado: 2
2025-05-25 16:53:36,165 - INFO - Iniciando creación de infraestructura con 2 servidores
2025-05-25 16:53:36,165 - DEBUG - Parámetro recibido n_servers=2
2025-05-25 16:53:36,165 - DEBUG - Creando imagen base...
2025-05-25 16:53:36,165 - DEBUG - Verificando si la imagen ya está importada...
2025-05-25 16:53:36,183 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-25 16:53:39,777 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-25 16:53:39,777 - DEBUG - Configurando y creando bridges...
2025-05-25 16:53:39,806 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-25 16:53:39,867 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-25 16:53:39,867 - DEBUG - Creando bridge lxdbr1
2025-05-25 16:53:41,546 - INFO - Bridge creado: lxdbr1
2025-05-25 16:53:42,469 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-25 16:53:45,863 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-25 16:53:45,863 - DEBUG - Creando contenedores de servidores...
2025-05-25 16:53:45,863 - DEBUG - Intentando crear el contenedor s1
2025-05-25 16:53:55,633 - INFO - Contenedor s1 creado con éxito.
2025-05-25 16:53:55,633 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-25 16:53:55,679 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-25 16:53:55,679 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-25 16:53:55,710 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-25 16:53:55,710 - DEBUG - Intentando crear el contenedor s2
2025-05-25 16:54:05,884 - INFO - Contenedor s2 creado con éxito.
2025-05-25 16:54:05,885 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-25 16:54:05,969 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-25 16:54:05,969 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-25 16:54:06,128 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-25 16:54:06,129 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-25 16:54:06,130 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-25 16:54:06,131 - INFO - Número de servidores guardados correctamente
2025-05-25 16:54:06,131 - DEBUG - Creando balanceador...
2025-05-25 16:54:06,131 - DEBUG - Intentando crear el contenedor lb
2025-05-25 16:54:16,297 - INFO - Contenedor lb creado con éxito.
2025-05-25 16:54:16,297 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-25 16:54:16,546 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-25 16:54:16,547 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-25 16:54:16,644 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-25 16:54:16,644 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-25 16:54:16,728 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-25 16:54:16,728 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-25 16:54:16,805 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-25 16:54:16,805 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-25 16:54:17,264 - INFO - Contenedor iniciado: lb
2025-05-25 16:54:17,264 - DEBUG - Iniciando cambio de netplan en lb
2025-05-25 16:54:17,264 - DEBUG - Desactivando cloud-init en lb
2025-05-25 16:54:17,584 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-25 16:54:17,687 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-25 16:54:17,687 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-25 16:54:17,756 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-25 16:54:22,251 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-25 16:54:22,251 - DEBUG - Verificando estado antes de detener lb
2025-05-25 16:54:25,262 - INFO - Contenedor parado: lb
2025-05-25 16:54:25,262 - INFO - Balanceador configurado correctamente
2025-05-25 16:54:25,262 - DEBUG - Creando cliente...
2025-05-25 16:54:25,262 - DEBUG - Intentando crear el contenedor cl
2025-05-25 16:54:35,217 - INFO - Contenedor cl creado con éxito.
2025-05-25 16:54:35,217 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-25 16:54:35,347 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-25 16:54:35,347 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-25 16:54:35,402 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-25 16:54:35,402 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-25 16:54:35,884 - INFO - Contenedor iniciado: cl
2025-05-25 16:54:35,885 - DEBUG - Iniciando cambio de netplan en cl
2025-05-25 16:54:35,885 - DEBUG - Desactivando cloud-init en cl
2025-05-25 16:54:35,930 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-25 16:54:35,988 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-25 16:54:35,988 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-25 16:54:36,034 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-25 16:54:37,924 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-25 16:54:37,925 - DEBUG - Verificando estado antes de detener cl
2025-05-25 16:54:39,319 - INFO - Contenedor parado: cl
2025-05-25 16:54:39,320 - INFO - Cliente configurado correctamente
2025-05-25 16:54:39,320 - DEBUG - Intentando crear el contenedor db
2025-05-25 16:54:49,567 - INFO - Contenedor db creado con éxito.
2025-05-25 16:54:49,567 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-25 16:54:49,911 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-25 16:54:49,911 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-25 16:54:49,986 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-25 16:54:49,986 - INFO - Infraestructura creada correctamente.
2025-05-25 16:55:13,542 - INFO - Orden recibida: start
2025-05-25 16:55:13,542 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:13,543 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:13,543 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 16:55:13,543 - INFO - Iniciando todos los contenedores
2025-05-25 16:55:13,543 - DEBUG - Arrancando servidor: s1
2025-05-25 16:55:13,543 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-25 16:55:13,871 - INFO - Contenedor iniciado: s1
2025-05-25 16:55:13,931 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-25 16:55:13,931 - DEBUG - Arrancando servidor: s2
2025-05-25 16:55:13,931 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-25 16:55:14,189 - INFO - Contenedor iniciado: s2
2025-05-25 16:55:14,240 - DEBUG - No se encontró la app en s2, no se reinicia.
2025-05-25 16:55:14,240 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-25 16:55:14,815 - INFO - Contenedor iniciado: cl
2025-05-25 16:55:14,815 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-25 16:55:15,293 - INFO - Contenedor iniciado: lb
2025-05-25 16:55:15,294 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-25 16:55:15,711 - INFO - Contenedor iniciado: db
2025-05-25 16:55:15,711 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-25 16:55:15,713 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-25 16:55:15,716 - INFO - Consola del contenedor s2 abierta correctamente
2025-05-25 16:55:15,727 - INFO - Consola del contenedor cl abierta correctamente
2025-05-25 16:55:15,739 - INFO - Consola del contenedor lb abierta correctamente
2025-05-25 16:55:15,751 - INFO - Consola del contenedor db abierta correctamente
2025-05-25 16:55:31,886 - INFO - Orden recibida: configure_remote
2025-05-25 16:55:31,887 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:31,887 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:31,887 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 16:55:31,887 - INFO - Desplegando base de datos remota en el equipo l019
2025-05-25 16:55:31,887 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 16:55:31,979 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-05-25 16:55:31,979 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:31,979 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:32,028 - ERROR - La carpeta /root/app NO existe en el servidor s1.
2025-05-25 16:55:32,140 - ERROR - La carpeta /root/app NO existe en el servidor s2.
2025-05-25 16:55:32,183 - ERROR - El archivo haproxy.cfg NO existe en el contenedor de balanceador.
2025-05-25 16:55:32,183 - WARNING - Fallos detectados durante la validación de configuración.
2025-05-25 16:55:32,183 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-05-25 16:55:38,288 - INFO - Orden recibida: configure
2025-05-25 16:55:38,288 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:38,288 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:38,288 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 16:55:38,288 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:38,288 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:38,308 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 16:55:38,308 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 16:55:38,321 - INFO - Iniciando configuración de la infraestructura...
2025-05-25 16:55:38,321 - INFO - Configurando base de datos MongoDB en: db
2025-05-25 16:55:38,321 - INFO - Iniciando instalación de MongoDB en db
2025-05-25 16:55:53,693 - DEBUG - Instalando MongoDB
2025-05-25 16:56:40,658 - DEBUG - Modificando bind_ip de MongoDB
2025-05-25 16:56:40,764 - DEBUG - Reiniciando contenedor db
2025-05-25 16:56:45,360 - INFO - MongoDB configurado con éxito en db
2025-05-25 16:56:45,361 - INFO - Configuración de base de datos completada correctamente.
2025-05-25 16:56:45,361 - INFO - Configurando servidor web base s1
2025-05-25 16:56:45,361 - INFO - Iniciando configuración del servidor web s1
2025-05-25 16:56:45,361 - DEBUG - Actualizando paquetes en s1
2025-05-25 16:57:01,640 - DEBUG - Instalando Apache en s1
2025-05-25 16:57:30,985 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-25 16:57:31,342 - DEBUG - Transfiriendo aplicación web
2025-05-25 16:57:31,391 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-25 16:57:31,500 - DEBUG - Ejecutando instalación Node.js
2025-05-25 17:00:06,240 - DEBUG - Reiniciando servidor
2025-05-25 17:00:10,902 - DEBUG - Iniciando servidor Node.js con forever
2025-05-25 17:00:11,625 - INFO - Servidor web s1 configurado con éxito.
2025-05-25 17:00:11,625 - INFO - Creando imagen a partir del servidor base configurado
2025-05-25 17:00:11,625 - DEBUG - Comprobando estado de s1...
2025-05-25 17:00:11,643 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-25 17:00:11,643 - DEBUG - Verificando estado antes de detener s1
2025-05-25 17:00:13,178 - INFO - Contenedor parado: s1
2025-05-25 17:00:13,179 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-25 17:00:13,193 - INFO - La imagen servidor ya está disponible.
2025-05-25 17:00:13,193 - INFO - Creando s2 desde imagen
2025-05-25 17:00:13,193 - DEBUG - Eliminando contenedor s2
2025-05-25 17:00:14,864 - INFO - Contenedor eliminado: s2
2025-05-25 17:00:14,864 - DEBUG - Intentando crear el contenedor s2
2025-05-25 17:00:36,414 - INFO - Contenedor s2 creado con éxito.
2025-05-25 17:00:36,414 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-25 17:00:36,606 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-25 17:00:36,606 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-25 17:00:36,735 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-25 17:00:36,735 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-25 17:00:37,333 - INFO - Contenedor iniciado: s2
2025-05-25 17:00:38,468 - INFO - Iniciando el servidor s1
2025-05-25 17:00:38,469 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-25 17:00:38,695 - INFO - Contenedor iniciado: s1
2025-05-25 17:00:42,110 - INFO - Configurando balanceador lb
2025-05-25 17:00:42,111 - INFO - Instalando haproxy en el balanceador
2025-05-25 17:01:20,067 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-25 17:01:20,067 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-25 17:01:20,161 - DEBUG - Validando archivo haproxy.cfg
2025-05-25 17:01:20,256 - DEBUG - Iniciando servicio de haproxy
2025-05-25 17:01:20,461 - INFO - Haproxy instalado y configurado correctamente.
2025-05-25 17:01:20,461 - INFO - Balanceador configurado correctamente.
2025-05-25 17:02:11,284 - INFO - Orden recibida: list
2025-05-25 17:02:11,284 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:02:11,285 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:02:11,285 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 17:02:11,285 - INFO - Listando contenedores
2025-05-25 17:02:11,308 - DEBUG - Comando 'lxc list' ejecutado correctamente
2025-05-25 17:02:40,471 - INFO - Orden recibida: configure_remote
2025-05-25 17:02:40,471 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:02:40,471 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:02:40,472 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 17:02:40,472 - INFO - Desplegando base de datos remota en el equipo l014
2025-05-25 17:02:40,472 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 17:02:40,529 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-25 17:02:40,529 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:02:40,529 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:02:40,618 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-25 17:02:40,690 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-25 17:02:40,779 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-25 17:02:40,779 - INFO - Validación de configuración completada correctamente.
2025-05-25 17:02:40,784 - INFO - IP local detectada: 138.4.31.21
2025-05-25 17:02:40,800 - INFO - Nombre remoto detectado: l014.lab.dit.upm.es cuya IP: 138.4.31.14
2025-05-25 17:02:40,800 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 17:02:53,233 - INFO - Conectando al LXD remoto desde local
2025-05-25 17:02:53,619 - INFO - Configurando bridge remoto
2025-05-25 17:02:53,869 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-25 17:02:53,869 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:02:53,869 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:02:53,869 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.14...
2025-05-25 17:02:53,971 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 17:02:55,059 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.14...
2025-05-25 17:02:55,173 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 17:06:05,155 - INFO - Orden recibida: configure_remote
2025-05-25 17:06:05,155 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:06:05,155 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:06:05,155 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 17:06:05,155 - INFO - Desplegando base de datos remota en el equipo l020
2025-05-25 17:06:05,156 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 17:06:05,171 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-05-25 17:06:05,171 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:06:05,171 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:06:05,219 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-25 17:06:05,263 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-25 17:06:05,303 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-25 17:06:05,304 - WARNING - Fallos detectados durante la validación de configuración.
2025-05-25 17:06:05,304 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-05-25 17:06:20,388 - INFO - Orden recibida: configure_remote
2025-05-25 17:06:20,389 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:06:20,389 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:06:20,389 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 17:06:20,389 - INFO - Desplegando base de datos remota en el equipo l020
2025-05-25 17:06:20,389 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-25 17:06:20,447 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-25 17:06:20,448 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:06:20,448 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:06:20,494 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-25 17:06:20,547 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-25 17:06:20,588 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-25 17:06:20,588 - INFO - Validación de configuración completada correctamente.
2025-05-25 17:06:20,589 - INFO - IP local detectada: 138.4.31.21
2025-05-25 17:06:20,591 - INFO - Nombre remoto detectado: l020.lab.dit.upm.es cuya IP: 138.4.31.20
2025-05-25 17:06:20,591 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-25 17:06:31,164 - INFO - Conectando al LXD remoto desde local
2025-05-25 17:06:31,472 - INFO - Configurando bridge remoto
2025-05-25 17:06:32,710 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-25 17:06:32,710 - DEBUG - Verificando estado antes de detener db
2025-05-25 17:06:37,055 - INFO - Contenedor parado: db
2025-05-25 17:07:26,298 - INFO - Base de datos copiada al equipo remoto
2025-05-25 17:07:26,298 - INFO - Configurando proxy para acceso a MongoDB
2025-05-25 17:07:26,398 - INFO - Base de datos remota desplegada correctamente
2025-05-25 17:07:26,398 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:07:26,398 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:07:26,398 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.20...
2025-05-25 17:07:26,536 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 17:07:27,670 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.20...
2025-05-25 17:07:27,773 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-25 17:10:17,706 - INFO - Orden recibida: delete
2025-05-25 17:10:17,706 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-25 17:10:17,707 - INFO - Número de servidores 2 cargados correctamente.
2025-05-25 17:10:17,707 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-25 17:10:17,707 - INFO - Eliminando toda la infraestructura
2025-05-25 17:10:17,707 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-05-25 17:10:17,780 - INFO - Imagen local eliminada con éxito.
2025-05-25 17:10:17,780 - DEBUG - Eliminando contenedor s1
2025-05-25 17:10:20,524 - INFO - Contenedor eliminado: s1
2025-05-25 17:10:20,524 - DEBUG - Eliminando contenedor s2
2025-05-25 17:10:23,125 - INFO - Contenedor eliminado: s2
2025-05-25 17:10:23,125 - DEBUG - Eliminando contenedor cl
2025-05-25 17:10:25,059 - INFO - Contenedor eliminado: cl
2025-05-25 17:10:25,059 - DEBUG - Eliminando contenedor lb
2025-05-25 17:10:27,001 - INFO - Contenedor eliminado: lb
2025-05-25 17:10:27,002 - DEBUG - Eliminando contenedor db
2025-05-25 17:10:27,892 - INFO - Contenedor eliminado: db
2025-05-25 17:10:27,893 - DEBUG - Contenedores eliminados correctamente
2025-05-25 17:10:27,893 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-05-25 17:10:28,242 - INFO - Bridge eliminado: lxdbr1
2025-05-25 17:10:28,242 - INFO - Eliminación completada.
2025-05-26 09:02:38,829 - INFO - Orden recibida: create
2025-05-26 09:02:38,829 - INFO - Número de servidores especificado: 1
2025-05-26 09:02:38,829 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-26 09:02:38,830 - DEBUG - Parámetro recibido n_servers=1
2025-05-26 09:02:38,830 - DEBUG - Creando imagen base...
2025-05-26 09:02:38,830 - DEBUG - Verificando si la imagen ya está importada...
2025-05-26 09:02:40,221 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-26 09:02:46,658 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-26 09:02:46,658 - DEBUG - Configurando y creando bridges...
2025-05-26 09:02:47,579 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-26 09:02:51,104 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-26 09:02:51,104 - DEBUG - Creando bridge lxdbr1
2025-05-26 09:02:52,731 - INFO - Bridge creado: lxdbr1
2025-05-26 09:02:53,633 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-26 09:02:57,138 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-26 09:02:57,138 - DEBUG - Creando contenedores de servidores...
2025-05-26 09:02:57,138 - DEBUG - Intentando crear el contenedor s1
2025-05-26 09:03:08,248 - INFO - Contenedor s1 creado con éxito.
2025-05-26 09:03:08,248 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-26 09:03:08,313 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-26 09:03:08,313 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-26 09:03:08,373 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-26 09:03:08,374 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-26 09:03:08,376 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-26 09:03:08,376 - INFO - Número de servidores guardados correctamente
2025-05-26 09:03:08,376 - DEBUG - Creando balanceador...
2025-05-26 09:03:08,377 - DEBUG - Intentando crear el contenedor lb
2025-05-26 09:03:18,195 - INFO - Contenedor lb creado con éxito.
2025-05-26 09:03:18,195 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-26 09:03:18,244 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-26 09:03:18,244 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-26 09:03:18,284 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-26 09:03:18,284 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-26 09:03:18,356 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-26 09:03:18,356 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-26 09:03:18,410 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-26 09:03:18,411 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-26 09:03:18,973 - INFO - Contenedor iniciado: lb
2025-05-26 09:03:18,973 - DEBUG - Iniciando cambio de netplan en lb
2025-05-26 09:03:18,974 - DEBUG - Desactivando cloud-init en lb
2025-05-26 09:03:19,019 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-26 09:03:19,054 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-26 09:03:19,054 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-26 09:03:19,098 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-26 09:03:21,032 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-26 09:03:21,032 - DEBUG - Verificando estado antes de detener lb
2025-05-26 09:03:22,651 - INFO - Contenedor parado: lb
2025-05-26 09:03:22,651 - INFO - Balanceador configurado correctamente
2025-05-26 09:03:22,651 - DEBUG - Creando cliente...
2025-05-26 09:03:22,651 - DEBUG - Intentando crear el contenedor cl
2025-05-26 09:03:32,640 - INFO - Contenedor cl creado con éxito.
2025-05-26 09:03:32,640 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-26 09:03:32,845 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-26 09:03:32,848 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-26 09:03:33,351 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-26 09:03:33,351 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-26 09:03:33,842 - INFO - Contenedor iniciado: cl
2025-05-26 09:03:33,842 - DEBUG - Iniciando cambio de netplan en cl
2025-05-26 09:03:33,843 - DEBUG - Desactivando cloud-init en cl
2025-05-26 09:03:33,883 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-26 09:03:33,938 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-26 09:03:33,938 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-26 09:03:33,987 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-26 09:03:38,502 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-26 09:03:38,502 - DEBUG - Verificando estado antes de detener cl
2025-05-26 09:03:40,076 - INFO - Contenedor parado: cl
2025-05-26 09:03:40,077 - INFO - Cliente configurado correctamente
2025-05-26 09:03:40,077 - DEBUG - Intentando crear el contenedor db
2025-05-26 09:03:49,596 - INFO - Contenedor db creado con éxito.
2025-05-26 09:03:49,596 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-26 09:03:49,645 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-26 09:03:49,645 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-26 09:03:49,730 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-26 09:03:49,730 - INFO - Infraestructura creada correctamente.
2025-05-26 09:04:03,282 - INFO - Orden recibida: start
2025-05-26 09:04:03,283 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:04:03,283 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:04:03,283 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 09:04:03,283 - INFO - Iniciando todos los contenedores
2025-05-26 09:04:03,284 - DEBUG - Arrancando servidor: s1
2025-05-26 09:04:03,284 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 09:04:03,630 - INFO - Contenedor iniciado: s1
2025-05-26 09:04:03,699 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-26 09:04:03,699 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-26 09:04:04,063 - INFO - Contenedor iniciado: cl
2025-05-26 09:04:04,063 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-26 09:04:04,542 - INFO - Contenedor iniciado: lb
2025-05-26 09:04:04,542 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-26 09:04:04,924 - INFO - Contenedor iniciado: db
2025-05-26 09:04:04,924 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-26 09:04:04,951 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-26 09:04:04,955 - INFO - Consola del contenedor cl abierta correctamente
2025-05-26 09:04:04,957 - INFO - Consola del contenedor lb abierta correctamente
2025-05-26 09:04:04,968 - INFO - Consola del contenedor db abierta correctamente
2025-05-26 09:04:13,092 - INFO - Orden recibida: configure
2025-05-26 09:04:13,092 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:04:13,092 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:04:13,092 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 09:04:13,092 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:04:13,092 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:04:13,144 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:04:13,144 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:04:13,167 - INFO - Iniciando configuración de la infraestructura...
2025-05-26 09:04:13,167 - INFO - Configurando base de datos MongoDB en: db
2025-05-26 09:04:13,167 - INFO - Iniciando instalación de MongoDB en db
2025-05-26 09:04:28,373 - DEBUG - Instalando MongoDB
2025-05-26 09:04:53,046 - DEBUG - Modificando bind_ip de MongoDB
2025-05-26 09:04:53,083 - DEBUG - Reiniciando contenedor db
2025-05-26 09:04:55,139 - INFO - MongoDB configurado con éxito en db
2025-05-26 09:04:55,139 - INFO - Configuración de base de datos completada correctamente.
2025-05-26 09:04:55,139 - INFO - Configurando servidor web base s1
2025-05-26 09:04:55,139 - INFO - Iniciando configuración del servidor web s1
2025-05-26 09:04:55,139 - DEBUG - Actualizando paquetes en s1
2025-05-26 09:05:06,771 - DEBUG - Instalando Apache en s1
2025-05-26 09:05:35,576 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-26 09:05:35,671 - DEBUG - Transfiriendo aplicación web
2025-05-26 09:05:35,699 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-26 09:05:35,764 - DEBUG - Ejecutando instalación Node.js
2025-05-26 09:08:00,066 - DEBUG - Reiniciando servidor
2025-05-26 09:09:41,894 - DEBUG - Iniciando servidor Node.js con forever
2025-05-26 09:09:42,561 - INFO - Servidor web s1 configurado con éxito.
2025-05-26 09:09:42,561 - INFO - Creando imagen a partir del servidor base configurado
2025-05-26 09:09:42,561 - DEBUG - Comprobando estado de s1...
2025-05-26 09:09:42,586 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-26 09:09:42,586 - DEBUG - Verificando estado antes de detener s1
2025-05-26 09:09:44,089 - INFO - Contenedor parado: s1
2025-05-26 09:09:44,089 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-26 09:09:44,102 - INFO - La imagen servidor no existe. Se procederá crearla.
2025-05-26 09:09:44,102 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-26 09:11:23,644 - INFO - Imagen publicada correctamente.
2025-05-26 09:11:23,644 - INFO - Iniciando el servidor s1
2025-05-26 09:11:23,644 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 09:11:23,974 - INFO - Contenedor iniciado: s1
2025-05-26 09:11:25,439 - INFO - Configurando balanceador lb
2025-05-26 09:11:25,440 - INFO - Instalando haproxy en el balanceador
2025-05-26 09:11:51,658 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-26 09:11:51,658 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-26 09:11:51,710 - DEBUG - Validando archivo haproxy.cfg
2025-05-26 09:11:51,799 - DEBUG - Iniciando servicio de haproxy
2025-05-26 09:11:51,893 - INFO - Haproxy instalado y configurado correctamente.
2025-05-26 09:11:51,894 - INFO - Balanceador configurado correctamente.
2025-05-26 09:14:35,898 - INFO - Orden recibida: enlarge
2025-05-26 09:14:35,898 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:14:35,899 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:14:35,899 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 09:14:35,899 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-26 09:14:35,899 - DEBUG - Comprobando estado de s1...
2025-05-26 09:14:35,920 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-26 09:14:35,920 - DEBUG - Verificando estado antes de detener s1
2025-05-26 09:14:37,962 - INFO - Contenedor parado: s1
2025-05-26 09:14:37,963 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-26 09:14:37,977 - INFO - La imagen servidor ya está disponible.
2025-05-26 09:14:37,977 - INFO - Buscando servidor libre para crear...
2025-05-26 09:14:37,977 - DEBUG - Verificando si existe el contenedor s1
2025-05-26 09:14:37,995 - DEBUG - Verificando si existe el contenedor s2
2025-05-26 09:14:38,011 - INFO - Creando nuevo servidor disponible: s2
2025-05-26 09:14:38,011 - DEBUG - Intentando crear el contenedor s2
2025-05-26 09:15:06,557 - INFO - Contenedor s2 creado con éxito.
2025-05-26 09:15:06,557 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-05-26 09:15:06,671 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-05-26 09:15:06,672 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-05-26 09:15:06,736 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-05-26 09:15:06,736 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-05-26 09:15:06,736 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:15:06,736 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 09:15:06,736 - INFO - Solicitado arrancar servidor: s2
2025-05-26 09:15:06,754 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-05-26 09:15:07,117 - INFO - Contenedor iniciado: s2
2025-05-26 09:15:09,486 - INFO - Servidor s2 corriendo correctamente.
2025-05-26 09:15:09,486 - INFO - Solicitado arrancar servidor: s1
2025-05-26 09:15:09,518 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 09:15:09,953 - INFO - Contenedor iniciado: s1
2025-05-26 09:15:13,138 - INFO - Servidor s1 corriendo correctamente.
2025-05-26 09:15:13,217 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-26 09:15:13,217 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-26 09:15:13,457 - DEBUG - Validando archivo haproxy.cfg
2025-05-26 09:15:13,864 - DEBUG - Iniciando servicio de haproxy
2025-05-26 09:15:15,078 - INFO - Haproxy instalado y configurado correctamente.
2025-05-26 09:15:15,078 - DEBUG - Intentando guardar el número de servidores: 2
2025-05-26 09:15:15,079 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-05-26 09:15:15,079 - INFO - Nuevo número de servidores: 2
2025-05-26 09:16:42,642 - INFO - Orden recibida: enlarge
2025-05-26 09:16:42,642 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:16:42,643 - INFO - Número de servidores 2 cargados correctamente.
2025-05-26 09:16:42,643 - INFO - Se cargó número de servidores desde archivo: 2
2025-05-26 09:16:42,643 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-26 09:16:42,643 - DEBUG - Comprobando estado de s1...
2025-05-26 09:16:42,659 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-26 09:16:42,659 - DEBUG - Verificando estado antes de detener s1
2025-05-26 09:16:45,530 - INFO - Contenedor parado: s1
2025-05-26 09:16:45,530 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-26 09:16:45,545 - INFO - La imagen servidor ya está disponible.
2025-05-26 09:16:45,545 - INFO - Buscando servidor libre para crear...
2025-05-26 09:16:45,545 - DEBUG - Verificando si existe el contenedor s1
2025-05-26 09:16:45,560 - DEBUG - Verificando si existe el contenedor s2
2025-05-26 09:16:45,579 - DEBUG - Verificando si existe el contenedor s3
2025-05-26 09:16:45,591 - INFO - Creando nuevo servidor disponible: s3
2025-05-26 09:16:45,591 - DEBUG - Intentando crear el contenedor s3
2025-05-26 09:17:07,786 - INFO - Contenedor s3 creado con éxito.
2025-05-26 09:17:07,786 - DEBUG - Conectando s3 al bridge lxdbr0 usando eth0
2025-05-26 09:17:07,878 - INFO - Conectado s3 al bridge lxdbr0 por eth0
2025-05-26 09:17:07,878 - DEBUG - Configurando red para s3: iface=eth0, ip=134.3.0.13
2025-05-26 09:17:08,062 - INFO - Contenedor s3 conectado a eth0 con IP 134.3.0.13
2025-05-26 09:17:08,062 - INFO - Servidor s3 creado correctamente con IP 134.3.0.13 
2025-05-26 09:17:08,062 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:17:08,062 - INFO - Número de servidores 2 cargados correctamente.
2025-05-26 09:17:08,062 - INFO - Solicitado arrancar servidor: s3
2025-05-26 09:17:08,084 - DEBUG - Iniciando verificación de estado del contenedor s3
2025-05-26 09:17:08,564 - INFO - Contenedor iniciado: s3
2025-05-26 09:17:13,573 - INFO - Servidor s3 corriendo correctamente.
2025-05-26 09:17:13,574 - INFO - Solicitado arrancar servidor: s1
2025-05-26 09:17:13,591 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 09:17:14,066 - INFO - Contenedor iniciado: s1
2025-05-26 09:17:19,721 - INFO - Servidor s1 corriendo correctamente.
2025-05-26 09:17:19,825 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-26 09:17:19,825 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-26 09:17:19,920 - DEBUG - Validando archivo haproxy.cfg
2025-05-26 09:17:20,116 - DEBUG - Iniciando servicio de haproxy
2025-05-26 09:17:20,246 - INFO - Haproxy instalado y configurado correctamente.
2025-05-26 09:17:20,246 - DEBUG - Intentando guardar el número de servidores: 3
2025-05-26 09:17:20,253 - INFO - Número de servidores 3 guardados correctamente en static/files/num_serves.txt.
2025-05-26 09:17:20,253 - INFO - Nuevo número de servidores: 3
2025-05-26 09:17:47,876 - INFO - Orden recibida: configure_remote
2025-05-26 09:17:47,876 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:17:47,877 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:17:47,877 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-26 09:17:47,877 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-26 09:17:53,791 - INFO - Orden recibida: configure_remote
2025-05-26 09:17:53,791 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:17:53,791 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:17:53,792 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-26 09:17:53,792 - INFO - Desplegando base de datos remota en el equipo l999
2025-05-26 09:17:53,792 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 09:17:53,858 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 09:17:53,858 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:17:53,858 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:17:53,930 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 09:17:53,986 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-26 09:17:54,051 - INFO - La carpeta /root/app existe en el servidor s3.
2025-05-26 09:17:54,104 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 09:17:54,104 - INFO - Validación de configuración completada correctamente.
2025-05-26 09:17:54,105 - INFO - IP local detectada: 138.4.31.19
2025-05-26 09:17:54,136 - ERROR - No se pudo resolver el nombre l999: [Errno -5] No address associated with hostname
2025-05-26 09:17:54,136 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 09:17:54,218 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', 'None', 'lxc config set core.https_address None:8443']' returned non-zero exit status 255.
2025-05-26 09:17:54,218 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:17:54,218 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:17:54,218 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a None...
2025-05-26 09:17:54,351 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:17:55,522 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a None...
2025-05-26 09:17:55,651 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:17:56,911 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a None...
2025-05-26 09:17:57,013 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:18:39,522 - INFO - Orden recibida: configure_remote
2025-05-26 09:18:39,522 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:18:39,522 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:18:39,522 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-26 09:18:39,522 - INFO - Desplegando base de datos remota en el equipo l024
2025-05-26 09:18:39,522 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 09:18:39,590 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 09:18:39,590 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:18:39,591 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:18:39,679 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 09:18:39,726 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-26 09:18:39,798 - INFO - La carpeta /root/app existe en el servidor s3.
2025-05-26 09:18:39,843 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 09:18:39,843 - INFO - Validación de configuración completada correctamente.
2025-05-26 09:18:39,843 - INFO - IP local detectada: 138.4.31.19
2025-05-26 09:18:39,846 - INFO - Nombre remoto detectado: l024.lab.dit.upm.es cuya IP: 138.4.31.24
2025-05-26 09:18:39,846 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 09:18:52,234 - INFO - Conectando al LXD remoto desde local
2025-05-26 09:18:52,544 - INFO - Configurando bridge remoto
2025-05-26 09:18:53,601 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-26 09:18:53,601 - DEBUG - Verificando estado antes de detener db
2025-05-26 09:18:57,780 - INFO - Contenedor parado: db
2025-05-26 09:20:08,443 - INFO - Base de datos copiada al equipo remoto
2025-05-26 09:20:08,448 - INFO - Configurando proxy para acceso a MongoDB
2025-05-26 09:20:08,557 - INFO - Base de datos remota desplegada correctamente
2025-05-26 09:20:08,557 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:20:08,558 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:20:08,558 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.24...
2025-05-26 09:20:08,668 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:20:09,996 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.24...
2025-05-26 09:20:10,188 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:20:11,923 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.24...
2025-05-26 09:20:12,011 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:30:09,892 - INFO - Orden recibida: enlarge
2025-05-26 09:30:09,893 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:30:09,893 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:30:09,893 - INFO - Se cargó número de servidores desde archivo: 3
2025-05-26 09:30:09,893 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-05-26 09:30:09,893 - DEBUG - Comprobando estado de s1...
2025-05-26 09:30:09,934 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-26 09:30:09,935 - DEBUG - Verificando estado antes de detener s1
2025-05-26 09:30:14,533 - INFO - Contenedor parado: s1
2025-05-26 09:30:14,533 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-26 09:30:14,548 - INFO - La imagen servidor ya está disponible.
2025-05-26 09:30:14,548 - INFO - Buscando servidor libre para crear...
2025-05-26 09:30:14,548 - DEBUG - Verificando si existe el contenedor s1
2025-05-26 09:30:14,564 - DEBUG - Verificando si existe el contenedor s2
2025-05-26 09:30:14,581 - DEBUG - Verificando si existe el contenedor s3
2025-05-26 09:30:14,604 - DEBUG - Verificando si existe el contenedor s4
2025-05-26 09:30:14,615 - INFO - Creando nuevo servidor disponible: s4
2025-05-26 09:30:14,615 - DEBUG - Intentando crear el contenedor s4
2025-05-26 09:30:39,915 - INFO - Contenedor s4 creado con éxito.
2025-05-26 09:30:39,915 - DEBUG - Conectando s4 al bridge lxdbr0 usando eth0
2025-05-26 09:30:40,165 - INFO - Conectado s4 al bridge lxdbr0 por eth0
2025-05-26 09:30:40,166 - DEBUG - Configurando red para s4: iface=eth0, ip=134.3.0.14
2025-05-26 09:30:40,483 - INFO - Contenedor s4 conectado a eth0 con IP 134.3.0.14
2025-05-26 09:30:40,483 - INFO - Servidor s4 creado correctamente con IP 134.3.0.14 
2025-05-26 09:30:40,484 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:30:40,484 - INFO - Número de servidores 3 cargados correctamente.
2025-05-26 09:30:40,484 - INFO - Solicitado arrancar servidor: s4
2025-05-26 09:30:40,534 - DEBUG - Iniciando verificación de estado del contenedor s4
2025-05-26 09:30:40,872 - INFO - Contenedor iniciado: s4
2025-05-26 09:30:44,316 - INFO - Servidor s4 corriendo correctamente.
2025-05-26 09:30:44,316 - INFO - Solicitado arrancar servidor: s1
2025-05-26 09:30:44,334 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 09:30:44,951 - INFO - Contenedor iniciado: s1
2025-05-26 09:30:49,455 - INFO - Servidor s1 corriendo correctamente.
2025-05-26 09:30:49,601 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-26 09:30:49,601 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-26 09:30:49,730 - DEBUG - Validando archivo haproxy.cfg
2025-05-26 09:30:50,144 - DEBUG - Iniciando servicio de haproxy
2025-05-26 09:30:50,877 - INFO - Haproxy instalado y configurado correctamente.
2025-05-26 09:30:50,877 - DEBUG - Intentando guardar el número de servidores: 4
2025-05-26 09:30:50,879 - INFO - Número de servidores 4 guardados correctamente en static/files/num_serves.txt.
2025-05-26 09:30:50,879 - INFO - Nuevo número de servidores: 4
2025-05-26 09:35:27,553 - INFO - Orden recibida: configure_remote
2025-05-26 09:35:27,553 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:35:27,554 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:35:27,554 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-26 09:35:27,554 - INFO - Desplegando base de datos remota en el equipo l024
2025-05-26 09:35:27,554 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 09:35:27,583 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-05-26 09:35:27,583 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:35:27,584 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:35:27,693 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 09:35:27,760 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-26 09:35:27,848 - INFO - La carpeta /root/app existe en el servidor s3.
2025-05-26 09:35:27,899 - INFO - La carpeta /root/app existe en el servidor s4.
2025-05-26 09:35:27,956 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 09:35:27,957 - WARNING - Fallos detectados durante la validación de configuración.
2025-05-26 09:35:27,958 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-05-26 09:36:00,474 - INFO - Orden recibida: configure_remote
2025-05-26 09:36:00,474 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:36:00,474 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:36:00,474 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-26 09:36:00,474 - INFO - Desplegando base de datos remota en el equipo l024
2025-05-26 09:36:00,475 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 09:36:00,551 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 09:36:00,551 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:36:00,551 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:36:00,635 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 09:36:00,730 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-26 09:36:00,815 - INFO - La carpeta /root/app existe en el servidor s3.
2025-05-26 09:36:00,887 - INFO - La carpeta /root/app existe en el servidor s4.
2025-05-26 09:36:00,943 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 09:36:00,944 - INFO - Validación de configuración completada correctamente.
2025-05-26 09:36:00,944 - INFO - IP local detectada: 138.4.31.19
2025-05-26 09:36:00,952 - INFO - Nombre remoto detectado: l024.lab.dit.upm.es cuya IP: 138.4.31.24
2025-05-26 09:36:00,954 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 09:36:10,214 - INFO - Conectando al LXD remoto desde local
2025-05-26 09:36:10,438 - INFO - Configurando bridge remoto
2025-05-26 09:36:10,661 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-26 09:36:10,661 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:36:10,661 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:36:10,661 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.24...
2025-05-26 09:36:10,838 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:36:12,857 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.24...
2025-05-26 09:36:13,029 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:36:14,803 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.24...
2025-05-26 09:36:14,979 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:36:16,694 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s4 a 138.4.31.24...
2025-05-26 09:36:16,817 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:36:37,120 - INFO - Orden recibida: configure_remote
2025-05-26 09:36:37,120 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:36:37,120 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:36:37,120 - INFO - Se cargó número de servidores desde archivo: 4
2025-05-26 09:36:37,121 - INFO - Desplegando base de datos remota en el equipo l023
2025-05-26 09:36:37,121 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 09:36:37,202 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 09:36:37,203 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:36:37,203 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:36:37,238 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 09:36:37,320 - INFO - La carpeta /root/app existe en el servidor s2.
2025-05-26 09:36:37,399 - INFO - La carpeta /root/app existe en el servidor s3.
2025-05-26 09:36:37,468 - INFO - La carpeta /root/app existe en el servidor s4.
2025-05-26 09:36:37,547 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 09:36:37,548 - INFO - Validación de configuración completada correctamente.
2025-05-26 09:36:37,548 - INFO - IP local detectada: 138.4.31.19
2025-05-26 09:36:37,550 - INFO - Nombre remoto detectado: l023.lab.dit.upm.es cuya IP: 138.4.31.23
2025-05-26 09:36:37,550 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 09:36:51,866 - INFO - Conectando al LXD remoto desde local
2025-05-26 09:36:52,175 - INFO - Configurando bridge remoto
2025-05-26 09:36:53,371 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-26 09:36:53,371 - DEBUG - Verificando estado antes de detener db
2025-05-26 09:36:57,758 - INFO - Contenedor parado: db
2025-05-26 09:38:02,585 - INFO - Base de datos copiada al equipo remoto
2025-05-26 09:38:02,585 - INFO - Configurando proxy para acceso a MongoDB
2025-05-26 09:38:02,761 - INFO - Base de datos remota desplegada correctamente
2025-05-26 09:38:02,762 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 09:38:02,763 - INFO - Número de servidores 4 cargados correctamente.
2025-05-26 09:38:02,763 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.23...
2025-05-26 09:38:02,910 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:38:04,487 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.23...
2025-05-26 09:38:04,637 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:38:06,260 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s3 a 138.4.31.23...
2025-05-26 09:38:06,475 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 09:38:08,386 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s4 a 138.4.31.23...
2025-05-26 09:38:08,579 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 10:40:48,548 - INFO - Orden recibida: create
2025-05-26 10:40:48,548 - INFO - Número de servidores especificado: 1
2025-05-26 10:40:48,548 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-05-26 10:40:48,548 - DEBUG - Parámetro recibido n_servers=1
2025-05-26 10:40:48,548 - DEBUG - Creando imagen base...
2025-05-26 10:40:48,548 - DEBUG - Verificando si la imagen ya está importada...
2025-05-26 10:40:49,809 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-05-26 10:40:56,106 - INFO - Imagen ubuntu2004 importada con éxito.
2025-05-26 10:40:56,107 - DEBUG - Configurando y creando bridges...
2025-05-26 10:40:56,942 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-05-26 10:41:00,190 - INFO - Bridge configurado correctamente: lxdbr0
2025-05-26 10:41:00,191 - DEBUG - Creando bridge lxdbr1
2025-05-26 10:41:01,818 - INFO - Bridge creado: lxdbr1
2025-05-26 10:41:02,680 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-05-26 10:41:06,016 - INFO - Bridge configurado correctamente: lxdbr1
2025-05-26 10:41:06,016 - DEBUG - Creando contenedores de servidores...
2025-05-26 10:41:06,016 - DEBUG - Intentando crear el contenedor s1
2025-05-26 10:41:15,890 - INFO - Contenedor s1 creado con éxito.
2025-05-26 10:41:15,890 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-05-26 10:41:15,935 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-05-26 10:41:15,935 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-05-26 10:41:15,964 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-05-26 10:41:15,964 - DEBUG - Intentando guardar el número de servidores: 1
2025-05-26 10:41:15,966 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-05-26 10:41:15,966 - INFO - Número de servidores guardados correctamente
2025-05-26 10:41:15,966 - DEBUG - Creando balanceador...
2025-05-26 10:41:15,966 - DEBUG - Intentando crear el contenedor lb
2025-05-26 10:41:25,166 - INFO - Contenedor lb creado con éxito.
2025-05-26 10:41:25,166 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-05-26 10:41:25,247 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-05-26 10:41:25,247 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-05-26 10:41:25,302 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-05-26 10:41:25,302 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-05-26 10:41:25,458 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-05-26 10:41:25,459 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-05-26 10:41:25,560 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-05-26 10:41:25,560 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-26 10:41:26,346 - INFO - Contenedor iniciado: lb
2025-05-26 10:41:26,346 - DEBUG - Iniciando cambio de netplan en lb
2025-05-26 10:41:26,346 - DEBUG - Desactivando cloud-init en lb
2025-05-26 10:41:26,425 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-05-26 10:41:26,479 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-05-26 10:41:26,479 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-05-26 10:41:26,767 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-05-26 10:41:31,218 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-05-26 10:41:31,218 - DEBUG - Verificando estado antes de detener lb
2025-05-26 10:41:32,682 - INFO - Contenedor parado: lb
2025-05-26 10:41:32,682 - INFO - Balanceador configurado correctamente
2025-05-26 10:41:32,682 - DEBUG - Creando cliente...
2025-05-26 10:41:32,682 - DEBUG - Intentando crear el contenedor cl
2025-05-26 10:41:42,318 - INFO - Contenedor cl creado con éxito.
2025-05-26 10:41:42,318 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-05-26 10:41:42,390 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-05-26 10:41:42,390 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-05-26 10:41:42,429 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-05-26 10:41:42,429 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-26 10:41:42,900 - INFO - Contenedor iniciado: cl
2025-05-26 10:41:42,900 - DEBUG - Iniciando cambio de netplan en cl
2025-05-26 10:41:42,900 - DEBUG - Desactivando cloud-init en cl
2025-05-26 10:41:43,395 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-05-26 10:41:43,491 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-05-26 10:41:43,491 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-05-26 10:41:43,574 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-05-26 10:41:48,097 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-05-26 10:41:48,097 - DEBUG - Verificando estado antes de detener cl
2025-05-26 10:41:49,951 - INFO - Contenedor parado: cl
2025-05-26 10:41:49,951 - INFO - Cliente configurado correctamente
2025-05-26 10:41:49,951 - DEBUG - Intentando crear el contenedor db
2025-05-26 10:41:59,479 - INFO - Contenedor db creado con éxito.
2025-05-26 10:41:59,479 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-05-26 10:41:59,570 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-05-26 10:41:59,570 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-05-26 10:41:59,639 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-05-26 10:41:59,639 - INFO - Infraestructura creada correctamente.
2025-05-26 10:42:24,454 - INFO - Orden recibida: start
2025-05-26 10:42:24,454 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:24,455 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:24,455 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 10:42:24,455 - INFO - Iniciando todos los contenedores
2025-05-26 10:42:24,455 - DEBUG - Arrancando servidor: s1
2025-05-26 10:42:24,455 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 10:42:24,739 - INFO - Contenedor iniciado: s1
2025-05-26 10:42:24,797 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-05-26 10:42:24,797 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-05-26 10:42:25,177 - INFO - Contenedor iniciado: cl
2025-05-26 10:42:25,177 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-05-26 10:42:25,564 - INFO - Contenedor iniciado: lb
2025-05-26 10:42:25,564 - DEBUG - Iniciando verificación de estado del contenedor db
2025-05-26 10:42:25,896 - INFO - Contenedor iniciado: db
2025-05-26 10:42:25,896 - INFO - Todos los contenedores han sido iniciados correctamente
2025-05-26 10:42:25,901 - INFO - Consola del contenedor s1 abierta correctamente
2025-05-26 10:42:25,905 - INFO - Consola del contenedor cl abierta correctamente
2025-05-26 10:42:25,921 - INFO - Consola del contenedor lb abierta correctamente
2025-05-26 10:42:25,940 - INFO - Consola del contenedor db abierta correctamente
2025-05-26 10:42:36,756 - INFO - Orden recibida: configure_remote
2025-05-26 10:42:36,756 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:36,757 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:36,757 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 10:42:36,757 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-05-26 10:42:45,413 - INFO - Orden recibida: configure_remote
2025-05-26 10:42:45,414 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:45,414 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:45,414 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 10:42:45,414 - INFO - Desplegando base de datos remota en el equipo l014
2025-05-26 10:42:45,414 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 10:42:45,464 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-05-26 10:42:45,464 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:45,464 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:45,510 - ERROR - La carpeta /root/app NO existe en el servidor s1.
2025-05-26 10:42:45,538 - ERROR - El archivo haproxy.cfg NO existe en el contenedor de balanceador.
2025-05-26 10:42:45,539 - WARNING - Fallos detectados durante la validación de configuración.
2025-05-26 10:42:45,539 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-05-26 10:42:53,853 - INFO - Orden recibida: configure
2025-05-26 10:42:53,853 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:53,853 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:53,853 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 10:42:53,853 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:53,853 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:53,868 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:42:53,868 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:42:53,883 - INFO - Iniciando configuración de la infraestructura...
2025-05-26 10:42:53,883 - INFO - Configurando base de datos MongoDB en: db
2025-05-26 10:42:53,883 - INFO - Iniciando instalación de MongoDB en db
2025-05-26 10:43:08,485 - DEBUG - Instalando MongoDB
2025-05-26 10:43:48,619 - DEBUG - Modificando bind_ip de MongoDB
2025-05-26 10:43:48,663 - DEBUG - Reiniciando contenedor db
2025-05-26 10:43:53,056 - INFO - MongoDB configurado con éxito en db
2025-05-26 10:43:53,056 - INFO - Configuración de base de datos completada correctamente.
2025-05-26 10:43:53,056 - INFO - Configurando servidor web base s1
2025-05-26 10:43:53,056 - INFO - Iniciando configuración del servidor web s1
2025-05-26 10:43:53,056 - DEBUG - Actualizando paquetes en s1
2025-05-26 10:44:06,232 - DEBUG - Instalando Apache en s1
2025-05-26 10:44:36,802 - DEBUG - Transfiriendo script de instalación Node.js
2025-05-26 10:44:36,894 - DEBUG - Transfiriendo aplicación web
2025-05-26 10:44:36,909 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-05-26 10:44:36,996 - DEBUG - Ejecutando instalación Node.js
2025-05-26 10:47:00,337 - DEBUG - Reiniciando servidor
2025-05-26 10:47:04,888 - DEBUG - Iniciando servidor Node.js con forever
2025-05-26 10:47:05,609 - INFO - Servidor web s1 configurado con éxito.
2025-05-26 10:47:05,609 - INFO - Creando imagen a partir del servidor base configurado
2025-05-26 10:47:05,609 - DEBUG - Comprobando estado de s1...
2025-05-26 10:47:05,627 - INFO - Contenedor s1 está en ejecución. Parando...
2025-05-26 10:47:05,628 - DEBUG - Verificando estado antes de detener s1
2025-05-26 10:47:07,139 - INFO - Contenedor parado: s1
2025-05-26 10:47:07,139 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-05-26 10:47:07,155 - INFO - La imagen servidor no existe. Se procederá crearla.
2025-05-26 10:47:07,155 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-05-26 10:48:52,564 - INFO - Imagen publicada correctamente.
2025-05-26 10:48:52,565 - INFO - Iniciando el servidor s1
2025-05-26 10:48:52,565 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-05-26 10:48:52,929 - INFO - Contenedor iniciado: s1
2025-05-26 10:48:54,538 - INFO - Configurando balanceador lb
2025-05-26 10:48:54,538 - INFO - Instalando haproxy en el balanceador
2025-05-26 10:49:19,621 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-05-26 10:49:19,621 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-05-26 10:49:19,716 - DEBUG - Validando archivo haproxy.cfg
2025-05-26 10:49:19,798 - DEBUG - Iniciando servicio de haproxy
2025-05-26 10:49:19,904 - INFO - Haproxy instalado y configurado correctamente.
2025-05-26 10:49:19,904 - INFO - Balanceador configurado correctamente.
2025-05-26 10:57:52,058 - INFO - Orden recibida: configure_remote
2025-05-26 10:57:52,058 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:57:52,058 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:57:52,058 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 10:57:52,059 - INFO - Desplegando base de datos remota en el equipo l014
2025-05-26 10:57:52,059 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 10:57:52,111 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 10:57:52,112 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:57:52,112 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:57:52,173 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 10:57:52,254 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 10:57:52,254 - INFO - Validación de configuración completada correctamente.
2025-05-26 10:57:52,256 - INFO - IP local detectada: 138.4.31.13
2025-05-26 10:57:52,280 - INFO - Nombre remoto detectado: l014.lab.dit.upm.es cuya IP: 138.4.31.14
2025-05-26 10:57:52,280 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 10:58:07,970 - INFO - Conectando al LXD remoto desde local
2025-05-26 10:58:08,325 - INFO - Configurando bridge remoto
2025-05-26 10:58:08,378 - ERROR - Error durante el despliegue de la BBDD remota: Command '['lxc', 'network', 'set', 'remoto:lxdbr0', 'ipv4.address', '134.3.0.1/24']' returned non-zero exit status 1.
2025-05-26 10:58:08,378 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 10:58:08,378 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 10:58:08,378 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.14...
2025-05-26 10:58:08,561 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 11:01:16,530 - INFO - Orden recibida: configure_remote
2025-05-26 11:01:16,530 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:01:16,530 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:01:16,531 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 11:01:16,531 - INFO - Desplegando base de datos remota en el equipo l014
2025-05-26 11:01:16,531 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 11:01:16,585 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 11:01:16,586 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:01:16,586 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:01:16,669 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 11:01:16,715 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 11:01:16,715 - INFO - Validación de configuración completada correctamente.
2025-05-26 11:01:16,715 - INFO - IP local detectada: 138.4.31.13
2025-05-26 11:01:16,717 - INFO - Nombre remoto detectado: l014.lab.dit.upm.es cuya IP: 138.4.31.14
2025-05-26 11:01:16,717 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 11:01:54,989 - ERROR - Error durante el despliegue de la BBDD remota: Command '['ssh', '138.4.31.14', 'lxc config set core.trust_password mypass']' returned non-zero exit status 255.
2025-05-26 11:01:54,989 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:01:54,989 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:01:54,989 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.14...
2025-05-26 11:01:55,123 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 11:04:56,934 - INFO - Orden recibida: configure_remote
2025-05-26 11:04:56,934 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:04:56,935 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:04:56,935 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 11:04:56,935 - INFO - Desplegando base de datos remota en el equipo l015
2025-05-26 11:04:56,935 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 11:04:57,025 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 11:04:57,025 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:04:57,026 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:04:57,074 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 11:04:57,142 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 11:04:57,142 - INFO - Validación de configuración completada correctamente.
2025-05-26 11:04:57,142 - INFO - IP local detectada: 138.4.31.13
2025-05-26 11:04:57,145 - INFO - Nombre remoto detectado: l015.lab.dit.upm.es cuya IP: 138.4.31.15
2025-05-26 11:04:57,145 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 11:05:13,477 - INFO - Conectando al LXD remoto desde local
2025-05-26 11:05:13,720 - INFO - Configurando bridge remoto
2025-05-26 11:05:14,842 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-05-26 11:05:14,842 - DEBUG - Verificando estado antes de detener db
2025-05-26 11:05:19,081 - INFO - Contenedor parado: db
2025-05-26 11:06:14,305 - INFO - Base de datos copiada al equipo remoto
2025-05-26 11:06:14,305 - INFO - Configurando proxy para acceso a MongoDB
2025-05-26 11:06:14,421 - INFO - Base de datos remota desplegada correctamente
2025-05-26 11:06:14,422 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:06:14,422 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:06:14,422 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.15...
2025-05-26 11:06:14,551 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 11:30:59,367 - INFO - Orden recibida: configure_remote
2025-05-26 11:30:59,367 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:30:59,367 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:30:59,367 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 11:30:59,368 - INFO - Desplegando base de datos remota en el equipo l016
2025-05-26 11:30:59,368 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 11:30:59,408 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-05-26 11:30:59,408 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:30:59,408 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:30:59,457 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 11:30:59,505 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 11:30:59,505 - WARNING - Fallos detectados durante la validación de configuración.
2025-05-26 11:30:59,505 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-05-26 11:31:11,803 - INFO - Orden recibida: configure_remote
2025-05-26 11:31:11,804 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:31:11,804 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:31:11,804 - INFO - Se cargó número de servidores desde archivo: 1
2025-05-26 11:31:11,804 - INFO - Desplegando base de datos remota en el equipo l016
2025-05-26 11:31:11,804 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-05-26 11:31:11,873 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-05-26 11:31:11,873 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:31:11,873 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:31:11,985 - INFO - La carpeta /root/app existe en el servidor s1.
2025-05-26 11:31:12,029 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-05-26 11:31:12,029 - INFO - Validación de configuración completada correctamente.
2025-05-26 11:31:12,029 - INFO - IP local detectada: 138.4.31.13
2025-05-26 11:31:12,031 - INFO - Nombre remoto detectado: l016.lab.dit.upm.es cuya IP: 138.4.31.16
2025-05-26 11:31:12,031 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-05-26 11:31:24,323 - INFO - Conectando al LXD remoto desde local
2025-05-26 11:31:24,646 - INFO - Configurando bridge remoto
2025-05-26 11:31:24,986 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-05-26 11:31:24,986 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-05-26 11:31:24,986 - INFO - Número de servidores 1 cargados correctamente.
2025-05-26 11:31:24,986 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.16...
2025-05-26 11:31:25,123 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-05-26 11:31:25,123 - DEBUG - Reiniciando contenedor s1
2025-06-02 08:52:26,340 - INFO - Orden recibida: create
2025-06-02 08:52:26,340 - INFO - Número de servidores especificado: 1
2025-06-02 08:52:26,340 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-06-02 08:52:26,340 - DEBUG - Parámetro recibido n_servers=1
2025-06-02 08:52:26,340 - DEBUG - Creando imagen base...
2025-06-02 08:52:26,340 - DEBUG - Verificando si la imagen ya está importada...
2025-06-02 08:52:26,359 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-06-02 08:52:32,451 - INFO - Imagen ubuntu2004 importada con éxito.
2025-06-02 08:52:32,451 - DEBUG - Configurando y creando bridges...
2025-06-02 08:52:33,199 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-06-02 08:52:36,386 - INFO - Bridge configurado correctamente: lxdbr0
2025-06-02 08:52:36,386 - DEBUG - Creando bridge lxdbr1
2025-06-02 08:52:37,995 - INFO - Bridge creado: lxdbr1
2025-06-02 08:52:38,824 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-06-02 08:52:42,188 - INFO - Bridge configurado correctamente: lxdbr1
2025-06-02 08:52:42,188 - DEBUG - Creando contenedores de servidores...
2025-06-02 08:52:42,188 - DEBUG - Intentando crear el contenedor s1
2025-06-02 08:52:48,374 - INFO - Contenedor s1 creado con éxito.
2025-06-02 08:52:48,374 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-06-02 08:52:48,416 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-06-02 08:52:48,416 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-06-02 08:52:48,452 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-06-02 08:52:48,452 - DEBUG - Intentando guardar el número de servidores: 1
2025-06-02 08:52:48,454 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-06-02 08:52:48,454 - INFO - Número de servidores guardados correctamente
2025-06-02 08:52:48,454 - DEBUG - Creando balanceador...
2025-06-02 08:52:48,454 - DEBUG - Intentando crear el contenedor lb
2025-06-02 08:52:54,587 - INFO - Contenedor lb creado con éxito.
2025-06-02 08:52:54,588 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-06-02 08:52:54,615 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-06-02 08:52:54,615 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-06-02 08:52:54,645 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-06-02 08:52:54,645 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-06-02 08:52:54,698 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-06-02 08:52:54,698 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-06-02 08:52:54,730 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-06-02 08:52:54,730 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 08:52:55,117 - INFO - Contenedor iniciado: lb
2025-06-02 08:52:55,117 - DEBUG - Iniciando cambio de netplan en lb
2025-06-02 08:52:55,118 - DEBUG - Desactivando cloud-init en lb
2025-06-02 08:52:55,172 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-06-02 08:52:55,205 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-06-02 08:52:55,205 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-06-02 08:52:55,221 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-06-02 08:52:56,662 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-06-02 08:52:56,662 - DEBUG - Verificando estado antes de detener lb
2025-06-02 08:52:57,887 - INFO - Contenedor parado: lb
2025-06-02 08:52:57,887 - INFO - Balanceador configurado correctamente
2025-06-02 08:52:57,887 - DEBUG - Creando cliente...
2025-06-02 08:52:57,888 - DEBUG - Intentando crear el contenedor cl
2025-06-02 08:53:03,985 - INFO - Contenedor cl creado con éxito.
2025-06-02 08:53:03,985 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-06-02 08:53:04,020 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-06-02 08:53:04,021 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-06-02 08:53:04,054 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-06-02 08:53:04,055 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 08:53:04,489 - INFO - Contenedor iniciado: cl
2025-06-02 08:53:04,489 - DEBUG - Iniciando cambio de netplan en cl
2025-06-02 08:53:04,489 - DEBUG - Desactivando cloud-init en cl
2025-06-02 08:53:04,537 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-06-02 08:53:04,569 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-06-02 08:53:04,570 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-06-02 08:53:04,587 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-06-02 08:53:06,053 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-06-02 08:53:06,053 - DEBUG - Verificando estado antes de detener cl
2025-06-02 08:53:07,248 - INFO - Contenedor parado: cl
2025-06-02 08:53:07,249 - INFO - Cliente configurado correctamente
2025-06-02 08:53:07,249 - DEBUG - Intentando crear el contenedor db
2025-06-02 08:53:13,443 - INFO - Contenedor db creado con éxito.
2025-06-02 08:53:13,443 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-06-02 08:53:13,491 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-06-02 08:53:13,491 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-06-02 08:53:13,526 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-06-02 08:53:13,527 - INFO - Infraestructura creada correctamente.
2025-06-02 08:53:27,614 - INFO - Orden recibida: start
2025-06-02 08:53:27,614 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 08:53:27,615 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 08:53:27,615 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 08:53:27,615 - INFO - Iniciando todos los contenedores
2025-06-02 08:53:27,615 - DEBUG - Arrancando servidor: s1
2025-06-02 08:53:27,615 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 08:53:27,948 - INFO - Contenedor iniciado: s1
2025-06-02 08:53:27,995 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-06-02 08:53:27,995 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 08:53:28,369 - INFO - Contenedor iniciado: cl
2025-06-02 08:53:28,369 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 08:53:28,753 - INFO - Contenedor iniciado: lb
2025-06-02 08:53:28,753 - DEBUG - Iniciando verificación de estado del contenedor db
2025-06-02 08:53:28,972 - INFO - Contenedor iniciado: db
2025-06-02 08:53:28,972 - INFO - Todos los contenedores han sido iniciados correctamente
2025-06-02 08:53:29,015 - INFO - Consola del contenedor s1 abierta correctamente
2025-06-02 08:53:29,016 - INFO - Consola del contenedor cl abierta correctamente
2025-06-02 08:53:29,017 - INFO - Consola del contenedor lb abierta correctamente
2025-06-02 08:53:29,019 - INFO - Consola del contenedor db abierta correctamente
2025-06-02 08:54:00,038 - INFO - Orden recibida: configure
2025-06-02 08:54:00,038 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 08:54:00,038 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 08:54:00,038 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 08:54:00,038 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 08:54:00,038 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 08:54:00,049 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 08:54:00,049 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 08:54:00,064 - INFO - Iniciando configuración de la infraestructura...
2025-06-02 08:54:00,064 - INFO - Configurando base de datos MongoDB en: db
2025-06-02 08:54:00,064 - INFO - Iniciando instalación de MongoDB en db
2025-06-02 08:54:09,349 - DEBUG - Instalando MongoDB
2025-06-02 08:54:19,438 - DEBUG - Modificando bind_ip de MongoDB
2025-06-02 08:54:19,484 - DEBUG - Reiniciando contenedor db
2025-06-02 08:54:21,136 - INFO - MongoDB configurado con éxito en db
2025-06-02 08:54:21,136 - INFO - Configuración de base de datos completada correctamente.
2025-06-02 08:54:21,136 - INFO - Configurando servidor web base s1
2025-06-02 08:54:21,137 - INFO - Iniciando configuración del servidor web s1
2025-06-02 08:54:21,137 - DEBUG - Actualizando paquetes en s1
2025-06-02 08:54:29,739 - DEBUG - Instalando Apache en s1
2025-06-02 08:54:36,378 - DEBUG - Transfiriendo script de instalación Node.js
2025-06-02 08:54:36,467 - DEBUG - Transfiriendo aplicación web
2025-06-02 08:54:36,499 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-06-02 08:54:36,587 - DEBUG - Ejecutando instalación Node.js
2025-06-02 08:55:43,945 - DEBUG - Reiniciando servidor
2025-06-02 08:55:45,512 - DEBUG - Iniciando servidor Node.js con forever
2025-06-02 08:55:45,710 - INFO - Servidor web s1 configurado con éxito.
2025-06-02 08:55:45,710 - INFO - Creando imagen a partir del servidor base configurado
2025-06-02 08:55:45,710 - DEBUG - Comprobando estado de s1...
2025-06-02 08:55:45,722 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 08:55:45,722 - DEBUG - Verificando estado antes de detener s1
2025-06-02 08:55:46,828 - INFO - Contenedor parado: s1
2025-06-02 08:55:46,828 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 08:55:46,839 - INFO - La imagen servidor no existe. Se procederá crearla.
2025-06-02 08:55:46,839 - INFO - Publicando imagen del contenedor s1 con alias 'servidor'...
2025-06-02 08:56:55,551 - INFO - Imagen publicada correctamente.
2025-06-02 08:56:55,552 - INFO - Iniciando el servidor s1
2025-06-02 08:56:55,552 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 08:56:55,792 - INFO - Contenedor iniciado: s1
2025-06-02 08:56:56,243 - INFO - Configurando balanceador lb
2025-06-02 08:56:56,243 - INFO - Instalando haproxy en el balanceador
2025-06-02 08:57:12,596 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 08:57:12,596 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 08:57:12,664 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 08:57:12,701 - DEBUG - Iniciando servicio de haproxy
2025-06-02 08:57:12,772 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 08:57:12,772 - INFO - Balanceador configurado correctamente.
2025-06-02 09:00:46,707 - INFO - Orden recibida: configure_remote
2025-06-02 09:00:46,707 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:00:46,708 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:00:46,708 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 09:00:46,708 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-06-02 09:00:53,610 - INFO - Orden recibida: configure_remote
2025-06-02 09:00:53,610 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:00:53,610 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:00:53,610 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 09:00:53,610 - INFO - Desplegando base de datos remota en el equipo l076
2025-06-02 09:00:53,610 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 09:00:53,667 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 09:00:53,667 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:00:53,667 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:00:53,686 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 09:00:53,699 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 09:00:53,699 - INFO - Validación de configuración completada correctamente.
2025-06-02 09:00:53,699 - INFO - IP local detectada: 138.4.31.75
2025-06-02 09:00:53,701 - INFO - Nombre remoto detectado: l076.lab.dit.upm.es cuya IP: 138.4.31.76
2025-06-02 09:00:53,701 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 09:01:06,747 - INFO - Conectando al LXD remoto desde local
2025-06-02 09:01:06,984 - INFO - Configurando bridge remoto
2025-06-02 09:01:07,196 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 09:01:07,196 - DEBUG - Verificando estado antes de detener db
2025-06-02 09:01:08,777 - INFO - Contenedor parado: db
2025-06-02 09:01:33,302 - INFO - Base de datos copiada al equipo remoto
2025-06-02 09:01:33,302 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 09:01:33,374 - INFO - Base de datos remota desplegada correctamente
2025-06-02 09:01:33,374 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:01:33,374 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:01:33,374 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.76...
2025-06-02 09:01:33,427 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 09:01:33,427 - DEBUG - Reiniciando contenedor s1
2025-06-02 09:58:33,551 - INFO - Orden recibida: configure_remote
2025-06-02 09:58:33,552 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:58:33,552 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:58:33,552 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 09:58:33,552 - INFO - Desplegando base de datos remota en el equipo l077
2025-06-02 09:58:33,552 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 09:58:33,564 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-06-02 09:58:33,564 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:58:33,564 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:58:33,619 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 09:58:33,650 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 09:58:33,650 - WARNING - Fallos detectados durante la validación de configuración.
2025-06-02 09:58:33,650 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-06-02 09:58:53,653 - INFO - Orden recibida: configure_remote
2025-06-02 09:58:53,653 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:58:53,653 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:58:53,653 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 09:58:53,653 - INFO - Desplegando base de datos remota en el equipo l077
2025-06-02 09:58:53,653 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 09:58:53,673 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 09:58:53,673 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:58:53,673 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:58:53,690 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 09:58:53,705 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 09:58:53,705 - INFO - Validación de configuración completada correctamente.
2025-06-02 09:58:53,705 - INFO - IP local detectada: 138.4.31.75
2025-06-02 09:58:53,707 - INFO - Nombre remoto detectado: l077.lab.dit.upm.es cuya IP: 138.4.31.77
2025-06-02 09:58:53,707 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 09:59:04,875 - INFO - Conectando al LXD remoto desde local
2025-06-02 09:59:05,118 - INFO - Configurando bridge remoto
2025-06-02 09:59:05,289 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 09:59:05,289 - DEBUG - Verificando estado antes de detener db
2025-06-02 09:59:06,830 - INFO - Contenedor parado: db
2025-06-02 09:59:33,060 - INFO - Base de datos copiada al equipo remoto
2025-06-02 09:59:33,060 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 09:59:33,150 - INFO - Base de datos remota desplegada correctamente
2025-06-02 09:59:33,150 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 09:59:33,150 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 09:59:33,150 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.77...
2025-06-02 09:59:33,306 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 09:59:33,306 - DEBUG - Reiniciando contenedor s1
2025-06-02 10:43:01,635 - INFO - Orden recibida: enlarge
2025-06-02 10:43:01,635 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:43:01,636 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:43:01,636 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 10:43:01,636 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-06-02 10:43:01,636 - DEBUG - Comprobando estado de s1...
2025-06-02 10:43:01,655 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 10:43:01,655 - DEBUG - Verificando estado antes de detener s1
2025-06-02 10:43:05,828 - INFO - Contenedor parado: s1
2025-06-02 10:43:05,828 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 10:43:05,828 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 10:43:05,892 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 10:44:18,152 - INFO - Imagen publicada correctamente.
2025-06-02 10:44:18,152 - INFO - Buscando servidor libre para crear...
2025-06-02 10:44:18,152 - DEBUG - Verificando si existe el contenedor s1
2025-06-02 10:44:18,161 - DEBUG - Verificando si existe el contenedor s2
2025-06-02 10:44:18,168 - INFO - Creando nuevo servidor disponible: s2
2025-06-02 10:44:18,168 - DEBUG - Intentando crear el contenedor s2
2025-06-02 10:44:31,364 - INFO - Contenedor s2 creado con éxito.
2025-06-02 10:44:31,364 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-06-02 10:44:31,408 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-06-02 10:44:31,408 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-06-02 10:44:31,444 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-06-02 10:44:31,444 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-06-02 10:44:31,444 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:44:31,445 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:44:31,445 - INFO - Solicitado arrancar servidor: s2
2025-06-02 10:44:31,464 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-06-02 10:44:31,763 - INFO - Contenedor iniciado: s2
2025-06-02 10:44:32,168 - INFO - Servidor s2 corriendo correctamente.
2025-06-02 10:44:32,168 - INFO - Solicitado arrancar servidor: s1
2025-06-02 10:44:32,177 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 10:44:32,398 - INFO - Contenedor iniciado: s1
2025-06-02 10:44:32,816 - INFO - Servidor s1 corriendo correctamente.
2025-06-02 10:44:32,853 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 10:44:32,853 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 10:44:32,868 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 10:44:32,884 - DEBUG - Iniciando servicio de haproxy
2025-06-02 10:44:32,921 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 10:44:32,922 - DEBUG - Intentando guardar el número de servidores: 2
2025-06-02 10:44:32,923 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-06-02 10:44:32,923 - INFO - Nuevo número de servidores: 2
2025-06-02 10:48:20,061 - INFO - Orden recibida: delete
2025-06-02 10:48:20,061 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:48:20,061 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 10:48:20,061 - INFO - Se cargó número de servidores desde archivo: 2
2025-06-02 10:48:20,061 - INFO - Eliminando toda la infraestructura
2025-06-02 10:48:20,061 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-06-02 10:48:20,107 - INFO - Imagen ubuntu2004 eliminada con éxito.
2025-06-02 10:48:20,107 - DEBUG - Intentando eliminar la imagen servidor...
2025-06-02 10:48:20,167 - INFO - Imagen servidor eliminada con éxito.
2025-06-02 10:48:20,167 - DEBUG - Eliminando contenedor s1
2025-06-02 10:48:21,928 - INFO - Contenedor eliminado: s1
2025-06-02 10:48:21,928 - DEBUG - Eliminando contenedor s2
2025-06-02 10:48:23,636 - INFO - Contenedor eliminado: s2
2025-06-02 10:48:23,636 - DEBUG - Eliminando contenedor cl
2025-06-02 10:48:25,112 - INFO - Contenedor eliminado: cl
2025-06-02 10:48:25,112 - DEBUG - Eliminando contenedor lb
2025-06-02 10:48:26,764 - INFO - Contenedor eliminado: lb
2025-06-02 10:48:26,764 - DEBUG - Eliminando contenedor db
2025-06-02 10:48:27,176 - INFO - Contenedor eliminado: db
2025-06-02 10:48:27,176 - DEBUG - Contenedores eliminados correctamente
2025-06-02 10:48:27,176 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-06-02 10:48:27,473 - INFO - Bridge eliminado: lxdbr1
2025-06-02 10:48:27,473 - INFO - Eliminación completada.
2025-06-02 10:49:09,855 - INFO - Orden recibida: create
2025-06-02 10:49:09,855 - INFO - Número de servidores especificado: 1
2025-06-02 10:49:09,855 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-06-02 10:49:09,855 - DEBUG - Parámetro recibido n_servers=1
2025-06-02 10:49:09,855 - DEBUG - Creando imagen base...
2025-06-02 10:49:09,855 - DEBUG - Verificando si la imagen ya está importada...
2025-06-02 10:49:09,864 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-06-02 10:49:11,116 - INFO - Imagen ubuntu2004 importada con éxito.
2025-06-02 10:49:11,116 - DEBUG - Configurando y creando bridges...
2025-06-02 10:49:11,133 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-06-02 10:49:11,195 - INFO - Bridge configurado correctamente: lxdbr0
2025-06-02 10:49:11,195 - DEBUG - Creando bridge lxdbr1
2025-06-02 10:49:12,808 - INFO - Bridge creado: lxdbr1
2025-06-02 10:49:13,627 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-06-02 10:49:16,860 - INFO - Bridge configurado correctamente: lxdbr1
2025-06-02 10:49:16,860 - DEBUG - Creando contenedores de servidores...
2025-06-02 10:49:16,860 - DEBUG - Intentando crear el contenedor s1
2025-06-02 10:49:23,010 - INFO - Contenedor s1 creado con éxito.
2025-06-02 10:49:23,011 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-06-02 10:49:23,039 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-06-02 10:49:23,039 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-06-02 10:49:23,066 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-06-02 10:49:23,066 - DEBUG - Intentando guardar el número de servidores: 1
2025-06-02 10:49:23,068 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-06-02 10:49:23,068 - INFO - Número de servidores guardados correctamente
2025-06-02 10:49:23,068 - DEBUG - Creando balanceador...
2025-06-02 10:49:23,068 - DEBUG - Intentando crear el contenedor lb
2025-06-02 10:49:29,272 - INFO - Contenedor lb creado con éxito.
2025-06-02 10:49:29,272 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-06-02 10:49:29,320 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-06-02 10:49:29,320 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-06-02 10:49:29,353 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-06-02 10:49:29,354 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-06-02 10:49:29,407 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-06-02 10:49:29,407 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-06-02 10:49:29,443 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-06-02 10:49:29,443 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 10:49:29,828 - INFO - Contenedor iniciado: lb
2025-06-02 10:49:29,828 - DEBUG - Iniciando cambio de netplan en lb
2025-06-02 10:49:29,828 - DEBUG - Desactivando cloud-init en lb
2025-06-02 10:49:29,885 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-06-02 10:49:29,917 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-06-02 10:49:29,917 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-06-02 10:49:29,934 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-06-02 10:49:31,479 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-06-02 10:49:31,480 - DEBUG - Verificando estado antes de detener lb
2025-06-02 10:49:32,745 - INFO - Contenedor parado: lb
2025-06-02 10:49:32,745 - INFO - Balanceador configurado correctamente
2025-06-02 10:49:32,745 - DEBUG - Creando cliente...
2025-06-02 10:49:32,745 - DEBUG - Intentando crear el contenedor cl
2025-06-02 10:49:38,824 - INFO - Contenedor cl creado con éxito.
2025-06-02 10:49:38,824 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-06-02 10:49:38,863 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-06-02 10:49:38,864 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-06-02 10:49:38,897 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-06-02 10:49:38,897 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 10:49:39,319 - INFO - Contenedor iniciado: cl
2025-06-02 10:49:39,320 - DEBUG - Iniciando cambio de netplan en cl
2025-06-02 10:49:39,320 - DEBUG - Desactivando cloud-init en cl
2025-06-02 10:49:39,370 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-06-02 10:49:39,399 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-06-02 10:49:39,399 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-06-02 10:49:39,416 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-06-02 10:49:40,904 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-06-02 10:49:40,905 - DEBUG - Verificando estado antes de detener cl
2025-06-02 10:49:42,158 - INFO - Contenedor parado: cl
2025-06-02 10:49:42,158 - INFO - Cliente configurado correctamente
2025-06-02 10:49:42,158 - DEBUG - Intentando crear el contenedor db
2025-06-02 10:49:48,291 - INFO - Contenedor db creado con éxito.
2025-06-02 10:49:48,291 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-06-02 10:49:48,330 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-06-02 10:49:48,330 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-06-02 10:49:48,345 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-06-02 10:49:48,345 - INFO - Infraestructura creada correctamente.
2025-06-02 10:49:54,599 - INFO - Orden recibida: start
2025-06-02 10:49:54,599 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:49:54,600 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:49:54,600 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 10:49:54,600 - INFO - Iniciando todos los contenedores
2025-06-02 10:49:54,600 - DEBUG - Arrancando servidor: s1
2025-06-02 10:49:54,600 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 10:49:54,918 - INFO - Contenedor iniciado: s1
2025-06-02 10:49:54,955 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-06-02 10:49:54,955 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 10:49:55,293 - INFO - Contenedor iniciado: cl
2025-06-02 10:49:55,293 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 10:49:55,661 - INFO - Contenedor iniciado: lb
2025-06-02 10:49:55,661 - DEBUG - Iniciando verificación de estado del contenedor db
2025-06-02 10:49:55,853 - INFO - Contenedor iniciado: db
2025-06-02 10:49:55,853 - INFO - Todos los contenedores han sido iniciados correctamente
2025-06-02 10:49:55,854 - INFO - Consola del contenedor s1 abierta correctamente
2025-06-02 10:49:55,854 - INFO - Consola del contenedor cl abierta correctamente
2025-06-02 10:49:55,855 - INFO - Consola del contenedor lb abierta correctamente
2025-06-02 10:49:55,856 - INFO - Consola del contenedor db abierta correctamente
2025-06-02 10:50:02,704 - INFO - Orden recibida: configure
2025-06-02 10:50:02,704 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:50:02,704 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:50:02,704 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 10:50:02,704 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:50:02,704 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:50:02,714 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:50:02,714 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:50:02,728 - INFO - Iniciando configuración de la infraestructura...
2025-06-02 10:50:02,728 - INFO - Configurando base de datos MongoDB en: db
2025-06-02 10:50:02,728 - INFO - Iniciando instalación de MongoDB en db
2025-06-02 10:50:13,375 - DEBUG - Instalando MongoDB
2025-06-02 10:50:23,335 - DEBUG - Modificando bind_ip de MongoDB
2025-06-02 10:50:23,397 - DEBUG - Reiniciando contenedor db
2025-06-02 10:50:25,092 - INFO - MongoDB configurado con éxito en db
2025-06-02 10:50:25,092 - INFO - Configuración de base de datos completada correctamente.
2025-06-02 10:50:25,092 - INFO - Configurando servidor web base s1
2025-06-02 10:50:25,092 - INFO - Iniciando configuración del servidor web s1
2025-06-02 10:50:25,093 - DEBUG - Actualizando paquetes en s1
2025-06-02 10:50:35,977 - DEBUG - Instalando Apache en s1
2025-06-02 10:50:43,928 - DEBUG - Transfiriendo script de instalación Node.js
2025-06-02 10:50:44,037 - DEBUG - Transfiriendo aplicación web
2025-06-02 10:50:44,047 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-06-02 10:50:44,075 - DEBUG - Ejecutando instalación Node.js
2025-06-02 10:51:53,237 - DEBUG - Reiniciando servidor
2025-06-02 10:51:55,003 - DEBUG - Iniciando servidor Node.js con forever
2025-06-02 10:51:55,239 - INFO - Servidor web s1 configurado con éxito.
2025-06-02 10:51:55,239 - INFO - Creando imagen a partir del servidor base configurado
2025-06-02 10:51:55,239 - DEBUG - Comprobando estado de s1...
2025-06-02 10:51:55,249 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 10:51:55,249 - DEBUG - Verificando estado antes de detener s1
2025-06-02 10:51:56,357 - INFO - Contenedor parado: s1
2025-06-02 10:51:56,357 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 10:51:56,357 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 10:51:56,367 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 10:53:05,019 - INFO - Imagen publicada correctamente.
2025-06-02 10:53:05,020 - INFO - Iniciando el servidor s1
2025-06-02 10:53:05,020 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 10:53:05,285 - INFO - Contenedor iniciado: s1
2025-06-02 10:53:05,684 - INFO - Configurando balanceador lb
2025-06-02 10:53:05,684 - INFO - Instalando haproxy en el balanceador
2025-06-02 10:53:17,241 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 10:53:17,242 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 10:53:17,299 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 10:53:17,321 - DEBUG - Iniciando servicio de haproxy
2025-06-02 10:53:17,369 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 10:53:17,369 - INFO - Balanceador configurado correctamente.
2025-06-02 10:53:42,400 - INFO - Orden recibida: configure_remote
2025-06-02 10:53:42,400 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:53:42,400 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:53:42,400 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 10:53:42,401 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 10:53:42,401 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 10:53:42,457 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 10:53:42,457 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:53:42,458 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:53:42,472 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 10:53:42,485 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 10:53:42,485 - INFO - Validación de configuración completada correctamente.
2025-06-02 10:53:42,485 - INFO - IP local detectada: 138.4.31.75
2025-06-02 10:53:42,487 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 10:53:42,487 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 10:53:53,223 - INFO - Conectando al LXD remoto desde local
2025-06-02 10:53:53,488 - INFO - Configurando bridge remoto
2025-06-02 10:53:54,520 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 10:53:54,520 - DEBUG - Verificando estado antes de detener db
2025-06-02 10:53:55,960 - INFO - Contenedor parado: db
2025-06-02 10:54:20,545 - INFO - Base de datos copiada al equipo remoto
2025-06-02 10:54:20,546 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 10:54:20,641 - INFO - Base de datos remota desplegada correctamente
2025-06-02 10:54:20,641 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 10:54:20,642 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 10:54:20,642 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.78...
2025-06-02 10:54:20,792 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 10:54:20,792 - DEBUG - Reiniciando contenedor s1
2025-06-02 11:29:33,655 - INFO - Orden recibida: enlarge
2025-06-02 11:29:33,656 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:29:33,656 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:29:33,656 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 11:29:33,656 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-06-02 11:29:33,656 - DEBUG - Comprobando estado de s1...
2025-06-02 11:29:33,676 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 11:29:33,676 - DEBUG - Verificando estado antes de detener s1
2025-06-02 11:29:35,210 - INFO - Contenedor parado: s1
2025-06-02 11:29:35,210 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 11:29:35,210 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 11:29:35,276 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 11:30:46,118 - INFO - Imagen publicada correctamente.
2025-06-02 11:30:46,118 - INFO - Buscando servidor libre para crear...
2025-06-02 11:30:46,118 - DEBUG - Verificando si existe el contenedor s1
2025-06-02 11:30:46,127 - DEBUG - Verificando si existe el contenedor s2
2025-06-02 11:30:46,133 - INFO - Creando nuevo servidor disponible: s2
2025-06-02 11:30:46,133 - DEBUG - Intentando crear el contenedor s2
2025-06-02 11:30:59,093 - INFO - Contenedor s2 creado con éxito.
2025-06-02 11:30:59,093 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-06-02 11:30:59,140 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-06-02 11:30:59,140 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-06-02 11:30:59,173 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-06-02 11:30:59,173 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-06-02 11:30:59,173 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:30:59,174 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:30:59,174 - INFO - Solicitado arrancar servidor: s2
2025-06-02 11:30:59,192 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-06-02 11:30:59,497 - INFO - Contenedor iniciado: s2
2025-06-02 11:30:59,884 - INFO - Servidor s2 corriendo correctamente.
2025-06-02 11:30:59,884 - INFO - Solicitado arrancar servidor: s1
2025-06-02 11:30:59,893 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 11:31:00,099 - INFO - Contenedor iniciado: s1
2025-06-02 11:31:00,487 - INFO - Servidor s1 corriendo correctamente.
2025-06-02 11:31:00,527 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 11:31:00,527 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 11:31:00,581 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 11:31:00,598 - DEBUG - Iniciando servicio de haproxy
2025-06-02 11:31:00,636 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 11:31:00,637 - DEBUG - Intentando guardar el número de servidores: 2
2025-06-02 11:31:00,638 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-06-02 11:31:00,639 - INFO - Nuevo número de servidores: 2
2025-06-02 11:36:12,957 - INFO - Orden recibida: configure_enlarge
2025-06-02 11:36:12,957 - ERROR - Orden no válida: configure_enlarge
2025-06-02 11:36:24,678 - INFO - Orden recibida: configure_remote
2025-06-02 11:36:24,678 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:36:24,679 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:36:24,679 - INFO - Se cargó número de servidores desde archivo: 2
2025-06-02 11:36:24,679 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 11:36:24,679 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 11:36:24,689 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-06-02 11:36:24,689 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:36:24,689 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:36:24,743 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 11:36:24,773 - INFO - La carpeta /root/app existe en el servidor s2.
2025-06-02 11:36:24,802 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 11:36:24,802 - WARNING - Fallos detectados durante la validación de configuración.
2025-06-02 11:36:24,802 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-06-02 11:36:34,446 - INFO - Orden recibida: configure_remote
2025-06-02 11:36:34,446 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:36:34,447 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:36:34,447 - INFO - Se cargó número de servidores desde archivo: 2
2025-06-02 11:36:34,447 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 11:36:34,447 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 11:36:34,507 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 11:36:34,508 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:36:34,508 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:36:34,575 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 11:36:34,606 - INFO - La carpeta /root/app existe en el servidor s2.
2025-06-02 11:36:34,637 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 11:36:34,637 - INFO - Validación de configuración completada correctamente.
2025-06-02 11:36:34,637 - INFO - IP local detectada: 138.4.31.75
2025-06-02 11:36:34,640 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 11:36:34,640 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 11:36:42,913 - INFO - Conectando al LXD remoto desde local
2025-06-02 11:36:43,099 - INFO - Configurando bridge remoto
2025-06-02 11:36:43,313 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-06-02 11:36:43,313 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:36:43,313 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:36:43,313 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.78...
2025-06-02 11:36:43,440 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 11:36:43,440 - DEBUG - Reiniciando contenedor s1
2025-06-02 11:36:55,617 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s2 a 138.4.31.78...
2025-06-02 11:36:55,674 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 11:36:55,674 - DEBUG - Reiniciando contenedor s2
2025-06-02 11:39:51,681 - INFO - Orden recibida: delete
2025-06-02 11:39:51,681 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:39:51,682 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 11:39:51,682 - INFO - Se cargó número de servidores desde archivo: 2
2025-06-02 11:39:51,682 - INFO - Eliminando toda la infraestructura
2025-06-02 11:39:51,682 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-06-02 11:39:51,730 - INFO - Imagen ubuntu2004 eliminada con éxito.
2025-06-02 11:39:51,731 - DEBUG - Intentando eliminar la imagen servidor...
2025-06-02 11:39:51,790 - INFO - Imagen servidor eliminada con éxito.
2025-06-02 11:39:51,790 - DEBUG - Eliminando contenedor s1
2025-06-02 11:39:53,658 - INFO - Contenedor eliminado: s1
2025-06-02 11:39:53,658 - DEBUG - Eliminando contenedor s2
2025-06-02 11:39:55,407 - INFO - Contenedor eliminado: s2
2025-06-02 11:39:55,407 - DEBUG - Eliminando contenedor cl
2025-06-02 11:39:56,950 - INFO - Contenedor eliminado: cl
2025-06-02 11:39:56,950 - DEBUG - Eliminando contenedor lb
2025-06-02 11:39:58,624 - INFO - Contenedor eliminado: lb
2025-06-02 11:39:58,624 - DEBUG - Eliminando contenedor db
2025-06-02 11:40:00,009 - INFO - Contenedor eliminado: db
2025-06-02 11:40:00,009 - DEBUG - Contenedores eliminados correctamente
2025-06-02 11:40:00,009 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-06-02 11:40:00,346 - INFO - Bridge eliminado: lxdbr1
2025-06-02 11:40:00,346 - INFO - Eliminación completada.
2025-06-02 11:40:28,348 - INFO - Orden recibida: create
2025-06-02 11:40:28,348 - INFO - Número de servidores especificado: 1
2025-06-02 11:40:28,348 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-06-02 11:40:28,348 - DEBUG - Parámetro recibido n_servers=1
2025-06-02 11:40:28,348 - DEBUG - Creando imagen base...
2025-06-02 11:40:28,348 - DEBUG - Verificando si la imagen ya está importada...
2025-06-02 11:40:28,357 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-06-02 11:40:29,611 - INFO - Imagen ubuntu2004 importada con éxito.
2025-06-02 11:40:29,611 - DEBUG - Configurando y creando bridges...
2025-06-02 11:40:29,628 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-06-02 11:40:29,693 - INFO - Bridge configurado correctamente: lxdbr0
2025-06-02 11:40:29,693 - DEBUG - Creando bridge lxdbr1
2025-06-02 11:40:31,315 - INFO - Bridge creado: lxdbr1
2025-06-02 11:40:32,154 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-06-02 11:40:35,363 - INFO - Bridge configurado correctamente: lxdbr1
2025-06-02 11:40:35,363 - DEBUG - Creando contenedores de servidores...
2025-06-02 11:40:35,363 - DEBUG - Intentando crear el contenedor s1
2025-06-02 11:40:41,450 - INFO - Contenedor s1 creado con éxito.
2025-06-02 11:40:41,450 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-06-02 11:40:41,493 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-06-02 11:40:41,493 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-06-02 11:40:41,524 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-06-02 11:40:41,524 - DEBUG - Intentando guardar el número de servidores: 1
2025-06-02 11:40:41,526 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-06-02 11:40:41,526 - INFO - Número de servidores guardados correctamente
2025-06-02 11:40:41,526 - DEBUG - Creando balanceador...
2025-06-02 11:40:41,526 - DEBUG - Intentando crear el contenedor lb
2025-06-02 11:40:47,700 - INFO - Contenedor lb creado con éxito.
2025-06-02 11:40:47,700 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-06-02 11:40:47,730 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-06-02 11:40:47,730 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-06-02 11:40:47,761 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-06-02 11:40:47,761 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-06-02 11:40:47,814 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-06-02 11:40:47,814 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-06-02 11:40:47,848 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-06-02 11:40:47,848 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 11:40:48,261 - INFO - Contenedor iniciado: lb
2025-06-02 11:40:48,261 - DEBUG - Iniciando cambio de netplan en lb
2025-06-02 11:40:48,261 - DEBUG - Desactivando cloud-init en lb
2025-06-02 11:40:48,305 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-06-02 11:40:48,330 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-06-02 11:40:48,330 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-06-02 11:40:48,344 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-06-02 11:40:49,820 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-06-02 11:40:49,820 - DEBUG - Verificando estado antes de detener lb
2025-06-02 11:40:51,023 - INFO - Contenedor parado: lb
2025-06-02 11:40:51,023 - INFO - Balanceador configurado correctamente
2025-06-02 11:40:51,023 - DEBUG - Creando cliente...
2025-06-02 11:40:51,023 - DEBUG - Intentando crear el contenedor cl
2025-06-02 11:40:57,094 - INFO - Contenedor cl creado con éxito.
2025-06-02 11:40:57,094 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-06-02 11:40:57,121 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-06-02 11:40:57,121 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-06-02 11:40:57,138 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-06-02 11:40:57,138 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 11:40:57,510 - INFO - Contenedor iniciado: cl
2025-06-02 11:40:57,510 - DEBUG - Iniciando cambio de netplan en cl
2025-06-02 11:40:57,510 - DEBUG - Desactivando cloud-init en cl
2025-06-02 11:40:57,586 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-06-02 11:40:57,620 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-06-02 11:40:57,621 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-06-02 11:40:57,638 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-06-02 11:40:59,113 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-06-02 11:40:59,114 - DEBUG - Verificando estado antes de detener cl
2025-06-02 11:41:00,341 - INFO - Contenedor parado: cl
2025-06-02 11:41:00,341 - INFO - Cliente configurado correctamente
2025-06-02 11:41:00,341 - DEBUG - Intentando crear el contenedor db
2025-06-02 11:41:06,468 - INFO - Contenedor db creado con éxito.
2025-06-02 11:41:06,468 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-06-02 11:41:06,503 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-06-02 11:41:06,504 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-06-02 11:41:06,537 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-06-02 11:41:06,537 - INFO - Infraestructura creada correctamente.
2025-06-02 11:41:20,764 - INFO - Orden recibida: start
2025-06-02 11:41:20,764 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:41:20,765 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:41:20,765 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 11:41:20,765 - INFO - Iniciando todos los contenedores
2025-06-02 11:41:20,765 - DEBUG - Arrancando servidor: s1
2025-06-02 11:41:20,765 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 11:41:21,095 - INFO - Contenedor iniciado: s1
2025-06-02 11:41:21,160 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-06-02 11:41:21,160 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 11:41:21,501 - INFO - Contenedor iniciado: cl
2025-06-02 11:41:21,501 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 11:41:21,853 - INFO - Contenedor iniciado: lb
2025-06-02 11:41:21,853 - DEBUG - Iniciando verificación de estado del contenedor db
2025-06-02 11:41:22,085 - INFO - Contenedor iniciado: db
2025-06-02 11:41:22,085 - INFO - Todos los contenedores han sido iniciados correctamente
2025-06-02 11:41:22,086 - INFO - Consola del contenedor s1 abierta correctamente
2025-06-02 11:41:22,087 - INFO - Consola del contenedor cl abierta correctamente
2025-06-02 11:41:22,087 - INFO - Consola del contenedor lb abierta correctamente
2025-06-02 11:41:22,088 - INFO - Consola del contenedor db abierta correctamente
2025-06-02 11:42:15,568 - INFO - Orden recibida: configure
2025-06-02 11:42:15,568 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:42:15,568 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:42:15,568 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 11:42:15,568 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:42:15,568 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:42:15,577 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:42:15,577 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:42:15,588 - INFO - Iniciando configuración de la infraestructura...
2025-06-02 11:42:15,588 - INFO - Configurando base de datos MongoDB en: db
2025-06-02 11:42:15,588 - INFO - Iniciando instalación de MongoDB en db
2025-06-02 11:42:24,475 - DEBUG - Instalando MongoDB
2025-06-02 11:42:34,187 - DEBUG - Modificando bind_ip de MongoDB
2025-06-02 11:42:34,249 - DEBUG - Reiniciando contenedor db
2025-06-02 11:42:35,995 - INFO - MongoDB configurado con éxito en db
2025-06-02 11:42:35,995 - INFO - Configuración de base de datos completada correctamente.
2025-06-02 11:42:35,995 - INFO - Configurando servidor web base s1
2025-06-02 11:42:35,995 - INFO - Iniciando configuración del servidor web s1
2025-06-02 11:42:35,995 - DEBUG - Actualizando paquetes en s1
2025-06-02 11:42:44,090 - DEBUG - Instalando Apache en s1
2025-06-02 11:42:50,070 - DEBUG - Transfiriendo script de instalación Node.js
2025-06-02 11:42:50,145 - DEBUG - Transfiriendo aplicación web
2025-06-02 11:42:50,154 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-06-02 11:42:50,186 - DEBUG - Ejecutando instalación Node.js
2025-06-02 11:43:58,903 - DEBUG - Reiniciando servidor
2025-06-02 11:44:00,532 - DEBUG - Iniciando servidor Node.js con forever
2025-06-02 11:44:00,767 - INFO - Servidor web s1 configurado con éxito.
2025-06-02 11:44:00,768 - INFO - Creando imagen a partir del servidor base configurado
2025-06-02 11:44:00,768 - DEBUG - Comprobando estado de s1...
2025-06-02 11:44:00,778 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 11:44:00,778 - DEBUG - Verificando estado antes de detener s1
2025-06-02 11:44:01,901 - INFO - Contenedor parado: s1
2025-06-02 11:44:01,901 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 11:44:01,901 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 11:44:01,912 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 11:45:10,562 - INFO - Imagen publicada correctamente.
2025-06-02 11:45:10,562 - INFO - Iniciando el servidor s1
2025-06-02 11:45:10,562 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 11:45:10,856 - INFO - Contenedor iniciado: s1
2025-06-02 11:45:11,256 - INFO - Configurando balanceador lb
2025-06-02 11:45:11,256 - INFO - Instalando haproxy en el balanceador
2025-06-02 11:45:26,899 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 11:45:26,899 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 11:45:26,955 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 11:45:26,992 - DEBUG - Iniciando servicio de haproxy
2025-06-02 11:45:27,063 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 11:45:27,063 - INFO - Balanceador configurado correctamente.
2025-06-02 11:45:40,380 - INFO - Orden recibida: configure_remote
2025-06-02 11:45:40,380 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:45:40,380 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:45:40,380 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 11:45:40,380 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 11:45:40,380 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 11:45:40,447 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 11:45:40,447 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:45:40,448 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:45:40,524 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 11:45:40,587 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 11:45:40,587 - INFO - Validación de configuración completada correctamente.
2025-06-02 11:45:40,588 - INFO - IP local detectada: 138.4.31.75
2025-06-02 11:45:40,591 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 11:45:40,591 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 11:45:51,877 - INFO - Conectando al LXD remoto desde local
2025-06-02 11:45:52,031 - INFO - Configurando bridge remoto
2025-06-02 11:45:52,212 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 11:45:52,213 - DEBUG - Verificando estado antes de detener db
2025-06-02 11:45:53,756 - INFO - Contenedor parado: db
2025-06-02 11:46:18,345 - INFO - Base de datos copiada al equipo remoto
2025-06-02 11:46:18,345 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 11:46:18,428 - INFO - Base de datos remota desplegada correctamente
2025-06-02 11:46:18,428 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:46:18,429 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:46:18,429 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.78...
2025-06-02 11:46:18,556 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 11:46:18,556 - DEBUG - Reiniciando contenedor s1
2025-06-02 11:49:21,902 - INFO - Orden recibida: enlarge
2025-06-02 11:49:21,902 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:49:21,902 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:49:21,902 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 11:49:21,902 - INFO - Ampliando infraestructura con un nuevo servidor...
2025-06-02 11:49:21,902 - DEBUG - Comprobando estado de s1...
2025-06-02 11:49:21,920 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 11:49:21,920 - DEBUG - Verificando estado antes de detener s1
2025-06-02 11:49:23,515 - INFO - Contenedor parado: s1
2025-06-02 11:49:23,515 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 11:49:23,515 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 11:49:23,592 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 11:50:32,063 - INFO - Imagen publicada correctamente.
2025-06-02 11:50:32,063 - INFO - Buscando servidor libre para crear...
2025-06-02 11:50:32,063 - DEBUG - Verificando si existe el contenedor s1
2025-06-02 11:50:32,072 - DEBUG - Verificando si existe el contenedor s2
2025-06-02 11:50:32,078 - INFO - Creando nuevo servidor disponible: s2
2025-06-02 11:50:32,078 - DEBUG - Intentando crear el contenedor s2
2025-06-02 11:50:44,439 - INFO - Contenedor s2 creado con éxito.
2025-06-02 11:50:44,439 - DEBUG - Conectando s2 al bridge lxdbr0 usando eth0
2025-06-02 11:50:44,473 - INFO - Conectado s2 al bridge lxdbr0 por eth0
2025-06-02 11:50:44,473 - DEBUG - Configurando red para s2: iface=eth0, ip=134.3.0.12
2025-06-02 11:50:44,494 - INFO - Contenedor s2 conectado a eth0 con IP 134.3.0.12
2025-06-02 11:50:44,494 - INFO - Servidor s2 creado correctamente con IP 134.3.0.12 
2025-06-02 11:50:44,494 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 11:50:44,496 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 11:50:44,496 - INFO - Solicitado arrancar servidor: s2
2025-06-02 11:50:44,512 - DEBUG - Iniciando verificación de estado del contenedor s2
2025-06-02 11:50:44,795 - INFO - Contenedor iniciado: s2
2025-06-02 11:50:45,198 - INFO - Servidor s2 corriendo correctamente.
2025-06-02 11:50:45,198 - INFO - Solicitado arrancar servidor: s1
2025-06-02 11:50:45,207 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 11:50:45,433 - INFO - Contenedor iniciado: s1
2025-06-02 11:50:45,850 - INFO - Servidor s1 corriendo correctamente.
2025-06-02 11:50:45,888 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 11:50:45,888 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 11:50:45,904 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 11:50:45,921 - DEBUG - Iniciando servicio de haproxy
2025-06-02 11:50:45,958 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 11:50:45,958 - DEBUG - Intentando guardar el número de servidores: 2
2025-06-02 11:50:45,959 - INFO - Número de servidores 2 guardados correctamente en static/files/num_serves.txt.
2025-06-02 11:50:45,960 - INFO - Nuevo número de servidores: 2
2025-06-02 12:14:05,232 - INFO - Orden recibida: delete
2025-06-02 12:14:05,232 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:14:05,233 - INFO - Número de servidores 2 cargados correctamente.
2025-06-02 12:14:05,233 - INFO - Se cargó número de servidores desde archivo: 2
2025-06-02 12:14:05,233 - INFO - Eliminando toda la infraestructura
2025-06-02 12:14:05,233 - DEBUG - Intentando eliminar la imagen ubuntu2004...
2025-06-02 12:14:05,293 - INFO - Imagen ubuntu2004 eliminada con éxito.
2025-06-02 12:14:05,293 - DEBUG - Intentando eliminar la imagen servidor...
2025-06-02 12:14:05,345 - INFO - Imagen servidor eliminada con éxito.
2025-06-02 12:14:05,345 - DEBUG - Eliminando contenedor s1
2025-06-02 12:14:07,138 - INFO - Contenedor eliminado: s1
2025-06-02 12:14:07,138 - DEBUG - Eliminando contenedor s2
2025-06-02 12:14:08,815 - INFO - Contenedor eliminado: s2
2025-06-02 12:14:08,816 - DEBUG - Eliminando contenedor cl
2025-06-02 12:14:10,359 - INFO - Contenedor eliminado: cl
2025-06-02 12:14:10,359 - DEBUG - Eliminando contenedor lb
2025-06-02 12:14:12,022 - INFO - Contenedor eliminado: lb
2025-06-02 12:14:12,022 - DEBUG - Eliminando contenedor db
2025-06-02 12:14:12,438 - INFO - Contenedor eliminado: db
2025-06-02 12:14:12,438 - DEBUG - Contenedores eliminados correctamente
2025-06-02 12:14:12,438 - DEBUG - Intentando eliminar el bridge lxdbr1
2025-06-02 12:14:12,808 - INFO - Bridge eliminado: lxdbr1
2025-06-02 12:14:12,808 - INFO - Eliminación completada.
2025-06-02 12:14:23,330 - INFO - Orden recibida: create
2025-06-02 12:14:23,330 - INFO - Número de servidores especificado: 1
2025-06-02 12:14:23,330 - INFO - Iniciando creación de infraestructura con 1 servidores
2025-06-02 12:14:23,330 - DEBUG - Parámetro recibido n_servers=1
2025-06-02 12:14:23,330 - DEBUG - Creando imagen base...
2025-06-02 12:14:23,330 - DEBUG - Verificando si la imagen ya está importada...
2025-06-02 12:14:23,340 - INFO - La imagen ubuntu2004 no está importada. Se procederá a importarla.
2025-06-02 12:14:24,590 - INFO - Imagen ubuntu2004 importada con éxito.
2025-06-02 12:14:24,590 - DEBUG - Configurando y creando bridges...
2025-06-02 12:14:24,608 - INFO - 134.3.0.1/24 asignada correctamente al bridge: lxdbr0
2025-06-02 12:14:24,671 - INFO - Bridge configurado correctamente: lxdbr0
2025-06-02 12:14:24,671 - DEBUG - Creando bridge lxdbr1
2025-06-02 12:14:26,285 - INFO - Bridge creado: lxdbr1
2025-06-02 12:14:27,126 - INFO - 134.3.1.1/24 asignada correctamente al bridge: lxdbr1
2025-06-02 12:14:30,426 - INFO - Bridge configurado correctamente: lxdbr1
2025-06-02 12:14:30,426 - DEBUG - Creando contenedores de servidores...
2025-06-02 12:14:30,426 - DEBUG - Intentando crear el contenedor s1
2025-06-02 12:14:36,555 - INFO - Contenedor s1 creado con éxito.
2025-06-02 12:14:36,555 - DEBUG - Conectando s1 al bridge lxdbr0 usando eth0
2025-06-02 12:14:36,591 - INFO - Conectado s1 al bridge lxdbr0 por eth0
2025-06-02 12:14:36,591 - DEBUG - Configurando red para s1: iface=eth0, ip=134.3.0.11
2025-06-02 12:14:36,626 - INFO - Contenedor s1 conectado a eth0 con IP 134.3.0.11
2025-06-02 12:14:36,626 - DEBUG - Intentando guardar el número de servidores: 1
2025-06-02 12:14:36,628 - INFO - Número de servidores 1 guardados correctamente en static/files/num_serves.txt.
2025-06-02 12:14:36,628 - INFO - Número de servidores guardados correctamente
2025-06-02 12:14:36,628 - DEBUG - Creando balanceador...
2025-06-02 12:14:36,628 - DEBUG - Intentando crear el contenedor lb
2025-06-02 12:14:42,809 - INFO - Contenedor lb creado con éxito.
2025-06-02 12:14:42,809 - DEBUG - Conectando lb al bridge lxdbr0 usando eth0
2025-06-02 12:14:42,839 - INFO - Conectado lb al bridge lxdbr0 por eth0
2025-06-02 12:14:42,839 - DEBUG - Configurando red para lb: iface=eth0, ip=134.3.0.10
2025-06-02 12:14:42,869 - INFO - Contenedor lb conectado a eth0 con IP 134.3.0.10
2025-06-02 12:14:42,869 - DEBUG - Conectando lb al bridge lxdbr1 usando eth1
2025-06-02 12:14:42,928 - INFO - Conectado lb al bridge lxdbr1 por eth1
2025-06-02 12:14:42,928 - DEBUG - Configurando red para lb: iface=eth1, ip=134.3.1.10
2025-06-02 12:14:42,960 - INFO - Contenedor lb conectado a eth1 con IP 134.3.1.10
2025-06-02 12:14:42,960 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 12:14:43,333 - INFO - Contenedor iniciado: lb
2025-06-02 12:14:43,333 - DEBUG - Iniciando cambio de netplan en lb
2025-06-02 12:14:43,333 - DEBUG - Desactivando cloud-init en lb
2025-06-02 12:14:43,366 - DEBUG - Creando copia de seguridad del archivo netplan original en lb
2025-06-02 12:14:43,384 - DEBUG - Configurando interfaces eth0 y eth1 para balanceador lb
2025-06-02 12:14:43,384 - DEBUG - Escribiendo nueva configuración de netplan en lb
2025-06-02 12:14:43,400 - DEBUG - Reiniciando contenedor lb para aplicar cambios
2025-06-02 12:14:44,939 - INFO - Configuración de red aplicada correctamente en el contenedor lb
2025-06-02 12:14:44,939 - DEBUG - Verificando estado antes de detener lb
2025-06-02 12:14:46,154 - INFO - Contenedor parado: lb
2025-06-02 12:14:46,154 - INFO - Balanceador configurado correctamente
2025-06-02 12:14:46,155 - DEBUG - Creando cliente...
2025-06-02 12:14:46,155 - DEBUG - Intentando crear el contenedor cl
2025-06-02 12:14:52,250 - INFO - Contenedor cl creado con éxito.
2025-06-02 12:14:52,250 - DEBUG - Conectando cl al bridge lxdbr1 usando eth1
2025-06-02 12:14:52,293 - INFO - Conectado cl al bridge lxdbr1 por eth1
2025-06-02 12:14:52,293 - DEBUG - Configurando red para cl: iface=eth1, ip=134.3.1.11
2025-06-02 12:14:52,329 - INFO - Contenedor cl conectado a eth1 con IP 134.3.1.11
2025-06-02 12:14:52,329 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 12:14:52,705 - INFO - Contenedor iniciado: cl
2025-06-02 12:14:52,705 - DEBUG - Iniciando cambio de netplan en cl
2025-06-02 12:14:52,705 - DEBUG - Desactivando cloud-init en cl
2025-06-02 12:14:52,745 - DEBUG - Creando copia de seguridad del archivo netplan original en cl
2025-06-02 12:14:52,775 - DEBUG - Configurando interfaz eth1 para cliente cl
2025-06-02 12:14:52,776 - DEBUG - Escribiendo nueva configuración de netplan en cl
2025-06-02 12:14:52,801 - DEBUG - Reiniciando contenedor cl para aplicar cambios
2025-06-02 12:14:54,398 - INFO - Configuración de red aplicada correctamente en el contenedor cl
2025-06-02 12:14:54,398 - DEBUG - Verificando estado antes de detener cl
2025-06-02 12:14:55,662 - INFO - Contenedor parado: cl
2025-06-02 12:14:55,662 - INFO - Cliente configurado correctamente
2025-06-02 12:14:55,662 - DEBUG - Intentando crear el contenedor db
2025-06-02 12:15:01,755 - INFO - Contenedor db creado con éxito.
2025-06-02 12:15:01,755 - DEBUG - Conectando db al bridge lxdbr0 usando eth0
2025-06-02 12:15:01,798 - INFO - Conectado db al bridge lxdbr0 por eth0
2025-06-02 12:15:01,799 - DEBUG - Configurando red para db: iface=eth0, ip=134.3.0.20
2025-06-02 12:15:01,830 - INFO - Contenedor db conectado a eth0 con IP 134.3.0.20
2025-06-02 12:15:01,830 - INFO - Infraestructura creada correctamente.
2025-06-02 12:15:07,531 - INFO - Orden recibida: start
2025-06-02 12:15:07,531 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:15:07,531 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:15:07,531 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:15:07,531 - INFO - Iniciando todos los contenedores
2025-06-02 12:15:07,531 - DEBUG - Arrancando servidor: s1
2025-06-02 12:15:07,531 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 12:15:07,808 - INFO - Contenedor iniciado: s1
2025-06-02 12:15:07,852 - DEBUG - No se encontró la app en s1, no se reinicia.
2025-06-02 12:15:07,852 - DEBUG - Iniciando verificación de estado del contenedor cl
2025-06-02 12:15:08,194 - INFO - Contenedor iniciado: cl
2025-06-02 12:15:08,194 - DEBUG - Iniciando verificación de estado del contenedor lb
2025-06-02 12:15:08,577 - INFO - Contenedor iniciado: lb
2025-06-02 12:15:08,578 - DEBUG - Iniciando verificación de estado del contenedor db
2025-06-02 12:15:08,793 - INFO - Contenedor iniciado: db
2025-06-02 12:15:08,793 - INFO - Todos los contenedores han sido iniciados correctamente
2025-06-02 12:15:08,794 - INFO - Consola del contenedor s1 abierta correctamente
2025-06-02 12:15:08,795 - INFO - Consola del contenedor cl abierta correctamente
2025-06-02 12:15:08,795 - INFO - Consola del contenedor lb abierta correctamente
2025-06-02 12:15:08,796 - INFO - Consola del contenedor db abierta correctamente
2025-06-02 12:15:13,934 - INFO - Orden recibida: configure
2025-06-02 12:15:13,934 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:15:13,934 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:15:13,934 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:15:13,934 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:15:13,934 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:15:13,943 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:15:13,943 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:15:13,957 - INFO - Iniciando configuración de la infraestructura...
2025-06-02 12:15:13,957 - INFO - Configurando base de datos MongoDB en: db
2025-06-02 12:15:13,957 - INFO - Iniciando instalación de MongoDB en db
2025-06-02 12:15:25,409 - DEBUG - Instalando MongoDB
2025-06-02 12:15:36,403 - DEBUG - Modificando bind_ip de MongoDB
2025-06-02 12:15:36,483 - DEBUG - Reiniciando contenedor db
2025-06-02 12:15:38,255 - INFO - MongoDB configurado con éxito en db
2025-06-02 12:15:38,256 - INFO - Configuración de base de datos completada correctamente.
2025-06-02 12:15:38,256 - INFO - Configurando servidor web base s1
2025-06-02 12:15:38,256 - INFO - Iniciando configuración del servidor web s1
2025-06-02 12:15:38,256 - DEBUG - Actualizando paquetes en s1
2025-06-02 12:15:49,930 - DEBUG - Instalando Apache en s1
2025-06-02 12:15:57,147 - DEBUG - Transfiriendo script de instalación Node.js
2025-06-02 12:15:57,249 - DEBUG - Transfiriendo aplicación web
2025-06-02 12:15:57,259 - DEBUG - Extrayendo el contenido de app.tar.gz
2025-06-02 12:15:57,352 - DEBUG - Ejecutando instalación Node.js
2025-06-02 12:17:09,681 - DEBUG - Reiniciando servidor
2025-06-02 12:17:11,312 - DEBUG - Iniciando servidor Node.js con forever
2025-06-02 12:17:11,551 - INFO - Servidor web s1 configurado con éxito.
2025-06-02 12:17:11,551 - INFO - Creando imagen a partir del servidor base configurado
2025-06-02 12:17:11,551 - DEBUG - Comprobando estado de s1...
2025-06-02 12:17:11,561 - INFO - Contenedor s1 está en ejecución. Parando...
2025-06-02 12:17:11,561 - DEBUG - Verificando estado antes de detener s1
2025-06-02 12:17:12,723 - INFO - Contenedor parado: s1
2025-06-02 12:17:12,723 - DEBUG - Comprobando si la imagen  con alias 'servidor' ya existe
2025-06-02 12:17:12,723 - DEBUG - Eliminando imagen previa con alias servidor si existe
2025-06-02 12:17:12,733 - INFO - Publicando imagen del contenedor s1 con alias servidor
2025-06-02 12:18:21,627 - INFO - Imagen publicada correctamente.
2025-06-02 12:18:21,627 - INFO - Iniciando el servidor s1
2025-06-02 12:18:21,627 - DEBUG - Iniciando verificación de estado del contenedor s1
2025-06-02 12:18:21,967 - INFO - Contenedor iniciado: s1
2025-06-02 12:18:22,640 - INFO - Configurando balanceador lb
2025-06-02 12:18:22,640 - INFO - Instalando haproxy en el balanceador
2025-06-02 12:18:39,283 - DEBUG - Generando archivo de configuración haproxy.cfg
2025-06-02 12:18:39,283 - DEBUG - Escribiendo configuración de haproxy en el contenedor
2025-06-02 12:18:39,363 - DEBUG - Validando archivo haproxy.cfg
2025-06-02 12:18:39,394 - DEBUG - Iniciando servicio de haproxy
2025-06-02 12:18:39,477 - INFO - Haproxy instalado y configurado correctamente.
2025-06-02 12:18:39,477 - INFO - Balanceador configurado correctamente.
2025-06-02 12:19:16,881 - INFO - Orden recibida: configure_remote
2025-06-02 12:19:16,881 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:19:16,882 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:19:16,882 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:19:16,882 - ERROR - Falta el nombre del equipo en el que desplegar la base de datos en remoto
2025-06-02 12:20:09,023 - INFO - Orden recibida: configure_remote
2025-06-02 12:20:09,023 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:20:09,024 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:20:09,024 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:20:09,024 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 12:20:09,024 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 12:20:09,075 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 12:20:09,075 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:20:09,075 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:20:09,143 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 12:20:09,171 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 12:20:09,171 - INFO - Validación de configuración completada correctamente.
2025-06-02 12:20:09,171 - INFO - IP local detectada: 138.4.31.75
2025-06-02 12:20:09,174 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 12:20:09,175 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 12:21:53,176 - INFO - Conectando al LXD remoto desde local
2025-06-02 12:21:53,355 - INFO - Configurando bridge remoto
2025-06-02 12:21:53,575 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 12:21:53,575 - DEBUG - Verificando estado antes de detener db
2025-06-02 12:21:55,032 - INFO - Contenedor parado: db
2025-06-02 12:22:19,646 - INFO - Base de datos copiada al equipo remoto
2025-06-02 12:22:19,646 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 12:25:42,758 - INFO - Orden recibida: configure_remote
2025-06-02 12:25:42,758 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:25:42,759 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:25:42,759 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:25:42,759 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 12:25:42,759 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 12:25:42,773 - ERROR - MongoDB no está instalado en el contenedor de base de datos.
2025-06-02 12:25:42,773 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:25:42,773 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:25:42,828 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 12:25:42,908 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 12:25:42,909 - WARNING - Fallos detectados durante la validación de configuración.
2025-06-02 12:25:42,909 - ERROR - La configuración base no está completa. Ejecuta 'configure' antes de 'configure_remote'.
2025-06-02 12:25:51,674 - INFO - Orden recibida: configure_remote
2025-06-02 12:25:51,674 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:25:51,674 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:25:51,675 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:25:51,675 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 12:25:51,675 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 12:25:51,723 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 12:25:51,723 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:25:51,723 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:25:51,791 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 12:25:51,822 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 12:25:51,822 - INFO - Validación de configuración completada correctamente.
2025-06-02 12:25:51,822 - INFO - IP local detectada: 138.4.31.75
2025-06-02 12:25:51,825 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 12:25:51,825 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 12:26:00,426 - INFO - Conectando al LXD remoto desde local
2025-06-02 12:26:00,638 - INFO - Configurando bridge remoto
2025-06-02 12:26:00,819 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-06-02 12:26:18,892 - INFO - Orden recibida: configure_remote
2025-06-02 12:26:18,892 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:26:18,892 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:26:18,892 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:26:18,892 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 12:26:18,892 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 12:26:18,959 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 12:26:18,959 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:26:18,959 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:26:19,040 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 12:26:19,070 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 12:26:19,070 - INFO - Validación de configuración completada correctamente.
2025-06-02 12:26:19,070 - INFO - IP local detectada: 138.4.31.75
2025-06-02 12:26:19,073 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 12:26:19,073 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 12:26:27,367 - INFO - Conectando al LXD remoto desde local
2025-06-02 12:26:27,448 - INFO - Configurando bridge remoto
2025-06-02 12:26:27,640 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-06-02 12:27:04,797 - INFO - Orden recibida: configure_remote
2025-06-02 12:27:04,797 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:27:04,797 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:27:04,797 - INFO - Se cargó número de servidores desde archivo: 1
2025-06-02 12:27:04,797 - INFO - Desplegando base de datos remota en el equipo l078
2025-06-02 12:27:04,797 - DEBUG - Comprobando que se ha ejecutado la orden configure
2025-06-02 12:27:04,864 - INFO - MongoDB está instalado en el contenedor de base de datos.
2025-06-02 12:27:04,865 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:27:04,865 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:27:04,939 - INFO - La carpeta /root/app existe en el servidor s1.
2025-06-02 12:27:04,970 - INFO - El archivo haproxy.cfg existe en el contenedor de balanceador.
2025-06-02 12:27:04,970 - INFO - Validación de configuración completada correctamente.
2025-06-02 12:27:04,970 - INFO - IP local detectada: 138.4.31.75
2025-06-02 12:27:04,972 - INFO - Nombre remoto detectado: l078.lab.dit.upm.es cuya IP: 138.4.31.78
2025-06-02 12:27:04,973 - INFO - Configurando acceso remoto a LXD en ambos equipos
2025-06-02 12:27:19,983 - INFO - Conectando al LXD remoto desde local
2025-06-02 12:27:20,194 - INFO - Configurando bridge remoto
2025-06-02 12:27:20,390 - INFO - El contenedor db ya existe en remoto. No se copia.
2025-06-02 12:27:20,390 - DEBUG - Eliminando contenedor remoto:db
2025-06-02 12:27:21,919 - INFO - Contenedor eliminado: remoto:db
2025-06-02 12:27:21,945 - INFO - El contenedor 'db' está en ejecución. Deteniéndolo...
2025-06-02 12:27:21,945 - DEBUG - Verificando estado antes de detener db
2025-06-02 12:27:23,476 - INFO - Contenedor parado: db
2025-06-02 12:27:48,022 - INFO - Base de datos copiada al equipo remoto
2025-06-02 12:27:48,022 - INFO - Configurando proxy para acceso a MongoDB
2025-06-02 12:27:48,110 - DEBUG - Iniciando verificación de estado del contenedor remoto:db
2025-06-02 12:27:49,498 - INFO - Contenedor iniciado: remoto:db
2025-06-02 12:27:49,498 - INFO - Base de datos remota desplegada correctamente
2025-06-02 12:27:49,498 - DEBUG - Leyendo el número de servidores desde static/files/num_serves.txt...
2025-06-02 12:27:49,499 - INFO - Número de servidores 1 cargados correctamente.
2025-06-02 12:27:49,499 - INFO - Cambiando IP en archivos de configuración dentro del contenedor s1 a 138.4.31.78...
2025-06-02 12:27:49,649 - INFO - IP cambiada correctamente en los archivos de configuración.
2025-06-02 12:27:49,649 - DEBUG - Reiniciando contenedor s1
